!function(){function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!s&&c)return c(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=n[o]={exports:{}};t[o][0].call(h.exports,function(e){var n=t[o][1][e];return i(n?n:e)},h,h.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}return e}()({1:[function(e,t,n){"use strict";function r(){this._createElemnts(),this._bindEvents()}var i=r.prototype;i._bindEvents=function(){this._onResize=this._resize.bind(this)},i._createElemnts=function(){this.span=document.createElement("span");var e=this.span.style;e.visibility="hidden",e.position="absolute",e.top="0",e.bottom="0",e.zIndex="-1",this.span.innerHTML="&nbsp;",this.iframe=document.createElement("iframe");var t=this.iframe.style;t.position="absolute",t.top="0",t.left="0",t.width="100%",t.height="100%",this.span.appendChild(this.iframe),document.body.appendChild(this.span)},i.detect=function(e){this.originalSize=e||17,this.currentSize=parseFloat(window.getComputedStyle(this.span)["font-size"]),this.currentSize>this.originalSize&&this._onResize(),this.isDetecting||(this.iframe.contentWindow.addEventListener("resize",this._onResize),this.isDetecting=!0)},i._resize=function(e){this.currentSize=parseFloat(window.getComputedStyle(this.span)["font-size"]),this.originalSize<this.currentSize?document.documentElement.classList.add("text-zoom"):document.documentElement.classList.remove("text-zoom"),window.dispatchEvent(new Event("resize")),window.dispatchEvent(new CustomEvent("resize:text-zoom",{detail:this}))},i.getScale=function(){return this.currentSize/this.originalSize},i.remove=function(){this.isDetecting&&(this.iframe.contentWindow.removeEventListener("resize",this._onResize),this.isDetecting=!1)},i.destroy=function(){this.remove(),this.span&&this.span.parentElement&&this.span.parentElement.removeChild(this.span),this.span=null,this.iframe=null},t.exports=new r},{}],2:[function(e,t,n){"use strict";t.exports=Object.freeze({ELEMENT:1,TEXT:3,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11})},{}],3:[function(e,t,n){"use strict";t.exports=function(e){return!(!e||!e.nodeType)}},{}],4:[function(e,t,n){"use strict";var r=e(3);t.exports=function(e,t){return!!r(e)&&("number"==typeof t?e.nodeType===t:!!Array.isArray(t)&&t.indexOf(e.nodeType)!==-1)}},{3:3}],5:[function(e,t,n){"use strict";t.exports={EventEmitterMicro:e(6)}},{6:6}],6:[function(e,t,n){"use strict";function r(){this._events={}}var i=r.prototype;i.on=function(e,t){this._events[e]=this._events[e]||[],this._events[e].unshift(t)},i.once=function(e,t){function n(i){r.off(e,n),void 0!==i?t(i):t()}var r=this;this.on(e,n)},i.off=function(e,t){if(this.has(e)){if(1===arguments.length)return this._events[e]=null,void delete this._events[e];var n=this._events[e].indexOf(t);n!==-1&&this._events[e].splice(n,1)}},i.trigger=function(e,t){if(this.has(e))for(var n=this._events[e].length-1;n>=0;n--)void 0!==t?this._events[e][n](t):this._events[e][n]()},i.has=function(e){return e in this._events!=!1&&0!==this._events[e].length},i.destroy=function(){for(var e in this._events)this._events[e]=null;this._events=null},t.exports=r},{}],7:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a=r(e(21)),o=r(e(30)),s=r(e(23)),c=r(e(18)),u=r(e(24)),h=e(9),l=e(8),f=e(5),p=f.EventEmitterMicro,d=function(e){function t(e,n,r){var a;return(0,i["default"])(this,t),a=(0,o["default"])(this,(0,s["default"])(t).call(this)),r=r||document.createElement("canvas"),a.glCanvas=new h(r),a.colorFlow=new l(e.url,a.glCanvas,e.fps,e.extension),a.maskFlow=new l(n.url,a.glCanvas,n.fps,n.extension),Object.defineProperties((0,c["default"])(a),{hasLoadedChapterFrames:{get:function(){return this.colorFlow.hasLoadedChapterFrames&&this.maskFlow.hasLoadedChapterFrames}},hasLoadedSuperFrames:{get:function(){return this.colorFlow.hasLoadedSuperFrames&&this.maskFlow.hasLoadedSuperFrames}},hasFullyLoaded:{get:function(){return this.colorFlow.hasFullyLoaded&&this.maskFlow.hasFullyLoaded}},isManifestReady:{get:function(){return this.colorFlow.isManifestReady&&this.maskFlow.isManifestReady}}}),a._progress=0,a}return(0,u["default"])(t,e),(0,a["default"])(t,[{key:"startLoading",value:function(){var e=this;[this.colorFlow,this.maskFlow].map(function(t){t.once(l.Events.ManifestReady,function(t){e.isManifestReady&&(e.glCanvas.modifyPoolSize(e.colorFlow.manifest.frameCount+e.maskFlow.manifest.frameCount),e.trigger(l.Events.ManifestReady))}),t.once(l.Events.ChapterFramesLoaded,function(){e.hasLoadedChapterFrames&&e.trigger(l.Events.ChapterFramesLoaded)}),t.once(l.Events.SuperFramesLoaded,function(){e.hasLoadedSuperFrames&&e.trigger(l.Events.SuperFramesLoaded)}),t.startLoading()});return new Promise(function(t,n){e.once(l.Events.ChapterFramesLoaded,function(){return 0===e.colorFlow.chapterFrames.length?void e.once(l.Events.SuperFramesLoaded,function(){return t()}):void t()})}).then(function(){e.colorFlow._currentFrame=e.maskFlow._currentFrame=-1,e.progress=0})}},{key:"destroy",value:function(){this.igloo&&(this.igloo.defaultFramebuffer=null,this.igloo.canvas=null,this.igloo.gl=null,this.igloo=null),this.program&&(this.program.gl=null,this.program.program=null,this.program.vars=null,this.program.uniforms=null,this.program=null),this.glCanvas.destroy(),this.glCanvas=null,[this.colorFlow,this.maskFlow].forEach(function(e){e.destroy()}),this.colorFlow=null,this.maskFlow=null}},{key:"progress",get:function(){return this._progress},set:function(e){if(this.glCanvas&&this.hasLoadedChapterFrames){var t=(this.colorFlow.manifest.frames.length-1)*e;this.hasFullyLoaded||(t=this.hasLoadedSuperFrames?this.colorFlow.getNearestSuperFrameIndex(t):this.colorFlow.getNearestChapterFrameIndex(t)),this._progress=e,this.glCanvas.drawToFBO(0),this.colorFlow.goToFrame(t,"colorFlow"),this.glCanvas.drawToFBO(1),this.maskFlow.goToFrame(t,"maskFlow"),this.glCanvas.composite()}}},{key:"canvas",get:function(){return this.glCanvas.canvas}}]),t}(p);t.exports=d},{18:18,19:19,21:21,23:23,24:24,25:25,30:30,5:5,8:8,9:9}],8:[function(e,t,n){"use strict";var r=e(25),i=r(e(32)),a=r(e(19)),o=r(e(21)),s=r(e(30)),c=r(e(18)),u=r(e(23)),h=r(e(22)),l=r(e(24)),f=e(9),p=e(36),d=e(5),m=d.EventEmitterMicro,y=e(87),v=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"jpg";return(0,a["default"])(this,t),r=(0,s["default"])(this,(0,u["default"])(t).call(this)),r.destroyed=!1,n instanceof HTMLCanvasElement&&(n=new f(n)),r.glCanvas=n,r.canvasElement=n.canvas,r.fps=i,r.filetype=o,r._createManifestPath(e),r.hasLoadedChapterFrames=!1,r.hasLoadedSuperFrames=!1,r.hasFullyLoaded=!1,r.isManifestReady=!1,r.cachedImages={},r._progress=0,r._currentFrame=0,Object.defineProperty((0,c["default"])(r),"progress",{get:function(){return this._progress},set:function(e){if(this._progress=e,this.hasLoadedChapterFrames){var t=(this.manifest.frames.length-1)*e;t=this.getNearestLoadedFrameIndex(Math.round(t)),this.glCanvas.drawToFBO(0),this.goToFrame(t),this.glCanvas.composite()}}}),r}return(0,l["default"])(t,e),(0,o["default"])(t,[{key:"getNearestLoadedFrameIndex",value:function(e){return this.hasFullyLoaded?e:this.hasLoadedChapterFrames&&0!==this.chapterFrames.length?this.hasLoadedChapterFrames?this.getNearestChapterFrameIndex(e):this.hasLoadedSuperFrames?this.getNearestSuperFrameIndex(e):void 0:0}},{key:"getNearestChapterFrameIndex",value:function(e){for(var t=0,n=0;n<this.chapterFrames.length&&!(this.chapterFrames[n]>e);n++)t=this.chapterFrames[n];return t}},{key:"getNearestSuperFrameIndex",value:function(e){for(var t=0,n=0;n<this.superFrames.length&&!(this.superFrames[n]>e);n++)t=this.superFrames[n];return t}},{key:"_loadImage",value:function(e){var t=this;return new Promise(function(n,r){var i=new Image;i.onload=function(){t.destroyed||(t.cachedImages[e.match(/[^\/]+$/)[0]]=i,n(i))},i.onerror=function(e){r(e)},i.src=e})}},{key:"_loadJSON",value:function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4!==r.readyState||200!==r.status&&0!==r.status)4===r.readyState&&n("Invalid HTTP state of ".concat(r.status));else try{t({data:JSON.parse(r.responseText)})}catch(e){n(e)}},r.open("GET",e),r.send()})}},{key:"_loadImageForFrame",value:function(e){var t=this.manifest.frames[e];if(t.image)return t.image;var n,r=function(e){for(var t=""+e;t.length<3;)t="0"+t;return t};if("diff"===t.type)n="".concat(this.baseUrl,"/").concat(this.baseFilename,"_").concat(r(t.startImageIndex+1),".").concat(this.filetype);else{if("chapter"!==t.type&&"keyframe"!==t.type)throw"Unknown frame type.";n="".concat(this.baseUrl,"/").concat(this.baseFilename,"_key_").concat(r(e-1),".").concat(this.filetype)}return this._loadImage(n).then(function(e){return t.image=e,t.image})}},{key:"_createManifestPath",value:function(e){this.manifestUrl=e;var t=e.match(/^(.+)\/([^\/]+)_manifest.json$/);p(t,"Invalid manifest URL."),this.baseUrl=t[1],this.baseFilename=t[2]}},{key:"startLoading",value:function(){var e=this;if(!this.manifest){var n="".concat(this.baseUrl,"/").concat(this.baseFilename,"_startframe.").concat(this.filetype),r=this._loadJSON(this.manifestUrl),a=this._loadImage(n);return Promise.all([r,a]).then(function(n){if(!e.destroyed){var r=(0,i["default"])(n,2),a=r[0],o=r[1];if(e.glCanvas.resizeCanvas(o.width,o.height),e._bitsetForNAND=new y(o.width/8),e._bitsetForNAND.setRange(0,o.width/8-1),a.data.frames.splice(0,0,{type:"keyframe",x:0,y:0,width:o.width,height:o.height,filename:"".concat(e.baseFilename,"_startframe.").concat(e.filetype)}),e._processManifest(a.data),e.glCanvas.modifyPoolSize(e.manifest.frameCount),e.isManifestReady=!0,e.trigger(t.Events.ManifestReady),e.manifest.frames[0].image=o,e.glCanvas.drawToFBO(0),e._applyFrame(0),e.glCanvas.composite(),e.chapterFrames=e.manifest.frames.filter(function(e){return"chapter"===e.type}).map(function(t){return e.manifest.frames.indexOf(t)}),e.chapterFrames.length>0){var s=[];return e.chapterFrames.forEach(function(t){s.push(e._loadImageForFrame(t))}),Promise.all(s)}}}).then(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.destroyed){e.chapters=n,e.hasLoadedChapterFrames=!0,e.trigger(t.Events.ChapterFramesLoaded);var r=[];e.superFrames=[];for(var i=4;i<e.manifest.frames.length;i+=4)r.push(e._loadImageForFrame(i)),e.superFrames.push(i);return Promise.all(r)}}).then(function(){if(!e.destroyed){e.hasLoadedSuperFrames=!0,e.trigger(t.Events.SuperFramesLoaded);for(var n=[],r=1;r<e.manifest.frames.length;r++)r%4!=0&&n.push(e._loadImageForFrame(r));return Promise.all(n).then(function(){return e.destroyed?Promise.reject("destroyed"):(e.hasFullyLoaded=!0,void e.trigger(t.Events.Loaded))})}})}}},{key:"goToFrame",value:function(e){if(p(e>=0&&e<this.manifest.frames.length,"Frame out of range."),e===this._currentFrame)return e;for(var n=[],r=e>this._currentFrame?1:-1,i=!1,a=null,o=this._currentFrame+r;e>this._currentFrame&&o<=e||e<this._currentFrame&&o>=e;o+=r){if(i)if(o%4===0)i=!1;else{if(!(this.manifest.frames[o].image&&["chapter","keyframe"].indexOf(this.manifest.frames[o].type)>=0))continue;i=!1}if(this.manifest.frames[o].image)["chapter","keyframe"].indexOf(this.manifest.frames[o].type)>=0?(n=[o],a=o):(o%4===0&&o<this.manifest.frames.length-4&&!function(){var e=o-4*r,t=Math.min(e,o),i=Math.max(e,o);n=n.filter(function(e){return e<=t||e>=i}),a&&n.indexOf(e)<0&&n.push(a),a=null}(),n.push(o));else{for(;n.length>0&&n[n.length-1]%4>0;)n.pop();i=!0}}for(var s=n.length;n.length>0;){var c=n.shift();this._applyFrame(c,n),this._currentFrame=c}s>0&&this.trigger(t.Events.TimeUpdate,this)}},{key:"_processManifest",value:function(e){var t=this;p(e&&5===e.version,"Invalid manifest. Manifest must be version 5. Please select the Optimize for Anim checkbox in the Flow app."),e.frames=e.frames.map(function(e){return t._parseFrame(e)}),this.manifest=e}},{key:"_valueForCharAt",value:function(e,t){var n=e.charCodeAt(t);return n>64&&n<91?n-65:n>96&&n<123?n-71:n>47&&n<58?n+4:43===n?62:47===n?63:void 0}},{key:"_createNumberFromBase64Range",value:function(e,t,n){for(var r,i=0;n--;)r=this._valueForCharAt(e,t++),i+=r<<6*n;return i}},{key:"_parseFrame",value:function(e){var t=this.canvasElement.width/8,n=this.canvasElement.height/8,r=e.value,i=e.startImageIndex,a=e.startBlockIndex;if("keyframe"===e.type||"chapter"===e.type)return{type:e.type,width:e.width,height:e.height,x:e.x,y:e.y};for(var o=[],s=[],c=a,u=0;u<n;u++)o.push(new y(t)),s.push({});for(var h=0;h<r.length;h+=5)for(var l=this._createNumberFromBase64Range(r,h,3),f=this._createNumberFromBase64Range(r,h+3,2),p=l;p<l+f;p++){var d=Math.floor(p/t),m=p%t;o[d].set(m);try{s[d][""+m]=c}catch(v){}c++}return{type:"diff",startImageIndex:i,rowMasks:o,rowDiffLocations:s}}},{key:"_applyFrame",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{["chapter","keyframe"].indexOf(this.manifest.frames[e].type)>=0?this._applyKeyframe(e):this._applyDiffFrame(e,t)}catch(n){console.log(n)}}},{key:"_applyKeyframe",value:function(e){p(e>=0&&e<this.manifest.frames.length,"Frame out of range."),p(["chapter","keyframe"].indexOf(this.manifest.frames[e].type)>=0,"Invalid attempt to play a diff as a keyframe."),p(this.manifest.frames[e].image,"Attempted to play an unloaded frame."),this.glCanvas.drawImage(this.manifest.frames[e].image,0,0)}},{key:"_applyDiffFrame",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];p(e>=0&&e<this.manifest.frames.length,"Frame out of range."),p("diff"===this.manifest.frames[e].type,"Invalid attempt to play a keyframe as a diff.");for(var r=this.canvasElement.width/8,i=this.manifest.frames[e].image,a=i.width/8,o=function(o){var s=t.manifest.frames[e].rowMasks[o],c=t.manifest.frames[e].rowDiffLocations[o],u=t._rangesFromRowMask(s,c,o,r,a);if(u.length<1)return"continue";for(var h=n.map(function(e){return t.manifest.frames[e].rowMasks[o]}),l=s;h.length>0;){var f=h.pop();l=l.and(f.xor(t._bitsetForNAND))}var p=t._rangesFromRowMask(l,c,o,r,a);p.length>u.length&&(p=u);for(var d=0;d<p.length;d++)t._applyDiffRange(p[d],i,a,r)},s=0;s<this.manifest.frames[e].rowMasks.length;s++){o(s)}}},{key:"_rangesFromRowMask",value:function(e,t,n,r,i){var a=[],o=null;if(e.isEqual(new y(r)))return[];for(var s=r,c=0;c<s;c++)if(e.get(c)){for(o={location:n*r+c,length:1,block:t[c]},"undefined"==typeof o.block;++c<s&&e.get(c);){var u=(o.block+o.length)%i;0===u?(a.push(o),o={location:o.location+o.length,length:1,block:t[c]}):o.length++}a.push(o)}return a}},{key:"_applyDiffRange",value:function(e,t,n,r){var i=e.block,a=i%n*8,o=8*Math.floor(i/n),s=8*e.length,c=e.location%r*8,u=8*Math.floor(e.location/r);this.glCanvas.drawImage(t,a,o,s,8,c,u,s,8)}},{key:"destroy",value:function(){this.destroyed||(this.glCanvas.gl&&this.glCanvas.destroy(),this.glCanvas=null,this.manifest=null,this.cachedImages=null,this.chapterFrames=null,this.superFrames=null,this.chapters=null,this.destroyed=!0,(0,h["default"])((0,u["default"])(t.prototype),"destroy",this).call(this))}}]),t}(m);v.Events={Loaded:"loaded",ChapterFramesLoaded:"chapterframes-loaded",SuperFramesLoaded:"superframes-loaded",ManifestReady:"manifest-ready",TimeUpdate:"timeupdate"},t.exports=v},{18:18,19:19,21:21,22:22,23:23,24:24,25:25,30:30,32:32,36:36,5:5,87:87,9:9}],9:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a=r(e(21)),o=e(11),s=e(10),c=e(97),u={project:e(15),image:e(14),blend:{vert:e(13),frag:e(12)}},h=c.create(),l=c.create(),f=c.create();t.exports=function(){function e(t){var n=this;(0,i["default"])(this,e),this.canvas=t,this.igloo=new s(this.canvas,{premultipliedAlpha:!0,antialias:!1,depth:!1,desynchronized:!0,powerPreference:"high-performance"}),this.gl=this.igloo.gl,this.program=this.igloo.program(u.project,u.image),this.program.uniforms={matrixLocation:this.gl.getUniformLocation(this.program.program,"u_matrix"),textureMatrixLocation:this.gl.getUniformLocation(this.program.program,"u_textureMatrix"),textureLocation:this.gl.getUniformLocation(this.program.program,"u_texture")},this.blendProgram=this.igloo.program(u.blend.vert,u.blend.frag),this.blendProgram.uniforms={matrixLocation:this.gl.getUniformLocation(this.blendProgram.program,"u_matrix"),imageLocation:this.gl.getUniformLocation(this.blendProgram.program,"imageTexture"),maskLocation:this.gl.getUniformLocation(this.blendProgram.program,"maskTexture")},this.buffers={positionBuffer:this.igloo.array(new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1])),texcoordBuffer:this.igloo.array(new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]))},this.framebuffers=[this.igloo.framebuffer(),this.igloo.framebuffer()],this.framebuffers[0].texture=this.igloo.texture(null,this.igloo.gl.RGBA,this.igloo.gl.CLAMP_TO_EDGE,this.igloo.gl.NEAREST),this.framebuffers[1].texture=this.igloo.texture(null,this.igloo.gl.RGBA,this.igloo.gl.CLAMP_TO_EDGE,this.igloo.gl.NEAREST),this.texturePool=new o({allocator:function(){return n.igloo.texture().blank(1,1)}})}return(0,a["default"])(e,[{key:"modifyPoolSize",value:function(e){this.texturePool.allocate(e)}},{key:"drawToFBO",value:function(e){this.framebuffers[e].attach(this.framebuffers[e].texture)}},{key:"drawImage",value:function(e,t,n,r,i,a,o,s,u){void 0===r&&void 0===i?(a=t,o=n,t=0,n=0,s=r=e.width,u=i=e.height):void 0===a&&void 0===o&&(a=t,o=n,s=r,u=i,t=0,n=0,r=e.width,i=e.height);var p=this.igloo.gl,d=this.texturePool.get(function(t){return t.image===e});d||(d=this.texturePool.pop(),d.set(e),d.image=e),d.bind(0),this.program.use().uniformi("u_texture",0).attrib("a_position",this.buffers.positionBuffer,2).attrib("a_texcoord",this.buffers.texcoordBuffer,2),c.ortho(h,0,p.canvas.width,p.canvas.height,0,-1,1),c.identity(f),c.translate(f,f,[a,o,0]),c.scale(f,f,[s,u,1]),c.multiply(f,h,f),p.uniformMatrix4fv(this.program.uniforms.matrixLocation,!1,f),c.identity(l),c.translate(l,l,[t/e.width,n/e.height,0]),c.scale(l,l,[r/e.width,i/e.height,1]),p.uniformMatrix4fv(this.program.uniforms.textureMatrixLocation,!1,l),p.drawArrays(p.TRIANGLES,0,6),this.texturePool.push(d)}},{key:"composite",value:function(){var e=this.igloo.gl;this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.framebuffers[0].texture.bind(1),this.framebuffers[1].texture.bind(2),this.blendProgram.use().uniformi("imageTexture",1).uniformi("maskTexture",2).attrib("a_position",this.buffers.positionBuffer,2).attrib("a_texcoord",this.buffers.texcoordBuffer,2),c.ortho(h,0,e.canvas.width,0,e.canvas.height,-1,1),c.scale(h,h,[e.canvas.width,e.canvas.height,1]),e.uniformMatrix4fv(this.blendProgram.uniforms.matrixLocation,!1,h),e.drawArrays(e.TRIANGLES,0,6)}},{key:"resizeCanvas",value:function(e,t){var n=this;this.canvas.width=e,this.canvas.height=t,[0,1].forEach(function(e){n.framebuffers[e].texture.blank(n.canvas.width,n.canvas.height),n.framebuffers[e].texture.width=n.canvas.width,n.framebuffers[e].texture.height=n.canvas.height}),this.gl.viewport(0,0,e,t),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}},{key:"destroy",value:function(){this.texturePool.destroy(),this.texturePool=null,this.canvas=null,this.gl=null,this.blendProgram=null,this.buffers=null,this.framebuffers=null}}]),e}()},{10:10,11:11,12:12,13:13,14:14,15:15,19:19,21:21,25:25,97:97}],10:[function(e,t,n){"use strict";function r(e,t){var n;e instanceof HTMLCanvasElement?(n=e,e=r.getContext(e,t)):n=e.canvas,this.gl=e,this.canvas=n,this.defaultFramebuffer=new r.Framebuffer(e,null)}r.QUAD2=new Float32Array([-1,-1,1,-1,-1,1,1,1]),r.fetch=function(e,t){var n=new XMLHttpRequest;return n.open("GET",e,Boolean(t)),null!=t&&(n.onload=function(){t(n.responseText)}),n.send(),n.responseText},r.getContext=function(e,t,n){var r;try{r=e.getContext("webgl",t||{})||e.getContext("experimental-webgl",t||{})}catch(i){r=null}if(null!=r||n)return r;throw new Error("Could not create WebGL context.")},r.looksLikeURL=function(e){return null==/\s/.exec(e)},r.isArray=function(e){var t=Object.prototype.toString.apply(e,[]),n=/ (Float(32|64)|Int(16|32|8)|Uint(16|32|8(Clamped)?))?Array]$/;return null!=n.exec(t)},r.prototype.program=function(e,t,n){return r.looksLikeURL(e)&&(e=r.fetch(e)),r.looksLikeURL(t)&&(t=r.fetch(t)),null!=n&&(e=n(e),t=n(t)),new r.Program(this.gl,e,t)},r.prototype.array=function(e,t){var n=this.gl,i=new r.Buffer(n,n.ARRAY_BUFFER);return null!=e&&i.update(e,null==t?n.STATIC_DRAW:t),i},r.prototype.elements=function(e,t){var n=this.gl,i=new r.Buffer(n,n.ELEMENT_ARRAY_BUFFER);return null!=e&&i.update(e,null==t?n.STATIC_DRAW:t),i},r.prototype.texture=function(e,t,n,i,a){var o=new r.Texture(this.gl,t,n,i,a);return null!=e&&o.set(e),o},r.prototype.framebuffer=function(e){var t=new r.Framebuffer(this.gl);return null!=e&&t.attach(e),t},r.Program=function(e,t,n){this.gl=e,this.debug=!1;var r=this.program=e.createProgram();if(e.attachShader(r,this.makeShader(e.VERTEX_SHADER,t)),e.attachShader(r,this.makeShader(e.FRAGMENT_SHADER,n)),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw new Error(e.getProgramInfoLog(r));this.vars={}},r.Program.prototype.makeShader=function(e,t){var n=this.gl,r=n.createShader(e);if(n.shaderSource(r,t),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS))return r;throw new Error(n.getShaderInfoLog(r))},r.Program.prototype.use=function(){return this.gl.useProgram(this.program),this},r.Program.prototype.uniform=function(e,t,n){if(null==t)this.vars[e]=this.gl.getUniformLocation(this.program,e);else{null==this.vars[e]&&this.uniform(e);var i=this.vars[e];if(r.isArray(t)){var a="uniform"+t.length+(n?"i":"f")+"v";this.gl[a](i,t)}else{if("number"!=typeof t&&"boolean"!=typeof t)throw new Error("Invalid uniform value: "+t);n?this.gl.uniform1i(i,t):this.gl.uniform1f(i,t)}}return this},r.Program.prototype.matrix=function(e,t,n){null==this.vars[e]&&this.uniform(e);var r="uniformMatrix"+Math.sqrt(t.length)+"fv";return this.gl[r](this.vars[e],Boolean(n),t),this},r.Program.prototype.uniformi=function(e,t){return this.uniform(e,t,!0)},r.Program.prototype.attrib=function(e,t,n,r){var i=this.gl;return null==t?this.vars[e]=i.getAttribLocation(this.program,e):(null==this.vars[e]&&this.attrib(e),t.bind(),i.enableVertexAttribArray(this.vars[e]),i.vertexAttribPointer(this.vars[e],n,i.FLOAT,!1,null==r?0:r,0)),this},r.Program.prototype.draw=function(e,t,n){var r=this.gl;if(null==n?r.drawArrays(e,0,t):r.drawElements(e,t,n,0),this.debug&&r.getError()!==r.NO_ERROR)throw new Error("WebGL rendering error");return this},r.Program.prototype.disable=function(){for(var e in this.vars){var t=this.vars[e];this.vars.hasOwnProperty(e)&&"number"==typeof t&&this.gl.disableVertexAttribArray(t)}return this},r.Buffer=function(e,t){this.gl=e,this.buffer=e.createBuffer(),this.target=null==t?e.ARRAY_BUFFER:t,this.size=-1},r.Buffer.prototype.bind=function(){return this.gl.bindBuffer(this.target,this.buffer),this},r.Buffer.prototype.update=function(e,t){var n=this.gl;return e instanceof Array&&(e=new Float32Array(e)),t=null==t?n.DYNAMIC_DRAW:t,this.bind(),this.size!==e.byteLength?(n.bufferData(this.target,e,t),this.size=e.byteLength):n.bufferSubData(this.target,0,e),this},r.Texture=function(e,t,n,r,i){this.gl=e;var a=this.texture=e.createTexture();e.bindTexture(e.TEXTURE_2D,a),n=null==n?e.CLAMP_TO_EDGE:n,r=null==r?e.LINEAR:r,e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),this.format=null==t?e.RGBA:t,this.type=null==i?e.UNSIGNED_BYTE:i},r.Texture.prototype.bind=function(e){var t=this.gl;return null!=e&&t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.texture),this},r.Texture.prototype.blank=function(e,t){var n=this.gl;return this.bind(),n.texImage2D(n.TEXTURE_2D,0,this.format,e,t,0,this.format,this.type,null),this},r.Texture.prototype.set=function(e,t,n){var r=this.gl;return this.bind(),e instanceof Array&&(e=this.type==r.FLOAT?new Float32Array(e):new Uint8Array(e)),null!=t||null!=n?r.texImage2D(r.TEXTURE_2D,0,this.format,t,n,0,this.format,this.type,e):r.texImage2D(r.TEXTURE_2D,0,this.format,this.format,this.type,e),this},r.Texture.prototype.subset=function(e,t,n,r,i){var a=this.gl;return this.bind(),e instanceof Array&&(e=this.type==a.FLOAT?new Float32Array(e):new Uint8Array(e)),null!=r||null!=i?a.texSubImage2D(a.TEXTURE_2D,0,t,n,r,i,this.format,this.type,e):a.texSubImage2D(a.TEXTURE_2D,0,t,n,this.format,this.type,e),this},r.Texture.prototype.copy=function(e,t,n,r){var i=this.gl;return i.copyTexImage2D(i.TEXTURE_2D,0,this.format,e,t,n,r,0),this},r.Framebuffer=function(e,t){this.gl=e,this.framebuffer=2==arguments.length?t:e.createFramebuffer(),this.renderbuffer=null},r.Framebuffer.prototype.bind=function(){return this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer),this},r.Framebuffer.prototype.unbind=function(){return this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this},r.Framebuffer.prototype.attach=function(e){var t=this.gl;return this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.texture,0),this},r.Framebuffer.prototype.attachDepth=function(e,t){var n=this.gl;return this.bind(),null==this.renderbuffer&&(this.renderbuffer=n.createRenderbuffer(),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e,t),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.renderbuffer)),this},t.exports=r},{}],11:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a=r(e(21));t.exports=function(){function e(t){(0,i["default"])(this,e),this._objects=[],this._all=[],this.size=t.size||0,this._allocator=t.allocator,this._deallocator=t.deallocator=function(){},t.size&&this.allocate(t.size)}return(0,a["default"])(e,[{key:"allocate",value:function(e){var t=this;e<this.size&&(this._all=this._all.slice(0,e),this._objects.forEach(function(e){return t._deallocator(e)}),this._objects=[],this.size=e),this.size=e;for(var n=this._all.length;n<this.size;n++){var r=this._allocator();this._all.push(r),this._objects.push(r)}}},{key:"push",value:function(e){this._deallocator(e),this._objects.unshift(e)}},{key:"pop",value:function(){if(0===this._objects.length)throw"Object Pool ran out of objects";return this._objects.pop()}},{key:"get",value:function(e){for(var t=0;t<this._objects.length;t++)if(e(this._objects[t])){var n=this._objects[t];return this._objects.splice(t,1),n}return null}},{key:"destroy",value:function(){this._objects=null,this._all=null,this._allocator=null,this._deallocator=null}}]),e}()},{19:19,21:21,25:25}],12:[function(e,t,n){"use strict";t.exports="precision mediump float;\n\nvarying vec2 v_texcoord;\n\nuniform sampler2D maskTexture;\nuniform sampler2D imageTexture;\n\nvoid main() {\n    vec4 mask = texture2D(maskTexture, v_texcoord);\n    vec4 image = texture2D(imageTexture, v_texcoord);\n    gl_FragColor = mix(image, vec4(0.0), mask.r);\n}"},{}],13:[function(e,t,n){"use strict";t.exports="attribute vec4 a_position;\nattribute vec2 a_texcoord;\n\nuniform mat4 u_matrix;\n\nvarying vec2 v_texcoord;\n\nvoid main() {\n    gl_Position = u_matrix * a_position;\n    v_texcoord = a_texcoord;\n}"},{}],14:[function(e,t,n){"use strict";t.exports="precision highp float;\n\nvarying vec2 v_texcoord;\nuniform sampler2D u_texture;\n\nvoid main() {\n    gl_FragColor = texture2D(u_texture, v_texcoord);\n}"},{}],15:[function(e,t,n){"use strict";t.exports="precision highp float;\n\nattribute vec4 a_position;\nattribute vec2 a_texcoord;\n\nuniform mat4 u_matrix;\nuniform mat4 u_textureMatrix;\n\nvarying vec2 v_texcoord;\n\nvoid main() {\n    gl_Position = u_matrix * a_position;\n    v_texcoord = (u_textureMatrix * vec4(a_texcoord, 0, 1)).xy;\n}"},{}],16:[function(e,t,n){function r(e){if(Array.isArray(e))return e}t.exports=r},{}],17:[function(e,t,n){function r(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}t.exports=r},{}],18:[function(e,t,n){function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.exports=r},{}],19:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.exports=r},{}],20:[function(e,t,n){function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function i(e,n,o){return r()?t.exports=i=Reflect.construct:t.exports=i=function(e,t,n){var r=[null];r.push.apply(r,t);var i=Function.bind.apply(e,r),o=new i;return n&&a(o,n.prototype),o},i.apply(null,arguments)}var a=e(31);t.exports=i},{31:31}],21:[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}t.exports=i},{}],22:[function(e,t,n){function r(e,n,a){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=r=Reflect.get:t.exports=r=function(e,t,n){var r=i(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}},r(e,n,a||e)}var i=e(33);t.exports=r},{33:33}],23:[function(e,t,n){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}t.exports=r},{}],24:[function(e,t,n){function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}var i=e(31);t.exports=r},{31:31}],25:[function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}t.exports=r},{}],26:[function(e,t,n){function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}t.exports=r},{}],27:[function(e,t,n){function r(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){i=!0,a=c}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw a}}return n}}t.exports=r},{}],28:[function(e,t,n){function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}t.exports=r},{}],29:[function(e,t,n){function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}t.exports=r},{}],30:[function(e,t,n){function r(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?a(e):t}var i=e(35),a=e(18);t.exports=r},{18:18,35:35}],31:[function(e,t,n){function r(e,n){return t.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,n)}t.exports=r},{}],32:[function(e,t,n){function r(e,t){return i(e)||a(e,t)||o()}var i=e(16),a=e(27),o=e(28);t.exports=r},{16:16,27:27,28:28}],33:[function(e,t,n){function r(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=i(e),null!==e););return e}var i=e(23);t.exports=r},{23:23}],34:[function(e,t,n){function r(e){return i(e)||a(e)||o()}var i=e(17),a=e(26),o=e(29);t.exports=r},{17:17,26:26,29:29}],35:[function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return"function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?t.exports=i=function(e){return r(e)}:t.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)},i(e)}t.exports=i},{}],36:[function(e,t,n){(function(n){"use strict";function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function i(e){return n.Buffer&&"function"==typeof n.Buffer.isBuffer?n.Buffer.isBuffer(e):!(null==e||!e._isBuffer);
}function a(e){return Object.prototype.toString.call(e)}function o(e){return!i(e)&&("function"==typeof n.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function s(e){if(w.isFunction(e)){if(x)return e.name;var t=e.toString(),n=t.match(T);return n&&n[1]}}function c(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function u(e){if(x||!w.isFunction(e))return w.inspect(e);var t=s(e),n=t?": "+t:"";return"[Function"+n+"]"}function h(e){return c(u(e.actual),128)+" "+e.operator+" "+c(u(e.expected),128)}function l(e,t,n,r,i){throw new O.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function f(e,t){e||l(e,!0,t,"==",O.ok)}function p(e,t,n,s){if(e===t)return!0;if(i(e)&&i(t))return 0===r(e,t);if(w.isDate(e)&&w.isDate(t))return e.getTime()===t.getTime();if(w.isRegExp(e)&&w.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===(0,_["default"])(e)||null!==t&&"object"===(0,_["default"])(t)){if(o(e)&&o(t)&&a(e)===a(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;s=s||{actual:[],expected:[]};var c=s.actual.indexOf(e);return c!==-1&&c===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),m(e,t,n,s))}return n?e===t:e==t}function d(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function m(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(w.isPrimitive(e)||w.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=d(e),a=d(t);if(i&&!a||!i&&a)return!1;if(i)return e=S.call(e),t=S.call(t),p(e,t,n);var o,s,c=A(e),u=A(t);if(c.length!==u.length)return!1;for(c.sort(),u.sort(),s=c.length-1;s>=0;s--)if(c[s]!==u[s])return!1;for(s=c.length-1;s>=0;s--)if(o=c[s],!p(e[o],t[o],n,r))return!1;return!0}function y(e,t,n){p(e,t,!0)&&l(e,t,n,"notDeepStrictEqual",y)}function v(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(n){}return!Error.isPrototypeOf(t)&&t.call({},e)===!0}function g(e){var t;try{e()}catch(n){t=n}return t}function b(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"https://www.apple.com.cn/v/ipad-pro/y/built/scripts/==typeof n&&(r=n,n=null),i=g(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&l(i,n,"Missing expected exception"+r);var a="string"==typeof r,o=!e&&w.isError(i),s=!e&&i&&!n;if((o&&a&&v(i,n)||s)&&l(i,n,"Got unwanted exception"+r),e&&i&&n&&!v(i,n)||!e&&i)throw i}var E=e(25),_=E(e(35)),w=e(40),k=Object.prototype.hasOwnProperty,S=Array.prototype.slice,x=function(){return"foo"===function(){}.name}(),O=t.exports=f,T=/\s*function\s+([^\(\s]*)\s*/;O.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=h(this),this.generatedMessage=!0);var t=e.stackStartFunction||l;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=s(t),a=r.indexOf("\n"+i);if(a>=0){var o=r.indexOf("\n",a+1);r=r.substring(o+1)}this.stack=r}}},w.inherits(O.AssertionError,Error),O.fail=l,O.ok=f,O.equal=function(e,t,n){e!=t&&l(e,t,n,"==",O.equal)},O.notEqual=function(e,t,n){e==t&&l(e,t,n,"!=",O.notEqual)},O.deepEqual=function(e,t,n){p(e,t,!1)||l(e,t,n,"deepEqual",O.deepEqual)},O.deepStrictEqual=function(e,t,n){p(e,t,!0)||l(e,t,n,"deepStrictEqual",O.deepStrictEqual)},O.notDeepEqual=function(e,t,n){p(e,t,!1)&&l(e,t,n,"notDeepEqual",O.notDeepEqual)},O.notDeepStrictEqual=y,O.strictEqual=function(e,t,n){e!==t&&l(e,t,n,"===",O.strictEqual)},O.notStrictEqual=function(e,t,n){e===t&&l(e,t,n,"!==",O.notStrictEqual)},O["throws"]=function(e,t,n){b(!0,e,t,n)},O.doesNotThrow=function(e,t,n){b(!1,e,t,n)},O.ifError=function(e){if(e)throw e};var A=Object.keys||function(e){var t=[];for(var n in e)k.call(e,n)&&t.push(n);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{25:25,35:35,40:40}],37:[function(e,t,n){"use strict";function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(l===setTimeout)return setTimeout(e,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){y&&d&&(y=!1,d.length?m=d.concat(m):v=-1,m.length&&c())}function c(){if(!y){var e=a(s);y=!0;for(var t=m.length;t;){for(d=m,m=[];++v<t;)d&&d[v].run();v=-1,t=m.length}d=null,y=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function h(){}var l,f,p=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(e){l=r}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var d,m=[],y=!1,v=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new u(e,t)),1!==m.length||y||a(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=h,p.addListener=h,p.once=h,p.off=h,p.removeListener=h,p.removeAllListeners=h,p.emit=h,p.prependListener=h,p.prependOnceListener=h,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],38:[function(e,t,n){"use strict";"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],39:[function(e,t,n){"use strict";var r=e(25),i=r(e(35));t.exports=function(e){return e&&"object"===(0,i["default"])(e)&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{25:25,35:35}],40:[function(e,t,n){(function(t,r){"use strict";function i(e,t){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(t)?r.showHidden=t:t&&n._extend(r,t),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),c(r,e,r.depth)}function a(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function o(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,t,r){if(e.customInspect&&t&&O(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return b(i)||(i=c(e,i,r)),i}var a=u(e,t);if(a)return a;var o=Object.keys(t),m=s(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),x(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return h(t);if(0===o.length){if(O(t)){var y=t.name?": "+t.name:"";return e.stylize("[Function"+y+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(S(t))return e.stylize(Date.prototype.toString.call(t),"date");if(x(t))return h(t)}var v="",g=!1,E=["{","}"];if(d(t)&&(g=!0,E=["[","]"https://www.apple.com.cn/v/ipad-pro/y/built/scripts/]),O(t)){var _=t.name?": "+t.name:"";v=" [Function"+_+"]"}if(w(t)&&(v=" "+RegExp.prototype.toString.call(t)),S(t)&&(v=" "+Date.prototype.toUTCString.call(t)),x(t)&&(v=" "+h(t)),0===o.length&&(!g||0==t.length))return E[0]+v+E[1];if(r<0)return w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var k;return k=g?l(e,t,r,m,o):o.map(function(n){return f(e,t,r,m,n,g)}),e.seen.pop(),p(k,v,E)}function u(e,t){if(_(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return g(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,i){for(var a=[],o=0,s=t.length;o<s;++o)C(t,String(o))?a.push(f(e,t,n,r,String(o),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(f(e,t,n,r,i,!0))}),a}function f(e,t,n,r,i,a){var o,s,u;if(u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),C(r,i)||(o="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=y(n)?c(e,u.value,null):c(e,u.value,n-1),s.indexOf("\n")>-1&&(s=a?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),_(o)){if(a&&i.match(/^\d+$/))return s;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function p(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function y(e){return null===e}function v(e){return null==e}function g(e){return"number"==typeof e}function b(e){return"string"==typeof e}function E(e){return"symbol"===(0,R["default"])(e)}function _(e){return void 0===e}function w(e){return k(e)&&"[object RegExp]"===A(e)}function k(e){return"object"===(0,R["default"])(e)&&null!==e}function S(e){return k(e)&&"[object Date]"===A(e)}function x(e){return k(e)&&("[object Error]"===A(e)||e instanceof Error)}function O(e){return"function"==typeof e}function T(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===(0,R["default"])(e)||"undefined"==typeof e}function A(e){return Object.prototype.toString.call(e)}function M(e){return e<10?"0"+e.toString(10):e.toString(10)}function P(){var e=new Date,t=[M(e.getHours()),M(e.getMinutes()),M(e.getSeconds())].join(":");return[e.getDate(),N[e.getMonth()],t].join(" ")}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var I=e(25),R=I(e(35)),F=/%[sdj%]/g;n.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,a=r.length,o=String(e).replace(F,function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),s=r[n];n<a;s=r[++n])o+=y(s)||!k(s)?" "+s:" "+i(s);return o},n.deprecate=function(e,i){function a(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}if(_(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var o=!1;return a};var L,D={};n.debuglog=function(e){if(_(L)&&(L=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!D[e])if(new RegExp("\\b"+e+"\\b","i").test(L)){var r=t.pid;D[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else D[e]=function(){};return D[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=m,n.isNull=y,n.isNullOrUndefined=v,n.isNumber=g,n.isString=b,n.isSymbol=E,n.isUndefined=_,n.isRegExp=w,n.isObject=k,n.isDate=S,n.isError=x,n.isFunction=O,n.isPrimitive=T,n.isBuffer=e(39);var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",P(),n.format.apply(n,arguments))},n.inherits=e(38),n._extend=function(e,t){if(!t||!k(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e(37),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{25:25,35:35,37:37,38:38,39:39}],41:[function(e,t,n){"use strict";t.exports={majorVersionNumber:"3.x"}},{}],42:[function(e,t,n){"use strict";function r(e){e=e||{},a.call(this),this.id=s.getNewID(),this.executor=e.executor||o,this._reset(),this._willRun=!1,this._didDestroy=!1}var i,a=e(5).EventEmitterMicro,o=e(51),s=e(50);i=r.prototype=Object.create(a.prototype),i.run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},i.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},i.destroy=function(){var e=this.willRun();return this.cancel(),this.executor=null,a.prototype.destroy.call(this),this._didDestroy=!0,e},i.willRun=function(){return this._willRun},i.isRunning=function(){return this._isRunning},i._subscribe=function(){return this.executor.subscribe(this)},i._unsubscribe=function(){return this.executor.unsubscribe(this)},i._onAnimationFrameStart=function(e){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",e))},i._onAnimationFrameEnd=function(e){this._willRun||(this.trigger("stop",e),this._reset())},i._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},t.exports=r},{5:5,50:50,51:51}],43:[function(e,t,n){"use strict";function r(e){e=e||{},this._reset(),this.updatePhases(),this.eventEmitter=new a,this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}var i,a=e(6);i=r.prototype,i.frameRequestedPhase="requested",i.startPhase="start",i.runPhases=["update","external","draw"],i.endPhase="end",i.disabledPhase="disabled",i.beforePhaseEventPrefix="before:",i.afterPhaseEventPrefix="after:",i.subscribe=function(e,t){return this._totalSubscribeCount++,this._nextFrameSubscribers[e.id]||(t?this._nextFrameSubscribersOrder.unshift(e.id):this._nextFrameSubscribersOrder.push(e.id),this._nextFrameSubscribers[e.id]=e,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},i.subscribeImmediate=function(e,t){return this._totalSubscribeCount++,this._subscribers[e.id]||(t?this._subscribersOrder.splice(this._currentSubscriberIndex+1,0,e.id):this._subscribersOrder.unshift(e.id),this._subscribers[e.id]=e,this._subscriberArrayLength++,this._subscriberCount++),this._totalSubscribeCount},i.unsubscribe=function(e){return!!this._nextFrameSubscribers[e.id]&&(this._nextFrameSubscribers[e.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},i.getSubscribeID=function(){return this._totalSubscribeCount+=1},i.destroy=function(){var e=this._cancel();return this.eventEmitter.destroy(),this.eventEmitter=null,this.phases=null,this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,e},i.useExternalAnimationFrame=function(e){if("boolean"==typeof e){var t=this._isUsingExternalAnimationFrame;return e&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||e||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=e,e?this._boundOnExternalAnimationFrame:t||!1}},i.updatePhases=function(){this.phases||(this.phases=[]),this.phases.length=0,this.phases.push(this.frameRequestedPhase),this.phases.push(this.startPhase),Array.prototype.push.apply(this.phases,this.runPhases),this.phases.push(this.endPhase),this._runPhasesLength=this.runPhases.length,this._phasesLength=this.phases.length},i._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this.phase===this.disabledPhase&&(this.phaseIndex=0,this.phase=this.phases[this.phaseIndex]),!0},i._cancel=function(){var e=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,e=!0),this._isRunning||this._reset(),e},i._onAnimationFrame=function(e){for(this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this.phaseIndex=0,this.phase=this.phases[this.phaseIndex],this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=e-this.lastFrameTime,this.lastFrameTime=e,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=e,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameStart(this._rafData);for(this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._runPhaseIndex=0;this._runPhaseIndex<this._runPhasesLength;this._runPhaseIndex++){for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]].trigger(this.phase,this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase)}for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy===!1&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameEnd(this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._willRun?(this.phaseIndex=0,this.phaseIndex=this.phases[this.phaseIndex]):this._reset()},i._onExternalAnimationFrame=function(e){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(e)},i._reset=function(){this._rafData||(this._rafData={}),this._rafData.time=0,this._rafData.delta=0,this._rafData.fps=0,this._rafData.naturalFps=0,this._rafData.timeNow=0,this._subscribers={},this._subscribersOrder=[],this._currentSubscriberIndex=-1,this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0,this._runPhaseIndex=-1,this.phaseIndex=-1,this.phase=this.disabledPhase},t.exports=r},{6:6}],44:[function(e,t,n){"use strict";var r=e(46),i=function(e){this.phase=e,this.rafEmitter=new r,this._cachePhaseIndex(),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._onBeforeRAFExecutorStart=this._onBeforeRAFExecutorStart.bind(this),this._onBeforeRAFExecutorPhase=this._onBeforeRAFExecutorPhase.bind(this),this._onAfterRAFExecutorPhase=this._onAfterRAFExecutorPhase.bind(this),this.rafEmitter.on(this.phase,this._onRAFExecuted.bind(this)),this.rafEmitter.executor.eventEmitter.on("before:start",this._onBeforeRAFExecutorStart),this.rafEmitter.executor.eventEmitter.on("before:"+this.phase,this._onBeforeRAFExecutorPhase),this.rafEmitter.executor.eventEmitter.on("after:"+this.phase,this._onAfterRAFExecutorPhase),this._frameCallbacks=[],this._currentFrameCallbacks=[],this._nextFrameCallbacks=[],this._phaseActive=!1,this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._currentFrameCallbacksLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},a=i.prototype;a.requestAnimationFrame=function(e,t){return t===!0&&this.rafEmitter.executor.phaseIndex>0&&this.rafEmitter.executor.phaseIndex<=this.phaseIndex?this._phaseActive?(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!0),this._frameCallbacks.push(this._currentFrameID,e),this._frameCallbackLength+=2):(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!1),this._currentFrameCallbacks.push(this._currentFrameID,e),this._currentFrameCallbacksLength+=2):(this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,e),this._nextFrameCallbacksLength+=2),this._currentFrameID},a.cancelAnimationFrame=function(e){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(e),this._cancelFrameIdx>-1?this._cancelNextAnimationFrame():(this._cancelFrameIdx=this._currentFrameCallbacks.indexOf(e),this._cancelFrameIdx>-1?this._cancelCurrentAnimationFrame():(this._cancelFrameIdx=this._frameCallbacks.indexOf(e),this._cancelFrameIdx>-1&&this._cancelRunningAnimationFrame()))},a._onRAFExecuted=function(e){for(this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](e.time,e);this._frameCallbacks.length=0,this._frameCallbackLength=0},a._onBeforeRAFExecutorStart=function(){Array.prototype.push.apply(this._currentFrameCallbacks,this._nextFrameCallbacks.splice(0,this._nextFrameCallbacksLength)),this._currentFrameCallbacksLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks.length=0,this._nextFrameCallbacksLength=0},a._onBeforeRAFExecutorPhase=function(){this._phaseActive=!0,Array.prototype.push.apply(this._frameCallbacks,this._currentFrameCallbacks.splice(0,this._currentFrameCallbacksLength)),this._frameCallbackLength=this._currentFrameCallbacksLength,this._currentFrameCallbacks.length=0,this._currentFrameCallbacksLength=0},a._onAfterRAFExecutorPhase=function(){this._phaseActive=!1},a._cachePhaseIndex=function(){this.phaseIndex=this.rafEmitter.executor.phases.indexOf(this.phase)},a._cancelRunningAnimationFrame=function(){this._frameCallbacks.splice(this._cancelFrameIdx,2),this._frameCallbackLength-=2},a._cancelCurrentAnimationFrame=function(){this._currentFrameCallbacks.splice(this._cancelFrameIdx,2),this._currentFrameCallbacksLength-=2},a._cancelNextAnimationFrame=function(){this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel()},t.exports=i},{46:46}],45:[function(e,t,n){"use strict";var r=e(44),i=function(){this.events={}},a=i.prototype;a.requestAnimationFrame=function(e){return this.events[e]||(this.events[e]=new r(e)),this.events[e].requestAnimationFrame},a.cancelAnimationFrame=function(e){return this.events[e]||(this.events[e]=new r(e)),this.events[e].cancelAnimationFrame},t.exports=new i},{44:44}],46:[function(e,t,n){"use strict";var r=e(42),i=function(e){r.call(this,e)},a=i.prototype=Object.create(r.prototype);a._subscribe=function(){return this.executor.subscribe(this,!0)},t.exports=i},{42:42}],47:[function(e,t,n){"use strict";var r=e(45);t.exports=r.cancelAnimationFrame("update")},{45:45}],48:[function(e,t,n){"use strict";var r=e(45);t.exports=r.requestAnimationFrame("draw")},{45:45}],49:[function(e,t,n){"use strict";var r=e(45);t.exports=r.requestAnimationFrame("external")},{45:45}],50:[function(e,t,n){"use strict";var r=e(53).SharedInstance,i=e(41).majorVersionNumber,a=function(){this._currentID=0};a.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},t.exports=r.share("@marcom/ac-raf-emitter/sharedRAFEmitterIDGeneratorInstance",i,a)},{41:41,53:53}],51:[function(e,t,n){"use strict";var r=e(53).SharedInstance,i=e(41).majorVersionNumber,a=e(43);t.exports=r.share("@marcom/ac-raf-emitter/sharedRAFExecutorInstance",i,a)},{41:41,43:43,53:53}],52:[function(e,t,n){"use strict";var r=e(45);t.exports=r.requestAnimationFrame("update")},{45:45}],53:[function(e,t,n){"use strict";t.exports={SharedInstance:e(54)}},{54:54}],54:[function(e,t,n){"use strict";var r=e(25),i=r(e(35)),a=window,o="AC",s="SharedInstance",c=a[o],u=function(){var e={};return{get:function(t,n){var r=null;return e[t]&&e[t][n]&&(r=e[t][n]),r},set:function(t,n,r){return e[t]||(e[t]={}),"function"==typeof r?e[t][n]=new r:e[t][n]=r,e[t][n]},share:function(e,t,n){var r=this.get(e,t);return r||(r=this.set(e,t,n)),r},remove:function(t,n){var r=(0,i["default"])(n);if("string"===r||"number"===r){if(!e[t]||!e[t][n])return;return void(e[t][n]=null)}e[t]&&(e[t]=null)}}}();c||(c=a[o]={}),c[s]||(c[s]=u),t.exports=c[s]},{25:25,35:35}],55:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a=r(e(21)),o=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i["default"])(this,e),this.options=n,"loading"===document.readyState?document.addEventListener("readystatechange",function(e){"interactive"===document.readyState&&t._init()}):this._init()}return(0,a["default"])(e,[{key:"_init",value:function(){return this._images=Array.from(document.querySelectorAll("*[".concat(e.DATA_ATTRIBUTE,"]"))),this.AnimSystem=this._findAnim(),null===this.AnimSystem?null:void this._addKeyframesToImages()}},{key:"_defineKeyframeOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=t.getAttribute(e.DATA_DOWNLOAD_AREA_KEYFRAME)||"{}";return Object.assign({},{start:"t - 200vh",end:"b + 100vh",event:"AnimLazyImage"},JSON.parse(n))}},{key:"_addKeyframesToImages",value:function(){var e=this;this._scrollGroup=this.AnimSystem.getGroupForTarget(document.body),this._images.forEach(function(t){e.AnimSystem.getGroupForTarget(t)&&(e._scrollGroup=e.AnimSystem.getGroupForTarget(t));var n=e._defineKeyframeOptions(t),r=e._scrollGroup.addKeyframe(t,n);r.controller.once("AnimLazyImage:enter",function(){e._imageIsInLoadRange(t)})})}},{key:"_cleanUpImageAttributes",value:function(t){var n=!1;try{n=this._scrollGroup.getControllerForTarget(t).getNearestKeyframeForAttribute("AnimLazyImage").isCurrentlyInRange}catch(r){n=!1}n||t.setAttribute(e.DATA_ATTRIBUTE,"")}},{key:"_downloadingImageAttributes",value:function(t){t.removeAttribute(e.DATA_ATTRIBUTE)}},{key:"_imageIsInLoadRange",value:function(e){this._downloadImage(e)}},{key:"_downloadImage",value:function(e){this._downloadingImageAttributes(e)}},{key:"_findAnim",value:function(){var e=Array.from(document.querySelectorAll("[data-anim-group],[data-anim-scroll-group],[data-anim-time-group]"));return e.map(function(e){return e._animInfo?e._animInfo.group:null}).filter(function(e){return null!==e}),e[0]&&e[0]._animInfo?e[0]._animInfo.group.anim:(console.error("AnimLazyImage: AnimSystem not found, please initialize anim before instantiating"),null)}}]),e}();o.DATA_DOWNLOAD_AREA_KEYFRAME="data-download-area-keyframe",o.DATA_ATTRIBUTE="data-anim-lazy-image",t.exports=o},{19:19,21:21,25:25}],56:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a=r(e(21)),o=r(e(30)),s=r(e(23)),c=r(e(22)),u=r(e(24)),h=e(55),l=e(86),f=e(48),p=e(52),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i["default"])(this,t),(0,o["default"])(this,(0,s["default"])(t).call(this,e))}return(0,u["default"])(t,e),(0,a["default"])(t,[{key:"_init",value:function(){(0,c["default"])((0,s["default"])(t.prototype),"_init",this).call(this),this._onBreakpointChangeCallback=this._onBreakpointChangeCallback.bind(this),this._addViewportEvents(),this._resetPromises(),this._addMethodsToImageElement()}},{key:"_addViewportEvents",value:function(){var e=this.options.breakpoints?{breakpoints:this.options.breakpoints}:{};this.viewportEmitterMicro=new l(e),this.viewportEmitterMicro.on(l.CHANGE_EVENTS.VIEWPORT,this._onBreakpointChangeCallback),this.viewportEmitterMicro.on(l.CHANGE_EVENTS.RETINA,this._onBreakpointChangeCallback)}},{key:"_addKeyframesToImages",value:function(){var e=this;this._scrollGroup=this.AnimSystem.getGroupForTarget(document.body),this._images.forEach(function(t){e.AnimSystem.getGroupForTarget(t)&&(e._scrollGroup=e.AnimSystem.getGroupForTarget(t));var n=e._defineKeyframeOptions(t),r=e._scrollGroup.addKeyframe(t,n);r.controller.on("AnimLazyImage:enter",function(){e._imageIsInLoadRange(t)})})}},{key:"_onBreakpointChangeCallback",value:function(e){var t=this;this._resetPromises(),this._images.forEach(function(e){t._cleanUpImageAttributes(e),""!=e.getAttribute(h.DATA_ATTRIBUTE)&&t._imageIsInLoadRange(e)})}},{key:"_resetPromises",value:function(){this._images.forEach(function(e){e.promises={},e.promises.downloadComplete=new Promise(function(t){e.promises.__completePromiseResolver=t})})}},{key:"_addMethodsToImageElement",value:function(){var e=this;this._images.forEach(function(t){t.forceLazyLoad=function(){e._imageIsInLoadRange(t)}})}},{key:"_imageIsInLoadRange",value:function(e){this._downloadImage(e).then(function(){e.promises.__completePromiseResolver(e),e.dispatchEvent(new Event(t.EVENTS.DOWNLOAD_COMPLETE))})}},{key:"_cleanUpImageAttributes",value:function(e){e.removeAttribute(t.DATA_DOWNLOADING_ATTRIBUTE),e.removeAttribute(t.DATA_DOWNLOAD_COMPLETE_ATTRIBUTE)}},{key:"_downloadingImageAttributes",value:function(e){(0,c["default"])((0,s["default"])(t.prototype),"_downloadingImageAttributes",this).call(this,e),e.setAttribute(t.DATA_DOWNLOADING_ATTRIBUTE,"")}},{key:"_finishedDownloadAttributes",value:function(e){e.removeAttribute(t.DATA_DOWNLOADING_ATTRIBUTE),e.setAttribute(t.DATA_DOWNLOAD_COMPLETE_ATTRIBUTE,"")}},{key:"_downloadImage",value:function(e){var n=this;return new Promise(function(r,i){return null!==e.getAttribute(t.DATA_DOWNLOAD_COMPLETE_ATTRIBUTE)?void r():void(null===e.getAttribute(t.DATA_DOWNLOADING_ATTRIBUTE)&&n._waitForBackgroundVisible(e).then(function(e){return n._getBackgroundImageSrc(e)}).then(function(e){return n._loadImage(e)}).then(function(){f(function(){n._finishedDownloadAttributes(e),r()},!0)}))})}},{key:"_waitForBackgroundVisible",value:function(e){
var t=this;return new Promise(function(n,r){f(function(){t._downloadingImageAttributes(e),n(e)},!0)})}},{key:"_getBackgroundImageSrc",value:function(e){return new Promise(function(t,n){p(function(){var n=e.currentStyle;return n||(n=window.getComputedStyle(e,!1)),0===n.backgroundImage.indexOf("url(")?void t(n.backgroundImage.slice(4,-1).replace(/"/g,"")):void t(null)},!0)})}},{key:"_loadImage",value:function(e){return new Promise(this._loadImagePromiseFunc.bind(this,e))}},{key:"_loadImagePromiseFunc",value:function(e,t,n){function r(){this.removeEventListener("load",r),t(this),t=null}if(!e)return void t(null);var i=new Image;i.addEventListener("load",r),i.src=e}}]),t}(h);d.DATA_DOWNLOAD_COMPLETE_ATTRIBUTE="data-anim-lazy-image-download-complete",d.DATA_DOWNLOADING_ATTRIBUTE="data-anim-lazy-image-downloading",d.EVENTS={},d.EVENTS.DOWNLOAD_COMPLETE="video-loading-complete",t.exports=d},{19:19,21:21,22:22,23:23,24:24,25:25,30:30,48:48,52:52,55:55,86:86}],57:[function(e,t,n){"use strict";t.exports={version:"3.2.1",major:"3.x",majorMinor:"3.2"}},{}],58:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a=r(e(21)),o=r(e(30)),s=r(e(23)),c=r(e(18)),u=r(e(24)),h=e(5).EventEmitterMicro,l=e(64),f=e(59),p=e(60),d=e(62),m=e(74),y=e(75),v=e(57),g={update:e(52),cancelUpdate:e(47),external:e(49),draw:e(48)},b=null,E=function(e){function t(){var e;if((0,i["default"])(this,t),e=(0,o["default"])(this,(0,s["default"])(t).call(this)),b)throw"You cannot create multiple AnimSystems. You probably want to create multiple groups instead. You can have unlimited groups on a page";return b=(0,c["default"])(e),e.groups=[],e.scrollSystems=[],e.timeSystems=[],e._forceUpdateRAFId=-1,e._initialized=!1,e.model=l,e.version=v.version,e._resolveReady=function(){},e.ready=new Promise(function(t){return e._resolveReady=t}),e.onScroll=e.onScroll.bind((0,c["default"])(e)),e.onResizedDebounced=e.onResizedDebounced.bind((0,c["default"])(e)),e.onResizeImmediate=e.onResizeImmediate.bind((0,c["default"])(e)),e}return(0,u["default"])(t,e),(0,a["default"])(t,[{key:"initialize",value:function(){return this._initialized?this.ready:(this._initialized=!0,this.timeSystems=[],this.scrollSystems=[],this.groups=[],this.setupEvents(),this.initializeResizeFilter(),this.initializeModel(),this.createDOMGroups(),this.createDOMKeyframes(),this._resolveReady(),this.ready)}},{key:"remove",value:function(){var e=this;return Promise.all(this.groups.map(function(e){return e.remove()})).then(function(){e.groups=null,e.scrollSystems=null,e.timeSystems=null,window.clearTimeout(l.RESIZE_TIMEOUT),window.removeEventListener("scroll",e.onScroll),window.removeEventListener("resize",e.onResizeImmediate),e._events={},e._initialized=!1,e.ready=new Promise(function(t){return e._resolveReady=t})})}},{key:"destroy",value:function(){return this.remove()}},{key:"createTimeGroup",value:function(e){var t=new y(e,this);return this.groups.push(t),this.timeSystems.push(t),this.trigger(l.EVENTS.ON_GROUP_CREATED,t),t}},{key:"createScrollGroup",value:function(e){if(!e)throw"AnimSystem scroll based groups must supply an HTMLElement";var t=new m(e,this);return this.groups.push(t),this.scrollSystems.push(t),this.trigger(l.EVENTS.ON_GROUP_CREATED,t),t}},{key:"removeGroup",value:function(e){var t=this;return Promise.all(e.keyframeControllers.map(function(t){return e.removeKeyframeController(t)})).then(function(){var n=t.groups.indexOf(e);n!==-1&&t.groups.splice(n,1),n=t.scrollSystems.indexOf(e),n!==-1&&t.scrollSystems.splice(n,1),n=t.timeSystems.indexOf(e),n!==-1&&t.timeSystems.splice(n,1),e.destroy()})}},{key:"createDOMGroups",value:function(){var e=this;document.body.setAttribute("data-anim-scroll-group","body"),document.querySelectorAll("[data-anim-scroll-group]").forEach(function(t){return e.createScrollGroup(t)}),document.querySelectorAll("[data-anim-time-group]").forEach(function(t){return e.createTimeGroup(t)}),this.trigger(l.EVENTS.ON_DOM_GROUPS_CREATED,this.groups)}},{key:"createDOMKeyframes",value:function(){var e=this,t=[];[f.DATA_ATTRIBUTE,p.DATA_ATTRIBUTE,d.DATA_ATTRIBUTE].forEach(function(e){for(var n=0;n<12;n++)t.push(e+(0===n?"":"-"+(n-1)))});for(var n=0;n<t.length;n++)for(var r=t[n],i=document.querySelectorAll("["+r+"]"),a=0;a<i.length;a++){var o=i[a],s=JSON.parse(o.getAttribute(r));this.addKeyframe(o,s)}g.update(function(){e.groups.forEach(function(e){return e.onKeyframesDirty({silent:!0})}),e.groups.forEach(function(e){return e.trigger(l.EVENTS.ON_DOM_KEYFRAMES_CREATED,e)}),e.trigger(l.EVENTS.ON_DOM_KEYFRAMES_CREATED,e),e.groups.forEach(function(e){e.forceUpdate({waitForNextUpdate:!1,silent:!0}),e.reconcile()}),e.onScroll()},!0)}},{key:"initializeResizeFilter",value:function(){if(!l.cssDimensionsTracker){var e=document.querySelector(".cssDimensionsTracker")||document.createElement("div");e.setAttribute("cssDimensionsTracker","true"),e.style.position="fixed",e.style.top="0",e.style.width="100%",e.style.height="100vh",e.style.pointerEvents="none",e.style.visibility="hidden",e.style.zIndex="-1",document.documentElement.appendChild(e),l.cssDimensionsTracker=e}}},{key:"initializeModel",value:function(){l.pageMetrics.windowHeight=l.cssDimensionsTracker.clientHeight,l.pageMetrics.windowWidth=l.cssDimensionsTracker.clientWidth,l.pageMetrics.scrollY=window.scrollY||window.pageYOffset,l.pageMetrics.scrollX=window.scrollX||window.pageXOffset,l.pageMetrics.breakpoint=l.getBreakpoint();var e=document.documentElement.getBoundingClientRect();l.pageMetrics.documentOffsetX=e.left+l.pageMetrics.scrollX,l.pageMetrics.documentOffsetY=e.top+l.pageMetrics.scrollY}},{key:"setupEvents",value:function(){window.removeEventListener("scroll",this.onScroll),window.addEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResizeImmediate),window.addEventListener("resize",this.onResizeImmediate)}},{key:"onScroll",value:function(){l.pageMetrics.scrollY=window.scrollY||window.pageYOffset,l.pageMetrics.scrollX=window.scrollX||window.pageXOffset;for(var e=0,t=this.scrollSystems.length;e<t;e++)this.scrollSystems[e]._onScroll();this.trigger(l.PageEvents.ON_SCROLL,l.pageMetrics)}},{key:"onResizeImmediate",value:function(){var e=l.cssDimensionsTracker.clientWidth,t=l.cssDimensionsTracker.clientHeight;if(e!==l.pageMetrics.windowWidth||t!==l.pageMetrics.windowHeight){l.pageMetrics.windowWidth=e,l.pageMetrics.windowHeight=t,l.pageMetrics.scrollY=window.scrollY||window.pageYOffset,l.pageMetrics.scrollX=window.scrollX||window.pageXOffset;var n=document.documentElement.getBoundingClientRect();l.pageMetrics.documentOffsetX=n.left+l.pageMetrics.scrollX,l.pageMetrics.documentOffsetY=n.top+l.pageMetrics.scrollY,window.clearTimeout(l.RESIZE_TIMEOUT),l.RESIZE_TIMEOUT=window.setTimeout(this.onResizedDebounced,250),this.trigger(l.PageEvents.ON_RESIZE_IMMEDIATE,l.pageMetrics)}}},{key:"onResizedDebounced",value:function(){var e=this;g.update(function(){var t=l.pageMetrics.breakpoint,n=l.getBreakpoint(),r=n!==t;if(r){l.pageMetrics.previousBreakpoint=t,l.pageMetrics.breakpoint=n;for(var i=0,a=e.groups.length;i<a;i++)e.groups[i]._onBreakpointChange();e.trigger(l.PageEvents.ON_BREAKPOINT_CHANGE,l.pageMetrics)}for(var o=0,s=e.groups.length;o<s;o++)e.groups[o].forceUpdate({waitForNextUpdate:!1});e.trigger(l.PageEvents.ON_RESIZE_DEBOUNCED,l.pageMetrics)},!0)}},{key:"forceUpdate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.waitForNextUpdate,r=void 0===n||n,i=t.silent,a=void 0!==i&&i;this._forceUpdateRAFId!==-1&&g.cancelUpdate(this._forceUpdateRAFId);var o=function(){for(var t=0,n=e.groups.length;t<n;t++){var r=e.groups[t];r.forceUpdate({waitForNextUpdate:!1,silent:a})}return-1};this._forceUpdateRAFId=r?g.update(o,!0):o()}},{key:"addKeyframe",value:function(e,t){var n=this.getGroupForTarget(e);return n=n||this.getGroupForTarget(document.body),n.addKeyframe(e,t)}},{key:"getGroupForTarget",value:function(e){if(e._animInfo&&e._animInfo.group)return e._animInfo.group;for(var t=e;t;){if(t._animInfo&&t._animInfo.isGroup)return t._animInfo.group;t=t.parentElement}}},{key:"getControllerForTarget",value:function(e){return e._animInfo&&e._animInfo.controller?e._animInfo.controller:null}}]),t}(h);t.exports=window.AC.SharedInstance.share("AnimSystem",v.major,E)},{18:18,19:19,21:21,23:23,24:24,25:25,30:30,47:47,48:48,49:49,5:5,52:52,57:57,59:59,60:60,62:62,64:64,74:74,75:75}],59:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a=r(e(21)),o=e(64),s=e(85),c=e(65),u=e(71),h=e(68),l=e(76),f=e(77),p=e(70),d=function(){function e(t,n){(0,i["default"])(this,e),this.controller=t,this.anchors=[],this.jsonProps=n,this.ease=t.group.defaultEase,this.easeFunctionString=o.KeyframeDefaults.easeFunctionString,this.easeFunction=c[this.easeFunctionString],this.start=0,this.end=0,this.localT=0,this.curvedT=0,this.id=0,this.event="",this.needsEventDispatch=!1,this.snapAtCreation=!1,this.isEnabled=!1,this.animValues={},this.breakpointMask="SMLX",this.disabledWhen=[],this.keyframeType=o.KeyframeTypes.Interpolation,this.hold=!1,this.preserveState=!1,this.markedForRemoval=!1,this.hidden=!1,this.uuid=p()}return(0,a["default"])(e,[{key:"destroy",value:function(){this.controller=null,this.disabledWhen=null,this.anchors=null,this.jsonProps=null,this.easeFunction=null,this.animValues=null}},{key:"remove",value:function(){return this.controller.removeKeyframe(this)}},{key:"parseOptions",value:function(e){var t=this;this.jsonProps=e,e.relativeTo&&console.error("KeyframeError: relativeTo has been removed. Use 'anchors' property instead. Found 'relativeTo':\"".concat(e.relativeTo,'"')),""!==e.anchors&&e.anchors?(this.anchors=[],e.anchors=Array.isArray(e.anchors)?e.anchors:[e.anchors],e.anchors.forEach(function(n,r){var i=f(n,t.controller.group.element);if(!i){var a="";return"string"==typeof n&&(a=" Provided value was a string, so a failed attempt was made to find anchor with the provided querystring in group.element, or in the document."),void console.warn("Keyframe on",t.controller.element," failed to find anchor at index ".concat(r," in array"),e.anchors,". Anchors must be JS Object references, Elements references, or valid query selector strings. ".concat(a))}t.anchors.push(i),t.controller.group.metrics.add(i)})):(this.anchors=[],e.anchors=[]),e.ease?this.ease=parseFloat(e.ease):e.ease=this.ease,e.hasOwnProperty("snapAtCreation")?this.snapAtCreation=e.snapAtCreation:e.snapAtCreation=this.snapAtCreation,e.easeFunction?this.easeFunctionString=e.easeFunction:e.easeFunction=this.easeFunctionString,e.breakpointMask?this.breakpointMask=e.breakpointMask:e.breakpointMask=this.breakpointMask,e.disabledWhen?this.disabledWhen=Array.isArray(e.disabledWhen)?e.disabledWhen:[e.disabledWhen]:e.disabledWhen=this.disabledWhen,e.hasOwnProperty("hold")?this.hold=e.hold:e.hold=this.hold,e.hasOwnProperty("preserveState")?this.preserveState=e.preserveState:e.preserveState=this.preserveState,this.easeFunction=c[e.easeFunction],c.hasOwnProperty(e.easeFunction)||(e.easeFunction.includes("bezier")?this.easeFunction=u.fromCSSString(e.easeFunction):e.easeFunction.includes("spring")?this.easeFunction=h.fromCSSString(e.easeFunction):console.error("Keyframe parseOptions cannot find 'easeFunction' named '"+e.easeFunction+"'"));for(var n in e)if(o.KeyframeJSONReservedWords.indexOf(n)===-1){var r=e[n];if(Array.isArray(r)){if(this.animValues[n]=this.controller.group.expressionParser.parseArray(this,r),void 0===this.controller.tweenProps[n]||!this.controller._ownerIsElement){var i=0;this.controller._ownerIsElement||(i=this.controller.element[n]||0);var a=new o.TargetValue(i,o.KeyframeDefaults.epsilon,this.snapAtCreation);this.controller.tweenProps[n]=a}var s=this.controller.tweenProps[n];if(e.epsilon)s.epsilon=e.epsilon;else{var l=Math.abs(this.animValues[n][0]-this.animValues[n][1]),p=Math.min(.001*l,s.epsilon,o.KeyframeDefaults.epsilon);s.epsilon=Math.max(p,1e-4)}}}this.keyframeType=this.hold?o.KeyframeTypes.InterpolationForward:o.KeyframeTypes.Interpolation,e.event&&(this.event=e.event)}},{key:"overwriteProps",value:function(e){this.animValues={};var t=Object.assign({},this.jsonProps,e);this.controller.updateKeyframe(this,t)}},{key:"updateLocalProgress",value:function(e){if(this.start===this.end||e<this.start||e>this.end)return this.localT=e<this.start?0:e>this.end?1:0,void(this.curvedT=this.easeFunction(this.localT));var t=(e-this.start)/(this.end-this.start),n=this.hold?this.localT:0;this.localT=s.clamp(t,n,1),this.curvedT=this.easeFunction(this.localT)}},{key:"reconcile",value:function(e){var t=this.animValues[e],n=this.controller.tweenProps[e];n.initialValue=t[0],n.target=t[0]+this.curvedT*(t[1]-t[0]),n.current!==n.target&&(n.current=n.target,this.needsEventDispatch||(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this)))}},{key:"reset",value:function(e){this.localT=e||0;var t=this.ease;this.ease=1;for(var n in this.animValues)this.reconcile(n);this.ease=t}},{key:"onDOMRead",value:function(e){var t=this.animValues[e],n=this.controller.tweenProps[e];n.target=t[0]+this.curvedT*(t[1]-t[0]);var r=n.current;n.current+=(n.target-n.current)*this.ease;var i=n.current-n.target;i<n.epsilon&&i>-n.epsilon&&(n.current=n.target,i=0),""===this.event||this.needsEventDispatch||(i>n.epsilon||i<-n.epsilon||0===i&&r!==n.current)&&(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this))}},{key:"isInRange",value:function(e){return e>=this.start&&e<=this.end}},{key:"setEnabled",value:function(e){e=e||l(Array.from(document.documentElement.classList));var t=this.breakpointMask.indexOf(o.pageMetrics.breakpoint)!==-1,n=!1;return this.disabledWhen.length>0&&(n=this.disabledWhen.some(function(t){return"undefined"!=typeof e[t]})),this.isEnabled=t&&!n,this.isEnabled}},{key:"evaluateConstraints",value:function(){this.start=this.controller.group.expressionParser.parseTimeValue(this,this.jsonProps.start),this.end=this.controller.group.expressionParser.parseTimeValue(this,this.jsonProps.end),this.evaluateInterpolationConstraints()}},{key:"evaluateInterpolationConstraints",value:function(){for(var e in this.animValues){var t=this.jsonProps[e];this.animValues[e]=this.controller.group.expressionParser.parseArray(this,t)}}}]),e}();d.DATA_ATTRIBUTE="data-anim-tween",t.exports=d},{19:19,21:21,25:25,64:64,65:65,68:68,70:70,71:71,76:76,77:77,85:85}],60:[function(e,t,n){"use strict";var r=e(25),i=r(e(35)),a=r(e(19)),o=r(e(21)),s=r(e(30)),c=r(e(23)),u=r(e(24)),h=e(59),l=e(64),f=function(e){function t(e,n){var r;return(0,a["default"])(this,t),r=(0,s["default"])(this,(0,c["default"])(t).call(this,e,n)),r.keyframeType=l.KeyframeTypes.CSSClass,r._triggerType=t.TRIGGER_TYPE_CSS_CLASS,r.cssClass="",r.friendlyName="",r.style={on:null,off:null},r.toggle=!1,r.isApplied=!1,r}return(0,u["default"])(t,e),(0,o["default"])(t,[{key:"parseOptions",value:function(e){if(!this.controller._ownerIsElement)throw new TypeError("CSS Keyframes cannot be applied to JS Objects");if(e.x=void 0,e.y=void 0,e.scale=void 0,e.scaleX=void 0,e.scaleY=void 0,e.rotation=void 0,e.opacity=void 0,e.hold=void 0,void 0!==e.toggle&&(this.toggle=e.toggle),void 0!==e.cssClass)this._triggerType=t.TRIGGER_TYPE_CSS_CLASS,this.cssClass=e.cssClass,this.friendlyName="."+this.cssClass,void 0===this.controller.tweenProps.targetClasses&&(this.controller.tweenProps.targetClasses={add:[],remove:[]});else{if(void 0===e.style||!this.isValidStyleProperty(e.style))throw new TypeError("KeyframeCSSClass no 'cssClass` property found. If using `style` property its also missing or invalid");if(this._triggerType=t.TRIGGER_TYPE_STYLE_PROPERTY,this.style=e.style,this.friendlyName="style",this.toggle=void 0!==this.style.off||this.toggle,this.toggle&&void 0===this.style.off){this.style.off={};for(var n in this.style.on)this.style.off[n]=""}void 0===this.controller.tweenProps.targetStyles&&(this.controller.tweenProps.targetStyles={})}if(void 0===e.end&&(e.end=e.start),e.toggle=this.toggle,this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.isApplied=this.controller.element.classList.contains(this.cssClass);else{var r=getComputedStyle(this.controller.element);this.isApplied=!0;for(var i in this.style.on)if(r[i]!==this.style.on[i]){this.isApplied=!1;break}}h.prototype.parseOptions.call(this,e),this.animValues[this.friendlyName]=[0,0],void 0===this.controller.tweenProps[this.friendlyName]&&(this.controller.tweenProps[this.friendlyName]=new l.TargetValue(0,1,(!1))),this.keyframeType=l.KeyframeTypes.CSSClass}},{key:"updateLocalProgress",value:function(e){this.isApplied&&!this.toggle||(this.start!==this.end?!this.isApplied&&e>=this.start&&e<=this.end?this._apply():this.isApplied&&this.toggle&&(e<this.start||e>this.end)&&this._unapply():!this.isApplied&&e>=this.start?this._apply():this.isApplied&&this.toggle&&e<this.start&&this._unapply())}},{key:"_apply",value:function(){if(this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.add.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(var e in this.style.on)this.controller.tweenProps.targetStyles[e]=this.style.on[e];this.controller.needsStyleUpdate=!0}this.isApplied=!0}},{key:"_unapply",value:function(){if(this._triggerType===t.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.remove.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(var e in this.style.off)this.controller.tweenProps.targetStyles[e]=this.style.off[e];this.controller.needsStyleUpdate=!0}this.isApplied=!1}},{key:"isValidStyleProperty",value:function(e){if(!e.hasOwnProperty("on"))return!1;if("object"!==(0,i["default"])(e.on))throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:hidden, otherProperty: value}}");if(this.toggle&&e.hasOwnProperty("off")&&"object"!==(0,i["default"])(e.off))throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:hidden, otherProperty: value}}");return!0}},{key:"reconcile",value:function(e,t){}},{key:"onDOMRead",value:function(e,t){}},{key:"evaluateInterpolationConstraints",value:function(){}}]),t}(h);f.TRIGGER_TYPE_CSS_CLASS=0,f.TRIGGER_TYPE_STYLE_PROPERTY=1,f.DATA_ATTRIBUTE="data-anim-classname",t.exports=f},{19:19,21:21,23:23,24:24,25:25,30:30,35:35,59:59,64:64}],61:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a=r(e(21)),o=r(e(30)),s=r(e(18)),c=r(e(23)),u=r(e(22)),h=r(e(24)),l=e(64),f=(e(59),e(60)),p=e(67),d=e(76),m=e(70),y=e(5).EventEmitterMicro,v=e(81),g={update:e(52),external:e(49),draw:e(48)},b=Math.PI/180,E=["x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","rotationZ"],_={create:e(89),rotateX:e(91),rotateY:e(92),rotateZ:e(93),scale:e(94)},w=function(e){function t(e,n){var r;return(0,i["default"])(this,t),r=(0,o["default"])(this,(0,c["default"])(t).call(this)),r._events.draw=[],r.uuid=m(),r.group=e,r.element=n,r._ownerIsElement=r.element instanceof Element,r._ownerIsElement?r.friendlyName=r.element.tagName+"."+Array.from(r.element.classList).join("."):r.friendlyName=r.element.friendlyName||r.uuid,r.element._animInfo=r.element._animInfo||new l.AnimInfo(e,(0,s["default"])(r)),r.element._animInfo.controller=(0,s["default"])(r),r.element._animInfo.group=r.group,r.element._animInfo.controllers.push((0,s["default"])(r)),r.tweenProps=r.element._animInfo.tweenProps,r.eventObject=new l.EventObject((0,s["default"])(r)),r.needsStyleUpdate=!1,r.needsClassUpdate=!1,r.elementMetrics=r.group.metrics.add(r.element),r.attributes=[],r.keyframes={},r._allKeyframes=[],r._activeKeyframes=[],r.keyframesRequiringDispatch=[],r.updateCachedValuesFromElement(),r.boundsMin=0,r.boundsMax=0,r.mat2d=new Float32Array(6),r.mat4=_.create(),r.needsWrite=!0,r.onDOMWriteImp=r._ownerIsElement?r.onDOMWriteForElement:r.onDOMWriteForObject,r}return(0,h["default"])(t,e),(0,a["default"])(t,[{key:"destroy",value:function(){if(this.element._animInfo){this.element._animInfo.controller===this&&(this.element._animInfo.controller=null);var e=this.element._animInfo.controllers.indexOf(this);e!==-1&&this.element._animInfo.controllers.splice(e,1),0===this.element._animInfo.controllers.length?this.element._animInfo=null:(this.element._animInfo.controller=this.element._animInfo.controllers[this.element._animInfo.controllers.length-1],this.element._animInfo.group=this.element._animInfo.controller.group)}this.eventObject.controller=null,this.eventObject.element=null,this.eventObject.keyframe=null,this.eventObject.tweenProps=null,this.eventObject=null,this.elementMetrics=null,this.group=null,this.keyframesRequiringDispatch=null;for(var n=0;n<this._allKeyframes.length;n++)this._allKeyframes[n].destroy();this._allKeyframes=null,this._activeKeyframes=null,this.attributes=null,this.keyframes=null,this.element=null,this.tweenProps=null,(0,u["default"])((0,c["default"])(t.prototype),"destroy",this).call(this)}},{key:"remove",value:function(){return this.group.removeKeyframeController(this)}},{key:"updateCachedValuesFromElement",value:function(){var e=this;if(this._ownerIsElement){var t=getComputedStyle(this.element),n=v(this.element,!0),r=l.KeyframeDefaults.epsilon,i=!1;["x","y","z"].forEach(function(t,a){e.tweenProps[t]=new l.TargetValue(n.translation[a],r,i)}),this.tweenProps.rotation=new l.TargetValue(n.eulerRotation[2],r,i),["rotationX","rotationY","rotationZ"].forEach(function(t,a){e.tweenProps[t]=new l.TargetValue(n.eulerRotation[a],r,i)}),this.tweenProps.scaleZ=new l.TargetValue(n.scale[0],r,i),["scaleX","scaleY","scale"].forEach(function(t,a){e.tweenProps[t]=new l.TargetValue(n.scale[a],r,i)}),this.tweenProps.opacity=new l.TargetValue(parseFloat(t.opacity),r,i)}}},{key:"addKeyframe",value:function(e){var t=p(e);if(!t)throw new Error("AnimSystem Cannot create keyframe for from options `"+e+"`");var n=new t(this,e);return n.parseOptions(e),n.id=this._allKeyframes.length,this._allKeyframes.push(n),n}},{key:"needsUpdate",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var n=this.attributes[e],r=this.tweenProps[n],i=Math.abs(r.current-r.target);if(i>r.epsilon)return!0}return!1}},{key:"updateLocalProgress",value:function(e){for(var t=0,n=this.attributes.length;t<n;t++){var r=this.attributes[t],i=this.keyframes[this.attributes[t]];if(1!==i.length){var a=this.getNearestKeyframeForAttribute(r,e);a&&a.updateLocalProgress(e)}else i[0].updateLocalProgress(e)}}},{key:"reconcile",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var n=this.attributes[e],r=this.getNearestKeyframeForAttribute(n,this.group.position.local);r.updateLocalProgress(this.group.position.local),r.snapAtCreation&&r.reconcile(n)}}},{key:"determineActiveKeyframes",value:function(e){var t=this;e=e||d(Array.from(document.documentElement.classList));var n=this._activeKeyframes,r=this.attributes,i={};this._activeKeyframes=[],this.attributes=[],this.keyframes={};for(var a=0;a<this._allKeyframes.length;a++){var o=this._allKeyframes[a];if(o.markedForRemoval||o.hidden||!o.setEnabled(e))for(var s in o.animValues)this.tweenProps[s].isActive=o.preserveState,o.preserveState&&(i[s]=!0);else{this._activeKeyframes.push(o);for(var c in o.animValues)this.keyframes[c]=this.keyframes[c]||[],this.keyframes[c].push(o),this.attributes.indexOf(c)===-1&&(i[c]=!0,this.attributes.push(c),this.tweenProps[c].isActive=!0)}}this.attributes.forEach(function(e){return t.tweenProps[e].isActive=!0});var u=n.filter(function(e){return t._activeKeyframes.indexOf(e)===-1});if(0!==u.length){var h=r.filter(function(e){return t.attributes.indexOf(e)===-1&&!i.hasOwnProperty(e)});if(0!==h.length)if(this.needsWrite=!0,this._ownerIsElement)g.external(function(){var e=Object.keys(i).filter(function(e){return E.includes(e)});0===e.length&&t.element.style.removeProperty("transform");for(var n=0,r=h.length;n<r;++n){var a=h[n],o=t.tweenProps[a];o.current=o.target,o.isActive=!1,"opacity"===a&&t.element.style.removeProperty("opacity")}for(var s=0,c=u.length;s<c;++s){var l=u[s];l instanceof f&&!l.preserveState&&l._unapply()}},!0);else for(var l=0,p=h.length;l<p;++l){var m=this.tweenProps[h[l]];m.current=m.target,m.isActive=!1}}}},{key:"onDOMRead",value:function(e){for(var t=0,n=this.attributes.length;t<n;t++){var r=this.attributes[t];this.tweenProps[r].previousValue=this.tweenProps[r].current;var i=this.getNearestKeyframeForAttribute(r,e);i&&i.onDOMRead(r),this.tweenProps[r].previousValue!==this.tweenProps[r].current&&(this.needsWrite=!0)}}},{key:"onDOMWrite",value:function(){(this.needsWrite||this.needsClassUpdate||this.needsStyleUpdate)&&(this.needsWrite=!1,this.onDOMWriteImp(),this.handleEventDispatch())}},{key:"onDOMWriteForObject",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var n=this.attributes[e];this.element[n]=this.tweenProps[n].current}}},{key:"onDOMWriteForElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.element.style,t=this.tweenProps;if(t.z.isActive||t.rotationX.isActive||t.rotationY.isActive){var n=this.mat4;if(n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,t.x.isActive||t.y.isActive||t.z.isActive){var r=t.x.current,i=t.y.current,a=t.z.current;n[12]=n[0]*r+n[4]*i+n[8]*a+n[12],n[13]=n[1]*r+n[5]*i+n[9]*a+n[13],n[14]=n[2]*r+n[6]*i+n[10]*a+n[14],n[15]=n[3]*r+n[7]*i+n[11]*a+n[15]}if(t.rotation.isActive||t.rotationZ.isActive){var o=(t.rotation.current||t.rotationZ.current)*b;_.rotateZ(n,n,o)}if(t.rotationX.isActive){var s=t.rotationX.current*b;_.rotateX(n,n,s)}if(t.rotationY.isActive){var c=t.rotationY.current*b;_.rotateY(n,n,c)}(t.scale.isActive||t.scaleX.isActive||t.scaleY.isActive)&&_.scale(n,n,[t.scale.current,t.scale.current,1]),e.transform="matrix3d("+n[0]+","+n[1]+","+n[2]+","+n[3]+","+n[4]+","+n[5]+","+n[6]+","+n[7]+","+n[8]+","+n[9]+","+n[10]+","+n[11]+","+n[12]+","+n[13]+","+n[14]+","+n[15]+")"}else if(t.x.isActive||t.y.isActive||t.rotation.isActive||t.rotationZ.isActive||t.scale.isActive||t.scaleX.isActive||t.scaleY.isActive){var u=this.mat2d;if(u[0]=1,u[1]=0,u[2]=0,u[3]=1,u[4]=0,u[5]=0,t.x.isActive||t.y.isActive){var h=t.x.current,l=t.y.current,f=u[0],p=u[1],d=u[2],m=u[3],y=u[4],v=u[5];u[0]=f,u[1]=p,u[2]=d,u[3]=m,u[4]=f*h+d*l+y,u[5]=p*h+m*l+v}if(t.rotation.isActive||t.rotationZ.isActive){var g=(t.rotation.current||t.rotationZ.current)*b,E=u[0],w=u[1],k=u[2],S=u[3],x=u[4],O=u[5],T=Math.sin(g),A=Math.cos(g);u[0]=E*A+k*T,u[1]=w*A+S*T,u[2]=E*-T+k*A,u[3]=w*-T+S*A,u[4]=x,u[5]=O}t.scale.isActive?(u[0]=u[0]*t.scale.current,u[1]=u[1]*t.scale.current,u[2]=u[2]*t.scale.current,u[3]=u[3]*t.scale.current,u[4]=u[4],u[5]=u[5]):(t.scaleX.isActive||t.scaleY.isActive)&&(u[0]=u[0]*t.scaleX.current,u[1]=u[1]*t.scaleX.current,u[2]=u[2]*t.scaleY.current,u[3]=u[3]*t.scaleY.current,u[4]=u[4],u[5]=u[5]),e.transform="matrix("+u[0]+", "+u[1]+", "+u[2]+", "+u[3]+", "+u[4]+", "+u[5]+")"}if(t.opacity.isActive&&(e.opacity=t.opacity.current),this.needsStyleUpdate){for(var M in this.tweenProps.targetStyles)null!==this.tweenProps.targetStyles[M]&&(this.element.style[M]=this.tweenProps.targetStyles[M]),this.tweenProps.targetStyles[M]=null;this.needsStyleUpdate=!1}this.needsClassUpdate&&(this.tweenProps.targetClasses.add.length>0&&this.element.classList.add.apply(this.element.classList,this.tweenProps.targetClasses.add),this.tweenProps.targetClasses.remove.length>0&&this.element.classList.remove.apply(this.element.classList,this.tweenProps.targetClasses.remove),this.tweenProps.targetClasses.add.length=0,this.tweenProps.targetClasses.remove.length=0,this.needsClassUpdate=!1)}},{key:"handleEventDispatch",value:function(){if(0!==this.keyframesRequiringDispatch.length){for(var e=0,t=this.keyframesRequiringDispatch.length;e<t;e++){var n=this.keyframesRequiringDispatch[e];n.needsEventDispatch=!1,this.eventObject.keyframe=n,this.eventObject.pageMetrics=l.pageMetrics,this.eventObject.event=n.event,this.trigger(n.event,this.eventObject)}this.keyframesRequiringDispatch.length=0}if(0!==this._events.draw.length){this.eventObject.keyframe=null,this.eventObject.event="draw";for(var r=this._events.draw.length-1;r>=0;r--)this._events.draw[r](this.eventObject)}}},{key:"updateAnimationConstraints",value:function(){for(var e=this,t=0,n=this._activeKeyframes.length;t<n;t++)this._activeKeyframes[t].evaluateConstraints();this.attributes.forEach(function(t){1!==e.keyframes[t].length&&e.keyframes[t].sort(l.KeyframeComparison)}),this.updateDeferredPropertyValues()}},{key:"refreshMetrics",value:function(){var e=new Set([this.element]);this._allKeyframes.forEach(function(t){return t.anchors.forEach(function(t){return e.add(t)})}),this.group.metrics.refreshCollection(e),this.group.keyframesDirty=!0}},{key:"updateDeferredPropertyValues",value:function(){for(var e=0,t=this.attributes.length;e<t;e++){var n=this.attributes[e],r=this.keyframes[n],i=r[0];if(!(i.keyframeType>l.KeyframeTypes.InterpolationForward))for(var a=0,o=r.length;a<o;a++){var s=r[a];if(null===s.jsonProps[n][0]){if(0===a){s.animValues[n][0]=this.tweenProps[n].initialValue;continue}s.animValues[n][0]=r[a-1].animValues[n][1]}if(null===s.jsonProps[n][1]){if(a===o-1)throw new RangeError("AnimSystem - last keyframe cannot defer it's end value! ".concat(n,":[").concat(s.jsonProps[n][0],",null]"));s.animValues[n][1]=r[a+1].animValues[n][0]}}}}},{key:"getBounds",value:function(e){this.boundsMin=Number.MAX_VALUE,this.boundsMax=-Number.MAX_VALUE;for(var t=0,n=this.attributes.length;t<n;t++)for(var r=this.keyframes[this.attributes[t]],i=0;i<r.length;i++){var a=r[i];this.boundsMin=Math.min(a.start,this.boundsMin),this.boundsMax=Math.max(a.end,this.boundsMax),e.min=Math.min(a.start,e.min),e.max=Math.max(a.end,e.max)}}},{key:"getNearestKeyframeForAttribute",value:function(e,t){t=void 0!==t?t:this.group.position.local;var n=null,r=Number.POSITIVE_INFINITY,i=this.keyframes[e];if(void 0===i)return null;var a=i.length;if(0===a)return null;if(1===a)return i[0];for(var o=0;o<a;o++){var s=i[o];if(s.isInRange(t)){n=s;break}var c=Math.min(Math.abs(t-s.start),Math.abs(t-s.end));c<r&&(r=c,n=s)}return n}},{key:"getAllKeyframesForAttribute",value:function(e){return this.keyframes[e]}},{key:"updateKeyframe",value:function(e,t){var n=this;e.parseOptions(t),e.evaluateConstraints(),this.group.keyframesDirty=!0,g.update(function(){n.trigger(l.EVENTS.ON_KEYFRAME_UPDATED,e),n.group.trigger(l.EVENTS.ON_KEYFRAME_UPDATED,e)},!0)}},{key:"removeKeyframe",value:function(e){var t=this;return e.controller!==this?Promise.resolve(null):(e.markedForRemoval=!0,this.group.keyframesDirty=!0,new Promise(function(n){t.group.rafEmitter.executor.eventEmitter.once("before:draw",function(){n(e),e.destroy();var r=t._allKeyframes.indexOf(e);r!==-1&&t._allKeyframes.splice(r,1)})}))}},{key:"updateAnimation",value:function(e,t){return this.group.gui&&console.warn("KeyframeController.updateAnimation(keyframe,props) has been deprecated. Please use updateKeyframe(keyframe,props)"),this.updateKeyframe(e,t)}}]),t}(y);t.exports=w},{18:18,19:19,21:21,22:22,23:23,24:24,25:25,30:30,48:48,49:49,5:5,52:52,59:59,60:60,64:64,67:67,70:70,76:76,81:81,89:89,91:91,92:92,93:93,94:94}],62:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a=r(e(21)),o=r(e(30)),s=r(e(23)),c=r(e(22)),u=r(e(24)),h=e(59),l=e(64),f=function(e){function t(e,n){var r;return(0,i["default"])(this,t),r=(0,o["default"])(this,(0,s["default"])(t).call(this,e,n)),r.keyframeType=l.KeyframeTypes.Event,r.isApplied=!1,r.hasDuration=!1,r.isCurrentlyInRange=!1,r}return(0,u["default"])(t,e),(0,a["default"])(t,[{key:"parseOptions",value:function(e){e.x=void 0,e.y=void 0,e.scale=void 0,e.scaleX=void 0,e.scaleY=void 0,e.rotation=void 0,e.style=void 0,e.cssClass=void 0,e.rotation=void 0,e.opacity=void 0,e.hold=void 0,void 0===e.end&&(e.end=e.start),this.event=e.event,this.animValues[this.event]=[0,0],"undefined"==typeof this.controller.tweenProps[this.event]&&(this.controller.tweenProps[this.event]=new l.TargetValue(0,1,(!1))),(0,c["default"])((0,s["default"])(t.prototype),"parseOptions",this).call(this,e),this.keyframeType=l.KeyframeTypes.Event}},{key:"updateLocalProgress",value:function(e){if(this.hasDuration){var t=this.isCurrentlyInRange,n=e>=this.start&&e<=this.end;
if(t===n)return;return this.isCurrentlyInRange=n,void(n&&!t?this._trigger(this.event+":enter"):t&&!n&&this._trigger(this.event+":exit"))}!this.isApplied&&e>=this.start?(this.isApplied=!0,this._trigger(this.event)):this.isApplied&&e<this.start&&(this.isApplied=!1,this._trigger(this.event+":reverse"))}},{key:"_trigger",value:function(e){this.controller.eventObject.event=e,this.controller.eventObject.keyframe=this,this.controller.trigger(e,this.controller.eventObject)}},{key:"evaluateConstraints",value:function(){(0,c["default"])((0,s["default"])(t.prototype),"evaluateConstraints",this).call(this),this.hasDuration=this.start!==this.end}},{key:"reset",value:function(e){this.isApplied=!1,this.isCurrentlyInRange=!1,(0,c["default"])((0,s["default"])(t.prototype),"reset",this).call(this,e)}},{key:"onDOMRead",value:function(e,t){}},{key:"reconcile",value:function(e,t){}},{key:"evaluateInterpolationConstraints",value:function(){}}]),t}(h);f.DATA_ATTRIBUTE="data-anim-event",t.exports=f},{19:19,21:21,22:22,23:23,24:24,25:25,30:30,59:59,64:64}],63:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a=e(69);t.exports=function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,i["default"])(this,o),this.isGroup=n,this.group=e,this.controller=t,this.controllers=[],this.tweenProps=new a}},{19:19,25:25,69:69}],64:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a={GUI_INSTANCE:null,ANIM_INSTANCE:null,VIEWPORT_EMITTER_ELEMENT:void 0,LOCAL_STORAGE_KEYS:{GuiPosition:"anim-ui.position",GroupCollapsedStates:"anim-ui.group-collapsed-states",scrollY:"anim-ui.scrollY-position",path:"https://www.apple.com.cn/v/ipad-pro/y/built/scripts/anim-ui.path"},RESIZE_TIMEOUT:-1,BREAKPOINTS:[{name:"S",mediaQuery:"only screen and (max-width: 735px)"},{name:"M",mediaQuery:"only screen and (max-width: 1068px)"},{name:"L",mediaQuery:"only screen and (min-width: 1442px)"},{name:"L",mediaQuery:"only screen and (min-width: 1069px)"}],getBreakpoint:function(){for(var e=0;e<a.BREAKPOINTS.length;e++){var t=a.BREAKPOINTS[e],n=window.matchMedia(t.mediaQuery);if(n.matches)return t.name}},KeyframeDefaults:{ease:1,epsilon:.05,easeFunctionString:"linear",easeFunction:"linear",hold:!1,snapAtCreation:!1,toggle:!1,breakpointMask:"SMLX",event:"",disabledWhen:[],cssClass:""},KeyframeTypes:{Interpolation:0,InterpolationForward:1,CSSClass:2,Event:3},EVENTS:{ON_DOM_KEYFRAMES_CREATED:"ON_DOM_KEYFRAMES_CREATED",ON_DOM_GROUPS_CREATED:"ON_DOM_GROUPS_CREATED",ON_GROUP_CREATED:"ON_GROUP_CREATED",ON_KEYFRAME_UPDATED:"ON_KEYFRAME_UPDATED",ON_TIMELINE_START:"ON_TIMELINE_START",ON_TIMELINE_UPDATE:"ON_TIMELINE_UPDATE",ON_TIMELINE_COMPLETE:"ON_TIMELINE_COMPLETE"},PageEvents:{ON_SCROLL:"ON_SCROLL",ON_RESIZE_IMMEDIATE:"ON_RESIZE_IMMEDIATE",ON_RESIZE_DEBOUNCED:"ON_RESIZE_DEBOUNCED",ON_BREAKPOINT_CHANGE:"ON_BREAKPOINT_CHANGE"},KeyframeJSONReservedWords:["event","cssClass","style","anchors","start","end","epsilon","easeFunction","ease","breakpointMask","disabledWhen"],TweenProps:e(69),TargetValue:function o(e,t,n){(0,i["default"])(this,o),this.epsilon=parseFloat(t),this.snapAtCreation=n,this.initialValue=e,this.target=e,this.current=e,this.previousValue=e,this.isActive=!1},AnimInfo:e(63),Progress:function(){this.local=0,this.localUnclamped=0,this.lastPosition=0},ViewableRange:function(e,t){this.a=e.top-t,this.a<0&&(this.a=e.top),this.b=e.top,this.d=e.bottom,this.c=Math.max(this.d-t,this.b)},pageMetrics:new function(){this.scrollX=0,this.scrollY=0,this.windowWidth=0,this.windowHeight=0,this.documentOffsetX=0,this.documentOffsetY=0,this.previousBreakpoint="",this.breakpoint=""},EventObject:function(e){this.controller=e,this.element=this.controller.element,this.keyframe=null,this.event="",this.tweenProps=this.controller.tweenProps},KeyframeComparison:function(e,t){return e.start<t.start?-1:e.start>t.start?1:0}};t.exports=a},{19:19,25:25,63:63,69:69}],65:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a=function o(){(0,i["default"])(this,o),this.linear=function(e){return e},this.easeInQuad=function(e){return e*e},this.easeOutQuad=function(e){return e*(2-e)},this.easeInOutQuad=function(e){return e<.5?2*e*e:-1+(4-2*e)*e},this.easeInSin=function(e){return 1+Math.sin(Math.PI/2*e-Math.PI/2)},this.easeOutSin=function(e){return Math.sin(Math.PI/2*e)},this.easeInOutSin=function(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2},this.easeInElastic=function(e){return 0===e?e:(.04-.04/e)*Math.sin(25*e)+1},this.easeOutElastic=function(e){return.04*e/--e*Math.sin(25*e)},this.easeInOutElastic=function(e){return(e-=.5)<0?(.02+.01/e)*Math.sin(50*e):(.02-.01/e)*Math.sin(50*e)+1},this.easeOutBack=function(e){return e-=1,e*e*(2.70158*e+1.70158)+1},this.easeInCubic=function(e){return e*e*e},this.easeOutCubic=function(e){return--e*e*e+1},this.easeInOutCubic=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},this.easeInQuart=function(e){return e*e*e*e},this.easeOutQuart=function(e){return 1- --e*e*e*e},this.easeInOutQuart=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},this.easeInQuint=function(e){return e*e*e*e*e},this.easeOutQuint=function(e){return 1+--e*e*e*e*e},this.easeInOutQuint=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}};t.exports=new a},{19:19,25:25}],66:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a=r(e(21)),o=e(64),s=function(e,t){return void 0===e||null===e?t:e},c=function(){function e(){(0,i["default"])(this,e),this.clear()}return(0,a["default"])(e,[{key:"clear",value:function(){this._metrics=new WeakMap}},{key:"destroy",value:function(){this._metrics=null}},{key:"add",value:function(e){var t=this._metrics.get(e);if(t)return t;var n=new u(e);return this._metrics.set(e,n),this._refreshMetrics(e,n)}},{key:"get",value:function(e){return this._metrics.get(e)}},{key:"refreshCollection",value:function(e){var t=this;e.forEach(function(e){return t._refreshMetrics(e,null)})}},{key:"refreshMetrics",value:function(e){return this._refreshMetrics(e)}},{key:"_refreshMetrics",value:function(e,t){if(t=t||this._metrics.get(e),!(e instanceof Element))return t.width=s(e.width,0),t.height=s(e.height,0),t.top=s(e.top,s(e.y,0)),t.left=s(e.left,s(e.x,0)),t.right=t.left+t.width,t.bottom=t.top+t.height,t;if(void 0===e.offsetWidth){var n=e.getBoundingClientRect();return t.width=n.width,t.height=n.height,t.top=o.pageMetrics.scrollY+n.top,t.left=o.pageMetrics.scrollX+n.left,t.right=t.left+t.width,t.bottom=t.top+t.height,t}t.width=e.offsetWidth,t.height=e.offsetHeight,t.top=o.pageMetrics.documentOffsetY,t.left=o.pageMetrics.documentOffsetX;for(var r=e;r;)t.top+=r.offsetTop,t.left+=r.offsetLeft,r=r.offsetParent;return t.right=t.left+t.width,t.bottom=t.top+t.height,t}}]),e}(),u=function(){function e(t){(0,i["default"])(this,e),this.top=0,this.bottom=0,this.left=0,this.right=0,this.height=0,this.width=0}return(0,a["default"])(e,[{key:"toString",value:function(){return"top:".concat(this.top,", bottom:").concat(this.bottom,", left:").concat(this.left,", right:").concat(this.right,", height:").concat(this.height,", width:").concat(this.width)}},{key:"toObject",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right,height:this.height,width:this.width}}}]),e}();t.exports=c},{19:19,21:21,25:25,64:64}],67:[function(e,t,n){"use strict";var r=e(64),i=e(59),a=e(62),o=e(60),s=function(e){for(var t in e){var n=e[t];if(r.KeyframeJSONReservedWords.indexOf(t)===-1&&Array.isArray(n))return!0}return!1};t.exports=function(e){if(void 0!==e.cssClass||void 0!==e.style){if(s(e))throw"CSS Keyframes cannot tween values, please use multiple keyframes instead";return o}if(s(e))return i;if(e.event)return a;throw delete e.anchors,"Could not determine tween type based on ".concat(JSON.stringify(e))}},{59:59,60:60,62:62,64:64}],68:[function(e,t,n){"use strict";var r=e(25),i=r(e(20)),a=r(e(34)),o=r(e(19)),s=r(e(21)),c=function(){function e(t,n,r,i){(0,o["default"])(this,e),this.mass=t,this.stiffness=n,this.damping=r,this.initialVelocity=i,this.m_w0=Math.sqrt(this.stiffness/this.mass),this.m_zeta=this.damping/(2*Math.sqrt(this.stiffness*this.mass)),this.m_zeta<1?(this.m_wd=this.m_w0*Math.sqrt(1-this.m_zeta*this.m_zeta),this.m_A=1,this.m_B=(this.m_zeta*this.m_w0+-this.initialVelocity)/this.m_wd):(this.m_wd=0,this.m_A=1,this.m_B=-this.initialVelocity+this.m_w0)}return(0,s["default"])(e,[{key:"solve",value:function(e){return 0===e||1===e?e:(e=this.m_zeta<1?Math.exp(-e*this.m_zeta*this.m_w0)*(this.m_A*Math.cos(this.m_wd*e)+this.m_B*Math.sin(this.m_wd*e)):(this.m_A+this.m_B*e)*Math.exp(-e*this.m_w0),1-e)}}]),e}(),u=/\d*\.?\d+/g;c.fromCSSString=function(e){var t=e.match(u);if(4!==t.length)throw"SpringEasing could not convert ".concat(cssString," to spring params");var n=t.map(Number),r=(0,i["default"])(c,(0,a["default"])(n));return r.solve.bind(r)},t.exports=c},{19:19,20:20,21:21,25:25,34:34}],69:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a=function o(){(0,i["default"])(this,o)};t.exports=a},{19:19,25:25}],70:[function(e,t,n){"use strict";t.exports=function(){return Math.random().toString(16).slice(2)}},{}],71:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a=r(e(21)),o=1e-5,s=Math.abs,c=5,u=function(){function e(t,n,r,a){(0,i["default"])(this,e),this.cp=new Float32Array(6),this.cp[0]=3*t,this.cp[1]=3*(r-t)-this.cp[0],this.cp[2]=1-this.cp[0]-this.cp[1],this.cp[3]=3*n,this.cp[4]=3*(a-n)-this.cp[3],this.cp[5]=1-this.cp[3]-this.cp[4]}return(0,a["default"])(e,[{key:"sampleCurveX",value:function(e){return((this.cp[2]*e+this.cp[1])*e+this.cp[0])*e}},{key:"sampleCurveY",value:function(e){return((this.cp[5]*e+this.cp[4])*e+this.cp[3])*e}},{key:"sampleCurveDerivativeX",value:function(e){return(3*this.cp[2]*e+2*this.cp[1])*e+this.cp[0]}},{key:"solveCurveX",value:function(e){var t,n,r,i,a,u;for(r=e,u=0;u<c;u++){if(i=this.sampleCurveX(r)-e,s(i)<o)return r;if(a=this.sampleCurveDerivativeX(r),s(a)<o)break;r-=i/a}if(t=0,n=1,r=e,r<t)return t;if(r>n)return n;for(;t<n;){if(i=this.sampleCurveX(r),s(i-e)<o)return r;e>i?t=r:n=r,r=.5*(n-t)+t}return r}},{key:"solve",value:function(e){return this.sampleCurveY(this.solveCurveX(e))}}]),e}(),h=/\d*\.?\d+/g;u.fromCSSString=function(e){var t=e.match(h);if(4!==t.length)throw"UnitBezier could not convert ".concat(e," to cubic-bezier");var n=t.map(Number),r=new u(n[0],n[1],n[2],n[3]);return r.solve.bind(r)},t.exports=u},{19:19,21:21,25:25}],72:[function(e,t,n){"use strict";var r=e(25),i=r(e(35)),a=r(e(19)),o=r(e(21)),s=e(73),c=new(e(66)),u=function(){function e(t){(0,a["default"])(this,e),this.group=t,this.data={target:null,anchors:null,metrics:this.group.metrics}}return(0,o["default"])(e,[{key:"parseArray",value:function(e,t){return[this.parseExpression(e,t[0]),this.parseExpression(e,t[1])]}},{key:"parseExpression",value:function(t,n){if(!n)return null;if("number"==typeof n)return n;if("string"!=typeof n)throw"Expression must be a string, received ".concat((0,i["default"])(n),": ").concat(n);return this.data.target=t.controller.element,this.data.anchors=t.anchors,this.data.keyframe=t.keyframe,e._parse(n,this.data)}},{key:"parseTimeValue",value:function(e,t){if("number"==typeof t)return t;var n=this.group.expressionParser.parseExpression(e,t);return this.group.convertScrollPositionToTValue(n)}},{key:"destroy",value:function(){this.group=null}}],[{key:"parse",value:function(t,n){return n=n||{},n&&(c.clear(),n.target&&c.add(n.target),n.anchors&&n.anchors.forEach(function(e){return c.add(e)})),n.metrics=c,e._parse(t,n)}},{key:"_parse",value:function(e,t){return s.Parse(e).execute(t)}}]),e}();u.programs=s.programs,window.ExpressionParser=u,t.exports=u},{19:19,21:21,25:25,35:35,66:66,73:73}],73:[function(e,t,n){"use strict";var r=e(25),i=r(e(21)),a=r(e(30)),o=r(e(23)),s=r(e(24)),c=r(e(19)),u=e(64),h=e(85),l={},f={smoothstep:function(e,t,n){return n=f.clamp((n-e)/(t-e),0,1),n*n*(3-2*n)},deg:function(e){return 180*e/Math.PI},rad:function(e){return e*Math.PI/180},random:function(e,t){return Math.random()*(t-e)+e},atan:Math.atan2};Object.getOwnPropertyNames(Math).forEach(function(e){return f[e]?null:f[e.toLowerCase()]=Math[e]}),Object.getOwnPropertyNames(h).forEach(function(e){return f[e]?null:f[e.toLowerCase()]=h[e]});var p=null,d={ANCHOR_CONST:"a",ALPHA:"ALPHA",LPAREN:"(",RPAREN:")",PLUS:"PLUS",MINUS:"MINUS",MUL:"MUL",DIV:"DIV",INTEGER_CONST:"INTEGER_CONST",FLOAT_CONST:"FLOAT_CONST",COMMA:",",EOF:"EOF"},m={NUMBERS:/\d|\d\.\d/,DIGIT:/\d/,OPERATOR:/[-+*\/]/,PAREN:/[()]/,WHITE_SPACE:/\s/,ALPHA:/[a-zA-Z]|%/,ALPHANUMERIC:/[a-zA-Z0-9]/,OBJECT_UNIT:/^(t|l|b|r|%w|%h|%|h|w)$/,GLOBAL_METRICS_UNIT:/^(px|vh|vw)$/,ANY_UNIT:/^(t|l|b|r|%w|%h|%|h|w|px|vh|vw)$/,MATH_FUNCTION:new RegExp("\\b(".concat(Object.keys(f).join("|"),")\\b"),"i")},y={round:1,clamp:3,lerp:3,random:2,atan:2,floor:1,ceil:1,abs:1,cos:1,sin:1,smoothstep:3,rad:1,deg:1,pow:2,calc:1},v=function M(e,t){(0,c["default"])(this,M),this.type=e,this.value=t};v.ONE=new v("100",100),v.EOF=new v(d.EOF,null);var g=function P(e){(0,c["default"])(this,P),this.type=e},b=function(e){function t(e,n){var r;return(0,c["default"])(this,t),r=(0,a["default"])(this,(0,o["default"])(t).call(this,"UnaryOp")),r.token=r.op=e,r.expr=n,r}return(0,s["default"])(t,e),t}(g),E=function(e){function t(e,n,r){var i;return(0,c["default"])(this,t),i=(0,a["default"])(this,(0,o["default"])(t).call(this,"BinOp")),i.left=e,i.op=n,i.right=r,i}return(0,s["default"])(t,e),t}(g),_=function(e){function t(e,n){var r;if((0,c["default"])(this,t),r=(0,a["default"])(this,(0,o["default"])(t).call(this,"MathOp")),r.op=e,r.list=n,y[e.value]&&n.length!==y[e.value])throw new Error("Incorrect number of arguments for '".concat(e.value,"'. Received ").concat(n.length,", expected ").concat(y[e.value]));return r}return(0,s["default"])(t,e),t}(g),w=function(e){function t(e){var n;return(0,c["default"])(this,t),n=(0,a["default"])(this,(0,o["default"])(t).call(this,"Num")),n.token=e,n.value=e.value,n}return(0,s["default"])(t,e),t}(g),k=(function(e){function t(e){var n;return(0,c["default"])(this,t),n=(0,a["default"])(this,(0,o["default"])(t).call(this,"Unit")),n.token=e,n.value=e.value,n}return(0,s["default"])(t,e),t}(g),function(e){function t(e,n,r){var i;return(0,c["default"])(this,t),i=(0,a["default"])(this,(0,o["default"])(t).call(this,"RefValue")),i.num=e,i.ref=n,i.unit=r,i}return(0,s["default"])(t,e),t}(g)),S=function(e){function t(e,n){var r;return(0,c["default"])(this,t),r=(0,a["default"])(this,(0,o["default"])(t).call(this,"CSSValue")),r.ref=e,r.propertyName=n,r}return(0,s["default"])(t,e),t}(g),x=function(e){function t(e,n){var r;return(0,c["default"])(this,t),r=(0,a["default"])(this,(0,o["default"])(t).call(this,"PropValue")),r.ref=e,r.propertyName=n,r}return(0,s["default"])(t,e),t}(g),O=function(){function e(t){(0,c["default"])(this,e),this.text=t,this.pos=0,this["char"]=this.text[this.pos],this.tokens=[];for(var n;(n=this.getNextToken())&&n!==v.EOF;)this.tokens.push(n);this.tokens.push(n)}return(0,i["default"])(e,[{key:"advance",value:function(){this["char"]=this.text[++this.pos]}},{key:"skipWhiteSpace",value:function(){for(;null!=this["char"]&&m.WHITE_SPACE.test(this["char"]);)this.advance()}},{key:"name",value:function(){for(var e="";null!=this["char"]&&m.ALPHA.test(this["char"]);)e+=this["char"],this.advance();return new v(d.ALPHA,e)}},{key:"number",value:function(){for(var e="";null!=this["char"]&&m.DIGIT.test(this["char"]);)e+=this["char"],this.advance();if(null!=this["char"]&&"."===this["char"]){for(e+=this["char"],this.advance();null!=this["char"]&&m.DIGIT.test(this["char"]);)e+=this["char"],this.advance();return new v(d.FLOAT_CONST,parseFloat(e))}return new v(d.INTEGER_CONST,parseInt(e))}},{key:"getNextToken",value:function(){for(;null!=this["char"];)if(m.WHITE_SPACE.test(this["char"]))this.skipWhiteSpace();else{if(m.DIGIT.test(this["char"]))return this.number();if(","===this["char"])return this.advance(),new v(d.COMMA,",");if(m.OPERATOR.test(this["char"])){var e="",t=this["char"];switch(t){case"+":e=d.PLUS;break;case"-":e=d.MINUS;break;case"*":e=d.MUL;break;case"/":e=d.DIV}return this.advance(),new v(e,t)}if(m.PAREN.test(this["char"])){var n="",r=this["char"];switch(r){case"(":n=d.LPAREN;break;case")":n=d.RPAREN}return this.advance(),new v(n,r)}if(m.ALPHA.test(this["char"]))return this.name();this.error("Unexpected character "+this["char"])}return v.EOF}}]),e}(),T=function(){function e(t){(0,c["default"])(this,e),this.lexer=t,this.pos=0}return(0,i["default"])(e,[{key:"error",value:function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this.lexer.text.slice(this.pos-3,this.pos+3),t=new Error("".concat(e,' in "').concat(this.lexer.text,'" near "').concat(r,'". ').concat(n," "));throw console.error(t.message,p?p.keyframe||p.target:""),t}},{key:"consume",value:function(e){var t=this.currentToken;return t.type===e?this.pos+=1:this.error("Invalid token ".concat(this.currentToken.value,", expected ").concat(e)),t}},{key:"consumeList",value:function(e){e.includes(this.currentToken)?this.pos+=1:this.error("Invalid token ".concat(this.currentToken.value,", expected ").concat(tokenType))}},{key:"expr",value:function(){for(var e=this.term();this.currentToken.type===d.PLUS||this.currentToken.type===d.MINUS;){var t=this.currentToken;switch(t.value){case"+":this.consume(d.PLUS);break;case"-":this.consume(d.MINUS)}e=new E(e,t,this.term())}return e}},{key:"term",value:function(){for(var e=this.factor();this.currentToken.type===d.MUL||this.currentToken.type===d.DIV;){var t=this.currentToken;switch(t.value){case"*":this.consume(d.MUL);break;case"/":this.consume(d.DIV)}e=new E(e,t,this.factor())}return e}},{key:"factor",value:function(){if(this.currentToken.type===d.PLUS)return new b(this.consume(d.PLUS),this.factor());if(this.currentToken.type===d.MINUS)return new b(this.consume(d.MINUS),this.factor());if(this.currentToken.type===d.INTEGER_CONST||this.currentToken.type===d.FLOAT_CONST){var e=new w(this.currentToken);if(this.pos+=1,m.OPERATOR.test(this.currentToken.value)||this.currentToken.type===d.RPAREN||this.currentToken.type===d.COMMA||this.currentToken.type===d.EOF)return e;if(this.currentToken.type===d.ALPHA&&this.currentToken.value===d.ANCHOR_CONST)return this.consume(d.ALPHA),new k(e,this.anchorIndex(),this.unit(m.ANY_UNIT));if(this.currentToken.type===d.ALPHA)return"%a"===this.currentToken.value&&this.error("%a is invalid, try removing the %"),new k(e,null,this.unit());this.error("Expected a scaling unit type","Such as 'h' / 'w'")}else{if(m.OBJECT_UNIT.test(this.currentToken.value))return new k(new w(v.ONE),null,this.unit());if(this.currentToken.value===d.ANCHOR_CONST){this.consume(d.ALPHA);var t=this.anchorIndex();if(m.OBJECT_UNIT.test(this.currentToken.value))return new k(new w(v.ONE),t,this.unit())}else if(this.currentToken.type===d.ALPHA){if("css"===this.currentToken.value||"prop"===this.currentToken.value){var n="css"===this.currentToken.value?S:x;this.consume(d.ALPHA),this.consume(d.LPAREN);var r=this.propertyName(),i=null;return this.currentToken.type===d.COMMA&&(this.consume(d.COMMA),this.consume(d.ALPHA),i=this.anchorIndex()),this.consume(d.RPAREN),new n(i,r)}if(m.MATH_FUNCTION.test(this.currentToken.value)){var a=this.currentToken.value.toLowerCase();if("number"==typeof f[a])return this.consume(d.ALPHA),new w(new v(d.ALPHA,f[a]));var o=v[a]||new v(a,a),s=[];this.consume(d.ALPHA),this.consume(d.LPAREN);var c=null;do this.currentToken.value===d.COMMA&&this.consume(d.COMMA),c=this.expr(),s.push(c);while(this.currentToken.value===d.COMMA);return this.consume(d.RPAREN),new _(o,s)}}else if(this.currentToken.type===d.LPAREN){this.consume(d.LPAREN);var u=this.expr();return this.consume(d.RPAREN),u}}this.error("Unexpected token ".concat(this.currentToken.value))}},{key:"propertyName",value:function(){for(var e="";this.currentToken.type===d.ALPHA||this.currentToken.type===d.MINUS;)e+=this.currentToken.value,this.pos+=1;return e}},{key:"unit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.ANY_UNIT,t=this.currentToken;return t.type===d.ALPHA&&e.test(t.value)?(this.consume(d.ALPHA),new v(d.ALPHA,t.value=t.value.replace(/%(h|w)/,"$1").replace("%","h"))):void this.error("Expected unit type")}},{key:"anchorIndex",value:function(){var e=this.currentToken;return e.type===d.INTEGER_CONST?(this.consume(d.INTEGER_CONST),new w(e)):void this.error("Invalid anchor reference",". Should be something like a0, a1, a2")}},{key:"parse",value:function(){var e=this.expr();return this.currentToken!==v.EOF&&this.error("Unexpected token ".concat(this.currentToken.value)),e}},{key:"currentToken",get:function(){return this.lexer.tokens[this.pos]}}]),e}(),A=function(){function e(t){(0,c["default"])(this,e),this.parser=t,this.root=t.parse()}return(0,i["default"])(e,[{key:"visit",value:function(e){var t=this[e.type];if(!t)throw new Error("No visit method named, ".concat(t));var n=t.call(this,e);return n}},{key:"BinOp",value:function(e){switch(e.op.type){case d.PLUS:return this.visit(e.left)+this.visit(e.right);case d.MINUS:return this.visit(e.left)-this.visit(e.right);case d.MUL:return this.visit(e.left)*this.visit(e.right);case d.DIV:return this.visit(e.left)/this.visit(e.right)}}},{key:"RefValue",value:function(e){var t=this.unwrapReference(e),n=e.unit.value,r=e.num.value,i=p.metrics.get(t);switch(n){case"h":return.01*r*i.height;case"t":return.01*r*i.top;case"vh":return.01*r*u.pageMetrics.windowHeight;case"vw":return.01*r*u.pageMetrics.windowWidth;case"px":return r;case"w":return.01*r*i.width;case"b":return.01*r*i.bottom;case"l":return.01*r*i.left;case"r":return.01*r*i.right}}},{key:"PropValue",value:function(e){var t=null===e.ref?p.target:p.anchors[e.ref.value];return t[e.propertyName]}},{key:"CSSValue",value:function(t){var n=this.unwrapReference(t),r=getComputedStyle(n).getPropertyValue(t.propertyName);return""===r?0:e.Parse(r).execute(p)}},{key:"Num",value:function(e){return e.value}},{key:"UnaryOp",value:function(e){return e.op.type===d.PLUS?+this.visit(e.expr):e.op.type===d.MINUS?-this.visit(e.expr):void 0}},{key:"MathOp",value:function(e){var t=this,n=e.list.map(function(e){return t.visit(e)});return f[e.op.value].apply(null,n)}},{key:"unwrapReference",value:function(e){return null===e.ref?p.target:(e.ref.value>=p.anchors.length&&console.error("Not enough anchors supplied for expression ".concat(this.parser.lexer.text),p.target),p.anchors[e.ref.value])}},{key:"execute",value:function(e){return p=e,this.visit(this.root)}}],[{key:"Parse",value:function(t){return l[t]||(l[t]=new e(new T(new O(t))))}}]),e}();A.programs=l,t.exports=A},{19:19,21:21,23:23,24:24,25:25,30:30,64:64,85:85}],74:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a=r(e(21)),o=r(e(30)),s=r(e(18)),c=r(e(23)),u=r(e(22)),h=r(e(24)),l=e(5).EventEmitterMicro,f=e(85),p=e(76),d=e(64),m=e(66),y=e(72),v=e(61),g={create:e(42),update:e(52),draw:e(48)},b=function(e){function t(e,n){var r;return(0,i["default"])(this,t),r=(0,o["default"])(this,(0,c["default"])(t).call(this)),r.anim=n,r.element=e,r.name=r.name||e.getAttribute("data-anim-scroll-group"),r.isEnabled=!0,r.position=new d.Progress,r.metrics=new m,r.metrics.add(r.element),r.expressionParser=new y((0,s["default"])(r)),r.boundsMin=0,r.boundsMax=0,r.timelineUpdateRequired=!1,r._keyframesDirty=!1,r.viewableRange=r.createViewableRange(),r.defaultEase=d.KeyframeDefaults.ease,r.keyframeControllers=[],r.updateProgress(r.getPosition()),r.onDOMRead=r.onDOMRead.bind((0,s["default"])(r)),r.onDOMWrite=r.onDOMWrite.bind((0,s["default"])(r)),r.gui=null,r.finalizeInit(),r}return(0,h["default"])(t,e),(0,a["default"])(t,[{key:"finalizeInit",value:function(){this.element._animInfo=new d.AnimInfo(this,null,(!0)),this.setupRAFEmitter()}},{key:"destroy",value:function(){this.expressionParser.destroy(),this.expressionParser=null;for(var e=0,n=this.keyframeControllers.length;e<n;e++)this.keyframeControllers[e].destroy();this.keyframeControllers=null,this.position=null,this.viewableRange=null,this.gui&&(this.gui.destroy(),this.gui=null),this.metrics.destroy(),this.metrics=null,this.rafEmitter.destroy(),this.rafEmitter=null,this.anim=null,this.element._animInfo&&this.element._animInfo.group===this&&(this.element._animInfo.group=null,this.element._animInfo=null),this.element=null,this.isEnabled=!1,(0,u["default"])((0,c["default"])(t.prototype),"destroy",this).call(this)}},{key:"removeKeyframeController",value:function(e){var t=this;return this.keyframeControllers.includes(e)?(e._allKeyframes.forEach(function(e){return e.markedForRemoval=!0}),this.keyframesDirty=!0,new Promise(function(n){g.draw(function(){var r=t.keyframeControllers.indexOf(e);return r===-1?void n():(t.keyframeControllers.splice(r,1),e.onDOMWrite(),e.destroy(),t.gui&&t.gui.create(),void n())})})):Promise.resolve()}},{key:"remove",value:function(){return this.anim.removeGroup(this)}},{key:"setupRAFEmitter",value:function(e){var t=this;this.rafEmitter&&this.rafEmitter.destroy(),this.rafEmitter=e||new g.create,this.rafEmitter.on("update",this.onDOMRead),this.rafEmitter.on("draw",this.onDOMWrite),this.rafEmitter.once("external",function(){return t.reconcile()})}},{key:"requestDOMChange",value:function(){return!!this.isEnabled&&this.rafEmitter.run()}},{key:"onDOMRead",value:function(){this.keyframesDirty&&this.onKeyframesDirty();for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].onDOMRead(this.position.local)}},{key:"onDOMWrite",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].onDOMWrite();this.needsUpdate()&&this.requestDOMChange()}},{key:"needsUpdate",value:function(){if(this._keyframesDirty)return!0;for(var e=0,t=this.keyframeControllers.length;e<t;e++)if(this.keyframeControllers[e].needsUpdate())return!0;return!1}},{key:"addKeyframe",value:function(e,t){var n=this.getControllerForTarget(e);return null===n&&(n=new v(this,e),this.keyframeControllers.push(n)),this.keyframesDirty=!0,n.addKeyframe(t)}},{key:"forceUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.waitForNextUpdate,n=void 0===t||t,r=e.silent,i=void 0!==r&&r;this.isEnabled&&(this.refreshMetrics(),this.timelineUpdateRequired=!0,n?this.keyframesDirty=!0:this.onKeyframesDirty({silent:i}))}},{key:"onKeyframesDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.silent,n=void 0!==t&&t;this.determineActiveKeyframes(),this.keyframesDirty=!1,this.metrics.refreshMetrics(this.element),this.viewableRange=this.createViewableRange();for(var r=0,i=this.keyframeControllers.length;r<i;r++)this.keyframeControllers[r].updateAnimationConstraints();this.updateBounds(),this.updateProgress(this.getPosition()),n||this._onScroll(),this.gui&&this.gui.create()}},{key:"refreshMetrics",value:function(){var e=new Set([this.element]);this.keyframeControllers.forEach(function(t){e.add(t.element),t._allKeyframes.forEach(function(t){return t.anchors.forEach(function(t){return e.add(t)})})}),this.metrics.refreshCollection(e),this.viewableRange=this.createViewableRange()}},{key:"reconcile",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].reconcile()}},{key:"determineActiveKeyframes",value:function(e){e=e||p(Array.from(document.documentElement.classList));for(var t=0,n=this.keyframeControllers.length;t<n;t++)this.keyframeControllers[t].determineActiveKeyframes(e)}},{key:"updateBounds",value:function(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);for(var e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},t=0,n=this.keyframeControllers.length;t<n;t++)this.keyframeControllers[t].getBounds(e);var r=this.convertTValueToScrollPosition(e.min),i=this.convertTValueToScrollPosition(e.max);i-r<d.pageMetrics.windowHeight?(e.min=this.convertScrollPositionToTValue(r-.5*d.pageMetrics.windowHeight),e.max=this.convertScrollPositionToTValue(i+.5*d.pageMetrics.windowHeight)):(e.min-=.001,e.max+=.001),this.boundsMin=e.min,this.boundsMax=e.max,this.timelineUpdateRequired=!0}},{key:"createViewableRange",value:function(){return new d.ViewableRange(this.metrics.get(this.element),d.pageMetrics.windowHeight)}},{key:"_onBreakpointChange",value:function(e,t){this.keyframesDirty=!0,this.determineActiveKeyframes()}},{key:"updateProgress",value:function(e){return this.hasDuration()?(this.position.localUnclamped=(e-this.viewableRange.a)/(this.viewableRange.d-this.viewableRange.a),void(this.position.local=f.clamp(this.position.localUnclamped,this.boundsMin,this.boundsMax))):void(this.position.local=this.position.localUnclamped=0)}},{key:"performTimelineDispatch",value:function(){for(var e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].updateLocalProgress(this.position.local);this.trigger(d.EVENTS.ON_TIMELINE_UPDATE,this.position.local),this.timelineUpdateRequired=!1,this.position.lastPosition!==this.position.local&&(this.position.lastPosition<=this.boundsMin&&this.position.localUnclamped>this.boundsMin?this.trigger(d.EVENTS.ON_TIMELINE_START,this):this.position.lastPosition>=this.boundsMin&&this.position.localUnclamped<this.boundsMin?this.trigger(d.EVENTS.ON_TIMELINE_START+":reverse",this):this.position.lastPosition<=this.boundsMax&&this.position.localUnclamped>=this.boundsMax?this.trigger(d.EVENTS.ON_TIMELINE_COMPLETE,this):this.position.lastPosition>=this.boundsMax&&this.position.localUnclamped<this.boundsMax&&this.trigger(d.EVENTS.ON_TIMELINE_COMPLETE+":reverse",this)),null!==this.gui&&this.gui.onScrollUpdate(this.position)}},{key:"_onScroll",value:function(e){if(!this.isEnabled)return!1;void 0===e&&(e=this.getPosition()),this.updateProgress(e);var t=this.position.lastPosition===this.boundsMin||this.position.lastPosition===this.boundsMax,n=this.position.localUnclamped===this.boundsMin||this.position.localUnclamped===this.boundsMax;if(!this.timelineUpdateRequired&&t&&n&&this.position.lastPosition===e)return void(this.position.local=this.position.localUnclamped);if(this.timelineUpdateRequired||this.position.localUnclamped>this.boundsMin&&this.position.localUnclamped<this.boundsMax)return this.performTimelineDispatch(),this.requestDOMChange(),void(this.position.lastPosition=this.position.localUnclamped);var r=this.position.lastPosition>this.boundsMin&&this.position.lastPosition<this.boundsMax,i=this.position.localUnclamped<=this.boundsMin||this.position.localUnclamped>=this.boundsMax;if(r&&i)return this.performTimelineDispatch(),this.requestDOMChange(),void(this.position.lastPosition=this.position.localUnclamped);var a=this.position.lastPosition<this.boundsMin&&this.position.localUnclamped>this.boundsMax,o=this.position.lastPosition>this.boundsMax&&this.position.localUnclamped<this.boundsMax;(a||o)&&(this.performTimelineDispatch(),this.requestDOMChange(),this.position.lastPosition=this.position.localUnclamped),null!==this.gui&&this.gui.onScrollUpdate(this.position)}},{key:"convertScrollPositionToTValue",value:function(e){return this.hasDuration()?f.map(e,this.viewableRange.a,this.viewableRange.d,0,1):0}},{key:"convertTValueToScrollPosition",value:function(e){return this.hasDuration()?f.map(e,0,1,this.viewableRange.a,this.viewableRange.d):0}},{key:"hasDuration",value:function(){return this.viewableRange.a!==this.viewableRange.d}},{key:"getPosition",value:function(){return d.pageMetrics.scrollY}},{key:"getControllerForTarget",value:function(e){if(!e._animInfo||!e._animInfo.controllers)return null;if(e._animInfo.controller&&e._animInfo.controller.group===this)return e._animInfo.controller;for(var t=e._animInfo.controllers,n=0,r=t.length;n<r;n++)if(t[n].group===this)return t[n];return null}},{key:"trigger",value:function(e,t){if("undefined"!=typeof this._events[e])for(var n=this._events[e].length-1;n>=0;n--)void 0!==t?this._events[e][n](t):this._events[e][n]()}},{key:"keyframesDirty",set:function(e){this._keyframesDirty=e,this._keyframesDirty&&this.requestDOMChange()},get:function(){return this._keyframesDirty}}]),t}(l);t.exports=b},{18:18,19:19,21:21,22:22,23:23,24:24,25:25,30:30,42:42,48:48,5:5,52:52,61:61,64:64,66:66,72:72,76:76,85:85}],75:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a=r(e(21)),o=r(e(30)),s=r(e(18)),c=r(e(23)),u=r(e(22)),h=r(e(24)),l=e(74),f=e(85),p=0,d={
create:e(42)},m=function(e){function t(e,n){var r;return(0,i["default"])(this,t),e||(e=document.createElement("div"),e.className="TimeGroup-"+p++),r=(0,o["default"])(this,(0,c["default"])(t).call(this,e,n)),window.timeGroup=window.timeGroup||(0,s["default"])(r),r.name=r.name||e.getAttribute("data-anim-time-group"),r._isPaused=!0,r._repeats=0,r._isReversed=!1,r._timeScale=1,r}return(0,h["default"])(t,e),(0,a["default"])(t,[{key:"finalizeInit",value:function(){if(!this.anim)throw"TimeGroup not instantiated correctly. Please use `AnimSystem.createTimeGroup(el)`";this.defaultEase=1,this.onPlayTimeUpdate=this.onPlayTimeUpdate.bind(this),(0,u["default"])((0,c["default"])(t.prototype),"finalizeInit",this).call(this)}},{key:"progress",value:function(e){if(void 0===e)return 0===this.boundsMax?0:this.position.local/this.boundsMax;var t=e*this.boundsMax;this.timelineUpdateRequired=!0,this._onScroll(t)}},{key:"time",value:function(e){return void 0===e?this.position.local:(e=f.clamp(e,this.boundsMin,this.boundsMax),this.timelineUpdateRequired=!0,void this._onScroll(e))}},{key:"play",value:function(e){this.reversed(!1),this.isEnabled=!0,this._isPaused=!1,this.time(e),this._playheadEmitter.run()}},{key:"reverse",value:function(e){this.reversed(!0),this.isEnabled=!0,this._isPaused=!1,this.time(e),this._playheadEmitter.run()}},{key:"reversed",value:function(e){return void 0===e?this._isReversed:void(this._isReversed=e)}},{key:"restart",value:function(){this._isReversed?(this.progress(1),this.reverse(this.time())):(this.progress(0),this.play(this.time()))}},{key:"pause",value:function(e){this.time(e),this._isPaused=!0}},{key:"paused",value:function(e){return void 0===e?this._isPaused:(this._isPaused=e,this._isPaused||this.play(),this)}},{key:"onPlayTimeUpdate",value:function(e){if(!this._isPaused){var n=f.clamp(e.delta/1e3,0,.5);this._isReversed&&(n=-n);var r=this.time(),i=r+n*this._timeScale;if(this._repeats===t.REPEAT_FOREVER||this._repeats>0){var a=!1;!this._isReversed&&i>this.boundsMax?(i-=this.boundsMax,a=!0):this._isReversed&&i<0&&(i=this.boundsMax+i,a=!0),a&&(this._repeats=this._repeats===t.REPEAT_FOREVER?t.REPEAT_FOREVER:this._repeats-1)}this.time(i);var o=!this._isReversed&&this.position.local!==this.duration,s=this._isReversed&&0!==this.position.local;o||s?this._playheadEmitter.run():this.paused(!0)}}},{key:"updateProgress",value:function(e){return this.hasDuration()?(this.position.localUnclamped=e,void(this.position.local=f.clamp(this.position.localUnclamped,this.boundsMin,this.boundsMax))):void(this.position.local=this.position.localUnclamped=0)}},{key:"updateBounds",value:function(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);for(var e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},t=0,n=this.keyframeControllers.length;t<n;t++)this.keyframeControllers[t].getBounds(e);this.boundsMin=0,this.boundsMax=e.max,this.viewableRange.a=this.viewableRange.b=0,this.viewableRange.c=this.viewableRange.d=this.boundsMax,this.timelineUpdateRequired=!0}},{key:"setupRAFEmitter",value:function(e){this._playheadEmitter=new d.create,this._playheadEmitter.on("update",this.onPlayTimeUpdate),(0,u["default"])((0,c["default"])(t.prototype),"setupRAFEmitter",this).call(this,e)}},{key:"timeScale",value:function(e){return void 0===e?this._timeScale:(this._timeScale=e,this)}},{key:"repeats",value:function(e){return void 0===e?this._repeats:void(this._repeats=e)}},{key:"getPosition",value:function(){return this.position.local}},{key:"convertScrollPositionToTValue",value:function(e){return e}},{key:"convertTValueToScrollPosition",value:function(e){return e}},{key:"hasDuration",value:function(){return this.duration>0}},{key:"destroy",value:function(){this._playheadEmitter.destroy(),this._playheadEmitter=null,(0,u["default"])((0,c["default"])(t.prototype),"destroy",this).call(this)}},{key:"duration",get:function(){return this.keyframesDirty&&this.onKeyframesDirty({silent:!0}),this.boundsMax}}]),t}(l);m.REPEAT_FOREVER=-1,t.exports=m},{18:18,19:19,21:21,22:22,23:23,24:24,25:25,30:30,42:42,74:74,85:85}],76:[function(e,t,n){"use strict";var r=function(e){return e.reduce(function(e,t){return e[t]=t,e},{})};t.exports=r},{}],77:[function(e,t,n){"use strict";t.exports=function(e,t){if("string"!=typeof e)return e;try{return(t||document).querySelector(e)||document.querySelector(e)}catch(n){return!1}}},{}],78:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a=r(e(21)),o=r(e(30)),s=r(e(23)),c=r(e(22)),u=r(e(24)),h=e(5).EventEmitterMicro,l=e(64),f={create:e(42),update:e(52),draw:e(48)},p=function(){},d=0,m=function(e){function t(e){var n;return(0,i["default"])(this,t),n=(0,o["default"])(this,(0,s["default"])(t).call(this)),n.el=e.el,n.gum=e.gum,n.componentName=e.componentName,n._keyframeController=null,n}return(0,u["default"])(t,e),(0,a["default"])(t,[{key:"destroy",value:function(){this.el=null,this.gum=null,this._keyframeController=null,(0,c["default"])((0,s["default"])(t.prototype),"destroy",this).call(this)}},{key:"addKeyframe",value:function(e){var t=e.el||this.el;return(e.group||this.anim).addKeyframe(t,e)}},{key:"addDiscreteEvent",value:function(e){e.event=e.event||"Generic-Event-Name-"+d++;var t=void 0!==e.end&&e.end!==e.start,n=this.addKeyframe(e);return t?(e.onEnterOnce&&n.controller.once(e.event+":enter",e.onEnterOnce),e.onExitOnce&&n.controller.once(e.event+":exit",e.onExitOnce),e.onEnter&&n.controller.on(e.event+":enter",e.onEnter),e.onExit&&n.controller.on(e.event+":exit",e.onExit)):(e.onEventOnce&&n.controller.once(e.event,e.onEventOnce),e.onEventReverseOnce&&n.controller.once(e.event+":reverse",e.onEventReverseOnce),e.onEvent&&n.controller.on(e.event,e.onEvent),e.onEventReverse&&n.controller.on(e.event+":reverse",e.onEventReverse)),n}},{key:"addRAFLoop",value:function(e){var t=["start","end"];if(!t.every(function(t){return e.hasOwnProperty(t)}))return void console.log("BubbleGum.BaseComponent::addRAFLoop required options are missing: "+t.join(" "));var n=new f.create;n.on("update",e.onUpdate||p),n.on("draw",e.onDraw||p),n.on("draw",function(){return n.run()});var r=e.onEnter,i=e.onExit;return e.onEnter=function(){n.run(),r?r():0},e.onExit=function(){n.cancel(),i?i():0},this.addDiscreteEvent(e)}},{key:"addContinuousEvent",value:function(e){e.onDraw||console.log("BubbleGum.BaseComponent::addContinuousEvent required option `onDraw` is missing. Consider using a regular keyframe if you do not need a callback"),e.event=e.event||"Generic-Event-Name-"+d++;var t=this.addKeyframe(e);return t.controller.on(e.event,e.onDraw),t}},{key:"mounted",value:function(){}},{key:"onResizeImmediate",value:function(e){}},{key:"onResizeDebounced",value:function(e){}},{key:"onBreakpointChange",value:function(e){}},{key:"anim",get:function(){return this.gum.anim}},{key:"keyframeController",get:function(){return this._keyframeController||(this._keyframeController=this.anim.getControllerForTarget(this.el))}},{key:"pageMetrics",get:function(){return l.pageMetrics}}]),t}(h);t.exports=m},{19:19,21:21,22:22,23:23,24:24,25:25,30:30,42:42,48:48,5:5,52:52,64:64}],79:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a=r(e(21)),o=r(e(30)),s=r(e(23)),c=r(e(24)),u=e(5).EventEmitterMicro,h=e(82),l=e(58),f=e(64),p=e(80),d={},m=function(e){function t(e){var n;return(0,i["default"])(this,t),n=(0,o["default"])(this,(0,s["default"])(t).call(this)),n.el=e,n.anim=l,n.components=[],n.el.getAttribute("data-anim-scroll-group")||n.el.setAttribute("data-anim-scroll-group","bubble-gum-group"),l.on(f.EVENTS.ON_DOM_GROUPS_CREATED,function(e){n.componentsInitialized=!1,n.initComponents(),n.setupEvents()}),l.on(f.EVENTS.ON_DOM_KEYFRAMES_CREATED,function(){n.components.forEach(function(e){return e.mounted()}),n.trigger(t.EVENTS.DOM_COMPONENTS_MOUNTED)}),h.add(function(){return l.initialize()}),n}return(0,c["default"])(t,e),(0,a["default"])(t,[{key:"initComponents",value:function(){var e=Array.prototype.slice.call(this.el.querySelectorAll("[data-component-list]"));this.el.hasAttribute("data-component-list")&&e.push(this.el);for(var t=0;t<e.length;t++)for(var n=e[t],r=n.getAttribute("data-component-list"),i=r.split(" "),a=0,o=i.length;a<o;a++){var s=i[a];""!==s&&" "!==s&&this.addComponent({el:n,componentName:s})}this.componentsInitialized=!0}},{key:"setupEvents",value:function(){this.onResizeDebounced=this.onResizeDebounced.bind(this),this.onResizeImmediate=this.onResizeImmediate.bind(this),this.onBreakpointChange=this.onBreakpointChange.bind(this),l.on(f.PageEvents.ON_RESIZE_IMMEDIATE,this.onResizeImmediate),l.on(f.PageEvents.ON_RESIZE_DEBOUNCED,this.onResizeDebounced),l.on(f.PageEvents.ON_BREAKPOINT_CHANGE,this.onBreakpointChange)}},{key:"addComponent",value:function(e){var n=e.el,r=e.componentName,i=e.data;if(!p.hasOwnProperty(r))throw"BubbleGum::addComponent could not add component to '"+n.className+"'. No component type '"+r+"' found!";var a=p[r];if(!t.componentIsSupported(a,r))return void 0===d[r]&&(console.log("BubbleGum::addComponent unsupported component '"+r+"'. Reason: '"+r+".IS_SUPPORTED' returned false"),d[r]=!0),null;var o=n.dataset.componentList||"";o.includes(r)||(n.dataset.componentList=o.split(" ").concat(r).join(" "));var s=new a({el:n,data:i,componentName:e.componentName,gum:this,pageMetrics:f.pageMetrics});return this.components.push(s),this.componentsInitialized&&s.mounted(),s}},{key:"removeComponent",value:function(e){var t=this.components.indexOf(e);t!==-1&&(this.components.splice(t,1),e.el.dataset.componentList=e.el.dataset.componentList.split(" ").filter(function(t){return t!==e.componentName}).join(" "),e.destroy())}},{key:"getComponentOfType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,n="[data-component-list*="+e+"]",r=t.matches(n)?t:t.querySelector(n);return r?this.components.find(function(t){return t instanceof p[e]&&t.el===r}):null}},{key:"getComponentsOfType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement,n="[data-component-list*="+e+"]",r=t.matches(n)?[t]:Array.from(t.querySelectorAll(n));return this.components.filter(function(t){return t instanceof p[e]&&r.includes(t.el)})}},{key:"getComponentsForElement",value:function(e){return this.components.filter(function(t){return t.el===e})}},{key:"onResizeImmediate",value:function(){this.components.forEach(function(e){return e.onResizeImmediate(f.pageMetrics)})}},{key:"onResizeDebounced",value:function(){this.components.forEach(function(e){return e.onResizeDebounced(f.pageMetrics)})}},{key:"onBreakpointChange",value:function(){this.components.forEach(function(e){return e.onBreakpointChange(f.pageMetrics)})}}],[{key:"componentIsSupported",value:function(e,t){var n=e.IS_SUPPORTED;if(void 0===n)return!0;if("function"!=typeof n)return console.error('BubbleGum::addComponent error in "'+t+'".IS_SUPPORTED - it should be a function which returns true/false'),!0;var r=e.IS_SUPPORTED();return void 0===r?(console.error('BubbleGum::addComponent error in "'+t+'".IS_SUPPORTED - it should be a function which returns true/false'),!0):r}}]),t}(u);m.EVENTS={DOM_COMPONENTS_MOUNTED:"DOM_COMPONENTS_MOUNTED"},t.exports=m},{19:19,21:21,23:23,24:24,25:25,30:30,5:5,58:58,64:64,80:80,82:82}],80:[function(e,t,n){"use strict";t.exports={BaseComponent:e(78)}},{78:78}],81:[function(e,t,n){"use strict";var r={create:e(89),invert:e(90),clone:e(88),transpose:e(95)},i={create:e(98),dot:e(100),normalize:e(103),length:e(102),cross:e(99),fromValues:e(101)},a={create:e(104),transformMat4:e(106),fromValues:e(105)},o=(Math.PI/180,180/Math.PI),s=0,c=1,u=3,h=4,l=5,f=7,p=11,d=12,m=13,y=15,v=function(e,t){t=t||!1;for(var n=r.clone(e),s=i.create(),c=i.create(),h=i.create(),l=a.create(),d=a.create(),m=(i.create(),0);m<16;m++)n[m]/=n[y];var v=r.clone(n);v[u]=0,v[f]=0,v[p]=0,v[y]=1;var _=(n[3],n[7],n[11],n[12]),w=n[13],k=n[14],S=(n[15],a.create());if(E(n[u])&&E(n[f])&&E(n[p]))l=a.fromValues(0,0,0,1);else{S[0]=n[u],S[1]=n[f],S[2]=n[p],S[3]=n[y];var x=r.invert(r.create(),v),O=r.transpose(r.create(),x);l=a.transformMat4(l,S,O)}s[0]=_,s[1]=w,s[2]=k;var T=[i.create(),i.create(),i.create()];T[0][0]=n[0],T[0][1]=n[1],T[0][2]=n[2],T[1][0]=n[4],T[1][1]=n[5],T[1][2]=n[6],T[2][0]=n[8],T[2][1]=n[9],T[2][2]=n[10],c[0]=i.length(T[0]),i.normalize(T[0],T[0]),h[0]=i.dot(T[0],T[1]),T[1]=g(T[1],T[0],1,-h[0]),c[1]=i.length(T[1]),i.normalize(T[1],T[1]),h[0]/=c[1],h[1]=i.dot(T[0],T[2]),T[2]=g(T[2],T[0],1,-h[1]),h[2]=i.dot(T[1],T[2]),T[2]=g(T[2],T[1],1,-h[2]),c[2]=i.length(T[2]),i.normalize(T[2],T[2]),h[1]/=c[2],h[2]/=c[2];var A=i.cross(i.create(),T[1],T[2]);if(i.dot(T[0],A)<0)for(m=0;m<3;m++)c[m]*=-1,T[m][0]*=-1,T[m][1]*=-1,T[m][2]*=-1;d[0]=.5*Math.sqrt(Math.max(1+T[0][0]-T[1][1]-T[2][2],0)),d[1]=.5*Math.sqrt(Math.max(1-T[0][0]+T[1][1]-T[2][2],0)),d[2]=.5*Math.sqrt(Math.max(1-T[0][0]-T[1][1]+T[2][2],0)),d[3]=.5*Math.sqrt(Math.max(1+T[0][0]+T[1][1]+T[2][2],0)),T[2][1]>T[1][2]&&(d[0]=-d[0]),T[0][2]>T[2][0]&&(d[1]=-d[1]),T[1][0]>T[0][1]&&(d[2]=-d[2]);var M=a.fromValues(d[0],d[1],d[2],2*Math.acos(d[3])),P=b(d);return t&&(h[0]=Math.round(h[0]*o*100)/100,h[1]=Math.round(h[1]*o*100)/100,h[2]=Math.round(h[2]*o*100)/100,P[0]=Math.round(P[0]*o*100)/100,P[1]=Math.round(P[1]*o*100)/100,P[2]=Math.round(P[2]*o*100)/100,M[3]=Math.round(M[3]*o*100)/100),{translation:s,scale:c,skew:h,perspective:l,quaternion:d,eulerRotation:P,axisAngle:M}},g=function(e,t,n,r){var a=i.create();return a[0]=n*e[0]+r*t[0],a[1]=n*e[1]+r*t[1],a[2]=n*e[2]+r*t[2],a},b=function(e){var t,n,r,a=e[3]*e[3],o=e[0]*e[0],s=e[1]*e[1],c=e[2]*e[2],u=o+s+c+a,h=e[0]*e[1]+e[2]*e[3];return h>.499*u?(n=2*Math.atan2(e[0],e[3]),r=Math.PI/2,t=0,i.fromValues(t,n,r)):h<-.499*u?(n=-2*Math.atan2(e[0],e[3]),r=-Math.PI/2,t=0,i.fromValues(t,n,r)):(n=Math.atan2(2*e[1]*e[3]-2*e[0]*e[2],o-s-c+a),r=Math.asin(2*h/u),t=Math.atan2(2*e[0]*e[3]-2*e[1]*e[2],-o+s-c+a),i.fromValues(t,n,r))},E=function(e){return Math.abs(e)<1e-4},_=function(e){var t=String(getComputedStyle(e).transform).trim(),n=r.create();if("none"===t||""===t)return n;var i,a,o=t.slice(0,t.indexOf("("));if("matrix3d"===o)for(i=t.slice(9,-1).split(","),a=0;a<i.length;a++)n[a]=parseFloat(i[a]);else{if("matrix"!==o)throw new TypeError("Invalid Matrix Value");for(i=t.slice(7,-1).split(","),a=i.length;a--;)i[a]=parseFloat(i[a]);n[s]=i[0],n[c]=i[1],n[d]=i[4],n[h]=i[2],n[l]=i[3],n[m]=i[5]}return n};t.exports=function(e,t){var n=_(e);return v(n,t)}},{100:100,101:101,102:102,103:103,104:104,105:105,106:106,88:88,89:89,90:90,95:95,98:98,99:99}],82:[function(e,t,n){"use strict";var r=!1,i=!1,a=[];t.exports={NUMBER_OF_FRAMES_TO_WAIT:30,add:function(e){var t=this;if(i&&e(),a.push(e),!r){r=!0;var n=document.documentElement.scrollHeight,o=0,s=function c(){var e=document.documentElement.scrollHeight;if(n!==e)o=0;else if(o++,o>=t.NUMBER_OF_FRAMES_TO_WAIT)return void a.forEach(function(e){return e()});n=e,requestAnimationFrame(c)};requestAnimationFrame(s)}}}},{}],83:[function(e,t,n){"use strict";var r=e(4),i=e(84),a=e(2).ELEMENT;t.exports=function(e,t,n,o){if(i.childNode(e,"ancestors"),i.selector(t,"ancestors"),n&&r(e,a)&&(!t||e.matches(t)))return e;if(o=o||document.body,e!==o)for(;(e=e.parentNode)&&r(e,a);){if(!t||e.matches(t))return e;if(e===o)break}return null}},{2:2,4:4,84:84}],84:[function(e,t,n){"use strict";var r=e(4),i=e(2),a=i.COMMENT,o=i.DOCUMENT_FRAGMENT,s=i.DOCUMENT,c=i.ELEMENT,u=i.TEXT,h=[c,s,o],l=" must be an Element, Document, or Document Fragment",f=[c,u,a],p=" must be an Element, TextNode, or Comment",d=" must be a string";t.exports={parentNode:function(e,t){if(!e||!r(e,h))throw new TypeError(t+": node"+l)},childNode:function(e,t){if(!e||!r(e,f))throw new TypeError(t+": node"+p)},selector:function(e,t,n){if(n="boolean"==typeof n&&n,(e||n)&&"string"!=typeof e)throw new TypeError(t+": selector"+d)}}},{2:2,4:4}],85:[function(e,t,n){"use strict";t.exports={lerp:function(e,t,n){return t+(n-t)*e},map:function(e,t,n,r,i){return r+(i-r)*(e-t)/(n-t)},mapClamp:function(e,t,n,r,i){var a=r+(i-r)*(e-t)/(n-t);return Math.max(r,Math.min(i,a))},norm:function(e,t,n){return(e-t)/(n-t)},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},randFloat:function(e,t){return Math.random()*(t-e)+e},randInt:function(e,t){return Math.floor(Math.random()*(t-e)+e)}}},{}],86:[function(e,t,n){"use strict";var r=e(25),i=r(e(19)),a=r(e(21)),o=r(e(30)),s=r(e(18)),c=r(e(23)),u=r(e(22)),h=r(e(24)),l=e(5).EventEmitterMicro,f=[{name:"S",mediaQuery:"only screen and (max-width: 734px)"},{name:"M",mediaQuery:"only screen and (min-width: 735px) and (max-width: 1068px)  "},{name:"L",mediaQuery:"only screen and (min-width: 1069px) and (max-width: 1440px)"},{name:"X",mediaQuery:"only screen and (min-width: 1441px)"}],p="only screen and (-webkit-min-device-pixel-ratio: 1.5), screen and (min-resolution: 1.5dppx), screen and (min-resolution: 144dpi)",d="only screen and (orientation: portrait)",m=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i["default"])(this,t),e=(0,o["default"])(this,(0,c["default"])(t).call(this)),e.BREAKPOINTS=n.breakpoints||f,e._setupProperties(),e._onRetinaChange=e._onRetinaChange.bind((0,s["default"])(e)),e._onOrientationChange=e._onOrientationChange.bind((0,s["default"])(e)),e.listenersAdded={orientation:!1,retina:!1,viewport:!1},e}return(0,h["default"])(t,e),(0,a["default"])(t,[{key:"on",value:function(){this._setupListeners(arguments[0]),(0,u["default"])((0,c["default"])(t.prototype),"on",this).apply(this,arguments)}},{key:"_onRetinaChange",value:function(){this.trigger(t.CHANGE_EVENTS.RETINA,this)}},{key:"_onOrientationChange",value:function(){this.trigger(t.CHANGE_EVENTS.ORIENTATION,this)}},{key:"_setupProperties",value:function(){Object.defineProperty(this,"retina",{get:function(){return window.matchMedia(p).matches}}),Object.defineProperty(this,"orientation",{get:function(){return window.matchMedia(d).matches?"portrait":"landscape"}}),this.viewport=this.getBreakpoint()}},{key:"_setupListeners",value:function(e){var n=this;if(e!==t.CHANGE_EVENTS.RETINA||this.listenersAdded.retina||(window.matchMedia(p).addListener(this._onRetinaChange),this.listenersAdded.retina=!0),e!==t.CHANGE_EVENTS.ORIENTATION||this.listenersAdded.orientation||(window.matchMedia(d).addListener(this._onOrientationChange),this.listenersAdded.orientation=!0),e===t.CHANGE_EVENTS.VIEWPORT&&!this.listenersAdded.viewport){for(var r=function(e){var r=n.BREAKPOINTS[e];window.matchMedia(r.mediaQuery).addListener(function(e){e.matches&&(n.oldViewport=n.viewport,n.viewport=r.name,n.trigger(t.CHANGE_EVENTS.VIEWPORT,n))})},i=0;i<this.BREAKPOINTS.length;i++)r(i);this.listenersAdded.viewport=!0}}},{key:"getBreakpoint",value:function(){for(var e=0;e<this.BREAKPOINTS.length;e++){var t=this.BREAKPOINTS[e],n=window.matchMedia(t.mediaQuery);if(n.matches)return t.name}}}],[{key:"CHANGE_EVENTS",get:function(){return{ORIENTATION:"change:orientation",RETINA:"change:retina",VIEWPORT:"change:viewport"}}}]),t}(l);t.exports=m},{18:18,19:19,21:21,22:22,23:23,24:24,25:25,30:30,5:5}],87:[function(e,t,n){function r(e){return f[125613361*(e&-e)>>>27]}function i(e){return e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e=(e>>1)+1,f[125613361*e>>>27]}function a(e,t,n){var r=(1<<t)-1<<n;return e^r}function o(e,t,n){var r=(1<<t)-1<<n;return e|r}function s(e,t,n){var r=2147483647^(1<<t)-1<<n;return e&r}function c(e,t){return e&t}function u(e,t){return e|t}function h(e,t){return e^t}var l=31,f=[0,1,28,2,29,14,24,3,30,22,20,15,25,17,4,8,31,27,13,23,21,19,16,7,26,12,18,6,11,5,10,9];BitSet=function(e){var t,n,r,i,a;if("number"==typeof e)e=e||l,t=Math.ceil(e/l),this.arr=new Uint32Array(t),this.MAX_BIT=e-1;else{if(n=JSON.parse("["+e+"]"),this.MAX_BIT=n.pop(),i=n.pop(),i>0){for(r=[],a=0;a<i;a++)r[a]=0;for(a=0;a<n.length;a++)r[i+a]=n[a];n=r}t=Math.ceil((this.MAX_BIT+1)/l),this.arr=new Uint32Array(t),this.arr.set(n)}},BitSet.prototype.get=function(e){var t=this._getWord(e);return t!==-1&&1===(this.arr[t]>>e%l&1)},BitSet.prototype.set=function(e){var t=this._getWord(e);return t!==-1&&(this.arr[t]|=1<<e%l,!0)},BitSet.prototype.setRange=function(e,t){return this._doRange(e,t,o)},BitSet.prototype.unset=function(e){var t=this._getWord(e);return t!==-1&&(this.arr[t]&=~(1<<e%l),!0)},BitSet.prototype.unsetRange=function(e,t){return this._doRange(e,t,s)},BitSet.prototype.toggle=function(e){var t=this._getWord(e);return t!==-1&&(this.arr[t]^=1<<e%l,!0)},BitSet.prototype.toggleRange=function(e,t){return this._doRange(e,t,a)},BitSet.prototype.clear=function(){for(var e=0;e<this.arr.length;e++)this.arr[e]=0;return!0},BitSet.prototype.clone=function(){return new BitSet(this.dehydrate())},BitSet.prototype.dehydrate=function(){var e,t,n,r=0;for(e=0;e<this.arr.length&&0===this.arr[e];e++)r++;for(e=this.arr.length-1;e>=r;e--)if(0!==this.arr[e]){t=e;break}for(n="",e=r;e<=t;e++)n+=this.arr[e]+",";return n+=r+","+this.MAX_BIT},BitSet.prototype.and=function(e){return this._op(e,c)},BitSet.prototype.or=function(e){return this._op(e,u)},BitSet.prototype.xor=function(e){return this._op(e,h)},BitSet.prototype.forEach=function(e){for(var t=this.ffs();t!==-1;t=this.nextSetBit(t+1))e(t)},BitSet.prototype.getCardinality=function(){for(var e=0,t=this.arr.length-1;t>=0;t--){var n=this.arr[t];n-=n>>1&1431655765,n=(858993459&n)+(n>>2&858993459),e+=16843009*(n+(n>>4)&252645135)>>24}return e},BitSet.prototype.getIndices=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},BitSet.prototype.isSubsetOf=function(e){for(var t=this.arr,n=e.arr,r=t.length,i=0;i<r;i++)if((t[i]&n[i])!==t[i])return!1;return!0},BitSet.prototype.isEmpty=function(){var e,t;for(t=this.arr,e=0;e<t.length;e++)if(t[e])return!1;return!0},BitSet.prototype.isEqual=function(e){var t;for(t=0;t<this.arr.length;t++)if(this.arr[t]!==e.arr[t])return!1;return!0},BitSet.prototype.toString=function(){var e,t,n="";for(e=this.arr.length-1;e>=0;e--)t=this.arr[e].toString(2),n+=("0000000000000000000000000000000"+t).slice(-l);return n},BitSet.prototype.ffs=function(e){var t,n,i=-1;for(e=e||0,n=e;n<this.arr.length;n++)if(t=this.arr[n],0!==t){i=r(t)+n*l;break}return i<=this.MAX_BIT?i:-1},BitSet.prototype.ffz=function(e){var t,n,i=-1;for(e=e||0,t=e;t<this.arr.length;t++)if(n=this.arr[t],2147483647!==n){n^=2147483647,i=r(n)+t*l;break}return i<=this.MAX_BIT?i:-1},BitSet.prototype.fls=function(e){var t,n,r=-1;for(void 0===e&&(e=this.arr.length-1),t=e;t>=0;t--)if(n=this.arr[t],0!==n){r=i(n)+t*l;break}return r},BitSet.prototype.flz=function(e){var t,n,r=-1;for(void 0===e&&(e=this.arr.length-1),t=e;t>=0;t--){if(n=this.arr[t],t===this.arr.length-1){var a=this.MAX_BIT%l,o=l-a-1;n|=(1<<o)-1<<a+1}if(2147483647!==n){n^=2147483647,r=i(n)+t*l;break}}return r},BitSet.prototype.nextSetBit=function(e){var t=this._getWord(e);if(t===-1)return-1;var n=e%l,i=l-n,a=(1<<i)-1<<n,o=this.arr[t]&a;return o>0?r(o)+t*l:this.ffs(t+1)},BitSet.prototype.nextUnsetBit=function(e){var t=this._getWord(e);if(t===-1)return-1;var n=(1<<e%l)-1,i=this.arr[t]|n;return 2147483647===i?this.ffz(t+1):r(2147483647^i)+t*l},BitSet.prototype.previousSetBit=function(e){var t=this._getWord(e);if(t===-1)return-1;var n=2147483647>>>l-e%l-1,r=this.arr[t]&n;return r>0?i(r)+t*l:this.fls(t-1)},BitSet.prototype.previousUnsetBit=function(e){var t=this._getWord(e);if(t===-1)return-1;var n=e%l,r=(1<<l-n-1)-1<<n+1,a=this.arr[t]|r;return 2147483647===a?this.flz(t-1):i(2147483647^a)+t*l},BitSet.prototype._getWord=function(e){return e<0||e>this.MAX_BIT?-1:~~(e/l)},BitSet.prototype._doRange=function(e,t,n){var r,i,a,o;t<e&&(t^=e,e^=t,t^=e);var s=this._getWord(e),c=this._getWord(t);if(s===-1||c===-1)return!1;for(r=s;r<=c;r++)i=r===s?e%l:0,a=r===c?t%l:l-1,o=a-i+1,this.arr[r]=n(this.arr[r],o,i);return!0},BitSet.prototype._op=function(e,t){var n,r,i,a,o,s;if(r=this.arr,"number"==typeof e)s=this._getWord(e),o=this.clone(),s!==-1&&(o.arr[s]=t(r[s],1<<e%l));else for(i=e.arr,a=r.length,o=new BitSet(this.MAX_BIT+1),n=0;n<a;n++)o.arr[n]=t(r[n],i[n]);return o},"function"https://www.apple.com.cn/v/ipad-pro/y/built/scripts/==typeof define&&define.amd?define([],function(){return BitSet}):"object"==typeof n&&(t.exports=BitSet)},{}],88:[function(e,t,n){function r(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}t.exports=r},{}],89:[function(e,t,n){function r(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}t.exports=r},{}],90:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6],u=t[7],h=t[8],l=t[9],f=t[10],p=t[11],d=t[12],m=t[13],y=t[14],v=t[15],g=n*s-r*o,b=n*c-i*o,E=n*u-a*o,_=r*c-i*s,w=r*u-a*s,k=i*u-a*c,S=h*m-l*d,x=h*y-f*d,O=h*v-p*d,T=l*y-f*m,A=l*v-p*m,M=f*v-p*y,P=g*M-b*A+E*T+_*O-w*x+k*S;return P?(P=1/P,e[0]=(s*M-c*A+u*T)*P,e[1]=(i*A-r*M-a*T)*P,e[2]=(m*k-y*w+v*_)*P,e[3]=(f*w-l*k-p*_)*P,e[4]=(c*O-o*M-u*x)*P,e[5]=(n*M-i*O+a*x)*P,e[6]=(y*E-d*k-v*b)*P,e[7]=(h*k-f*E+p*b)*P,e[8]=(o*A-s*O+u*S)*P,e[9]=(r*O-n*A-a*S)*P,e[10]=(d*w-m*E+v*g)*P,e[11]=(l*E-h*w-p*g)*P,e[12]=(s*x-o*T-c*S)*P,e[13]=(n*T-r*x+i*S)*P,e[14]=(m*b-d*_-y*g)*P,e[15]=(h*_-l*b+f*g)*P,e):null}t.exports=r},{}],91:[function(e,t,n){function r(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],c=t[7],u=t[8],h=t[9],l=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+u*r,e[5]=o*i+h*r,e[6]=s*i+l*r,e[7]=c*i+f*r,e[8]=u*i-a*r,e[9]=h*i-o*r,e[10]=l*i-s*r,e[11]=f*i-c*r,e}t.exports=r},{}],92:[function(e,t,n){function r(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],c=t[3],u=t[8],h=t[9],l=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-u*r,e[1]=o*i-h*r,e[2]=s*i-l*r,e[3]=c*i-f*r,e[8]=a*r+u*i,e[9]=o*r+h*i,e[10]=s*r+l*i,e[11]=c*r+f*i,e}t.exports=r},{}],93:[function(e,t,n){function r(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],c=t[3],u=t[4],h=t[5],l=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+u*r,e[1]=o*i+h*r,e[2]=s*i+l*r,e[3]=c*i+f*r,e[4]=u*i-a*r,e[5]=h*i-o*r,e[6]=l*i-s*r,e[7]=f*i-c*r,e}t.exports=r},{}],94:[function(e,t,n){function r(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}t.exports=r},{}],95:[function(e,t,n){function r(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}t.exports=r},{}],96:[function(e,t,n){"use strict";function r(e){n.ARRAY_TYPE=s=e}function i(e){return e*u}function a(e,t){return Math.abs(e-t)<=o*Math.max(1,Math.abs(e),Math.abs(t))}Object.defineProperty(n,"__esModule",{value:!0}),n.setMatrixArrayType=r,n.toRadian=i,n.equals=a,n.RANDOM=n.ARRAY_TYPE=n.EPSILON=void 0;var o=1e-6;n.EPSILON=o;var s="undefined"!=typeof Float32Array?Float32Array:Array;n.ARRAY_TYPE=s;var c=Math.random;n.RANDOM=c;var u=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})},{}],97:[function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{"default":e};var t=i();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n["default"]=e,t&&t.set(e,n),n}function o(){var e=new Q.ARRAY_TYPE(16);return Q.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function s(e){var t=new Q.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function c(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function u(e,t,n,r,i,a,o,s,c,u,h,l,f,p,d,m){var y=new Q.ARRAY_TYPE(16);return y[0]=e,y[1]=t,y[2]=n,y[3]=r,y[4]=i,y[5]=a,y[6]=o,y[7]=s,y[8]=c,y[9]=u,y[10]=h,y[11]=l,y[12]=f,y[13]=p,y[14]=d,y[15]=m,y}function h(e,t,n,r,i,a,o,s,c,u,h,l,f,p,d,m,y){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=c,e[8]=u,e[9]=h,e[10]=l,e[11]=f,e[12]=p,e[13]=d,e[14]=m,e[15]=y,e}function l(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function f(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function p(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6],u=t[7],h=t[8],l=t[9],f=t[10],p=t[11],d=t[12],m=t[13],y=t[14],v=t[15],g=n*s-r*o,b=n*c-i*o,E=n*u-a*o,_=r*c-i*s,w=r*u-a*s,k=i*u-a*c,S=h*m-l*d,x=h*y-f*d,O=h*v-p*d,T=l*y-f*m,A=l*v-p*m,M=f*v-p*y,P=g*M-b*A+E*T+_*O-w*x+k*S;return P?(P=1/P,e[0]=(s*M-c*A+u*T)*P,e[1]=(i*A-r*M-a*T)*P,e[2]=(m*k-y*w+v*_)*P,e[3]=(f*w-l*k-p*_)*P,e[4]=(c*O-o*M-u*x)*P,e[5]=(n*M-i*O+a*x)*P,e[6]=(y*E-d*k-v*b)*P,e[7]=(h*k-f*E+p*b)*P,e[8]=(o*A-s*O+u*S)*P,e[9]=(r*O-n*A-a*S)*P,e[10]=(d*w-m*E+v*g)*P,e[11]=(l*E-h*w-p*g)*P,e[12]=(s*x-o*T-c*S)*P,e[13]=(n*T-r*x+i*S)*P,e[14]=(m*b-d*_-y*g)*P,e[15]=(h*_-l*b+f*g)*P,e):null}function d(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],c=t[6],u=t[7],h=t[8],l=t[9],f=t[10],p=t[11],d=t[12],m=t[13],y=t[14],v=t[15];return e[0]=s*(f*v-p*y)-l*(c*v-u*y)+m*(c*p-u*f),e[1]=-(r*(f*v-p*y)-l*(i*v-a*y)+m*(i*p-a*f)),e[2]=r*(c*v-u*y)-s*(i*v-a*y)+m*(i*u-a*c),e[3]=-(r*(c*p-u*f)-s*(i*p-a*f)+l*(i*u-a*c)),e[4]=-(o*(f*v-p*y)-h*(c*v-u*y)+d*(c*p-u*f)),e[5]=n*(f*v-p*y)-h*(i*v-a*y)+d*(i*p-a*f),e[6]=-(n*(c*v-u*y)-o*(i*v-a*y)+d*(i*u-a*c)),e[7]=n*(c*p-u*f)-o*(i*p-a*f)+h*(i*u-a*c),e[8]=o*(l*v-p*m)-h*(s*v-u*m)+d*(s*p-u*l),e[9]=-(n*(l*v-p*m)-h*(r*v-a*m)+d*(r*p-a*l)),e[10]=n*(s*v-u*m)-o*(r*v-a*m)+d*(r*u-a*s),e[11]=-(n*(s*p-u*l)-o*(r*p-a*l)+h*(r*u-a*s)),e[12]=-(o*(l*y-f*m)-h*(s*y-c*m)+d*(s*f-c*l)),e[13]=n*(l*y-f*m)-h*(r*y-i*m)+d*(r*f-i*l),e[14]=-(n*(s*y-c*m)-o*(r*y-i*m)+d*(r*c-i*s)),e[15]=n*(s*f-c*l)-o*(r*f-i*l)+h*(r*c-i*s),e}function m(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],c=e[7],u=e[8],h=e[9],l=e[10],f=e[11],p=e[12],d=e[13],m=e[14],y=e[15],v=t*o-n*a,g=t*s-r*a,b=t*c-i*a,E=n*s-r*o,_=n*c-i*o,w=r*c-i*s,k=u*d-h*p,S=u*m-l*p,x=u*y-f*p,O=h*m-l*d,T=h*y-f*d,A=l*y-f*m;return v*A-g*T+b*O+E*x-_*S+w*k}function y(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],u=t[6],h=t[7],l=t[8],f=t[9],p=t[10],d=t[11],m=t[12],y=t[13],v=t[14],g=t[15],b=n[0],E=n[1],_=n[2],w=n[3];return e[0]=b*r+E*s+_*l+w*m,e[1]=b*i+E*c+_*f+w*y,e[2]=b*a+E*u+_*p+w*v,e[3]=b*o+E*h+_*d+w*g,b=n[4],E=n[5],_=n[6],w=n[7],e[4]=b*r+E*s+_*l+w*m,e[5]=b*i+E*c+_*f+w*y,e[6]=b*a+E*u+_*p+w*v,e[7]=b*o+E*h+_*d+w*g,b=n[8],E=n[9],_=n[10],w=n[11],e[8]=b*r+E*s+_*l+w*m,
e[9]=b*i+E*c+_*f+w*y,e[10]=b*a+E*u+_*p+w*v,e[11]=b*o+E*h+_*d+w*g,b=n[12],E=n[13],_=n[14],w=n[15],e[12]=b*r+E*s+_*l+w*m,e[13]=b*i+E*c+_*f+w*y,e[14]=b*a+E*u+_*p+w*v,e[15]=b*o+E*h+_*d+w*g,e}function v(e,t,n){var r,i,a,o,s,c,u,h,l,f,p,d,m=n[0],y=n[1],v=n[2];return t===e?(e[12]=t[0]*m+t[4]*y+t[8]*v+t[12],e[13]=t[1]*m+t[5]*y+t[9]*v+t[13],e[14]=t[2]*m+t[6]*y+t[10]*v+t[14],e[15]=t[3]*m+t[7]*y+t[11]*v+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],c=t[5],u=t[6],h=t[7],l=t[8],f=t[9],p=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=c,e[6]=u,e[7]=h,e[8]=l,e[9]=f,e[10]=p,e[11]=d,e[12]=r*m+s*y+l*v+t[12],e[13]=i*m+c*y+f*v+t[13],e[14]=a*m+u*y+p*v+t[14],e[15]=o*m+h*y+d*v+t[15]),e}function g(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function b(e,t,n,r){var i,a,o,s,c,u,h,l,f,p,d,m,y,v,g,b,E,_,w,k,S,x,O,T,A=r[0],M=r[1],P=r[2],C=Math.hypot(A,M,P);return C<Q.EPSILON?null:(C=1/C,A*=C,M*=C,P*=C,i=Math.sin(n),a=Math.cos(n),o=1-a,s=t[0],c=t[1],u=t[2],h=t[3],l=t[4],f=t[5],p=t[6],d=t[7],m=t[8],y=t[9],v=t[10],g=t[11],b=A*A*o+a,E=M*A*o+P*i,_=P*A*o-M*i,w=A*M*o-P*i,k=M*M*o+a,S=P*M*o+A*i,x=A*P*o+M*i,O=M*P*o-A*i,T=P*P*o+a,e[0]=s*b+l*E+m*_,e[1]=c*b+f*E+y*_,e[2]=u*b+p*E+v*_,e[3]=h*b+d*E+g*_,e[4]=s*w+l*k+m*S,e[5]=c*w+f*k+y*S,e[6]=u*w+p*k+v*S,e[7]=h*w+d*k+g*S,e[8]=s*x+l*O+m*T,e[9]=c*x+f*O+y*T,e[10]=u*x+p*O+v*T,e[11]=h*x+d*O+g*T,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function E(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],c=t[7],u=t[8],h=t[9],l=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+u*r,e[5]=o*i+h*r,e[6]=s*i+l*r,e[7]=c*i+f*r,e[8]=u*i-a*r,e[9]=h*i-o*r,e[10]=l*i-s*r,e[11]=f*i-c*r,e}function _(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],c=t[3],u=t[8],h=t[9],l=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-u*r,e[1]=o*i-h*r,e[2]=s*i-l*r,e[3]=c*i-f*r,e[8]=a*r+u*i,e[9]=o*r+h*i,e[10]=s*r+l*i,e[11]=c*r+f*i,e}function w(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],c=t[3],u=t[4],h=t[5],l=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+u*r,e[1]=o*i+h*r,e[2]=s*i+l*r,e[3]=c*i+f*r,e[4]=u*i-a*r,e[5]=h*i-o*r,e[6]=l*i-s*r,e[7]=f*i-c*r,e}function k(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function S(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function x(e,t,n){var r,i,a,o=n[0],s=n[1],c=n[2],u=Math.hypot(o,s,c);return u<Q.EPSILON?null:(u=1/u,o*=u,s*=u,c*=u,r=Math.sin(t),i=Math.cos(t),a=1-i,e[0]=o*o*a+i,e[1]=s*o*a+c*r,e[2]=c*o*a-s*r,e[3]=0,e[4]=o*s*a-c*r,e[5]=s*s*a+i,e[6]=c*s*a+o*r,e[7]=0,e[8]=o*c*a+s*r,e[9]=s*c*a-o*r,e[10]=c*c*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function O(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function T(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function A(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function M(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,c=i+i,u=a+a,h=r*s,l=r*c,f=r*u,p=i*c,d=i*u,m=a*u,y=o*s,v=o*c,g=o*u;return e[0]=1-(p+m),e[1]=l+g,e[2]=f-v,e[3]=0,e[4]=l-g,e[5]=1-(h+m),e[6]=d+y,e[7]=0,e[8]=f+v,e[9]=d-y,e[10]=1-(h+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function P(e,t){var n=new Q.ARRAY_TYPE(3),r=-t[0],i=-t[1],a=-t[2],o=t[3],s=t[4],c=t[5],u=t[6],h=t[7],l=r*r+i*i+a*a+o*o;return l>0?(n[0]=2*(s*o+h*r+c*a-u*i)/l,n[1]=2*(c*o+h*i+u*r-s*a)/l,n[2]=2*(u*o+h*a+s*i-c*r)/l):(n[0]=2*(s*o+h*r+c*a-u*i),n[1]=2*(c*o+h*i+u*r-s*a),n[2]=2*(u*o+h*a+s*i-c*r)),M(e,t,n),e}function C(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function I(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],s=t[6],c=t[8],u=t[9],h=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(a,o,s),e[2]=Math.hypot(c,u,h),e}function R(e,t){var n=new Q.ARRAY_TYPE(3);I(n,t);var r=1/n[0],i=1/n[1],a=1/n[2],o=t[0]*r,s=t[1]*i,c=t[2]*a,u=t[4]*r,h=t[5]*i,l=t[6]*a,f=t[8]*r,p=t[9]*i,d=t[10]*a,m=o+h+d,y=0;return m>0?(y=2*Math.sqrt(m+1),e[3]=.25*y,e[0]=(l-p)/y,e[1]=(f-c)/y,e[2]=(s-u)/y):o>h&&o>d?(y=2*Math.sqrt(1+o-h-d),e[3]=(l-p)/y,e[0]=.25*y,e[1]=(s+u)/y,e[2]=(f+c)/y):h>d?(y=2*Math.sqrt(1+h-o-d),e[3]=(f-c)/y,e[0]=(s+u)/y,e[1]=.25*y,e[2]=(l+p)/y):(y=2*Math.sqrt(1+d-o-h),e[3]=(s-u)/y,e[0]=(f+c)/y,e[1]=(l+p)/y,e[2]=.25*y),e}function F(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3],c=i+i,u=a+a,h=o+o,l=i*c,f=i*u,p=i*h,d=a*u,m=a*h,y=o*h,v=s*c,g=s*u,b=s*h,E=r[0],_=r[1],w=r[2];return e[0]=(1-(d+y))*E,e[1]=(f+b)*E,e[2]=(p-g)*E,e[3]=0,e[4]=(f-b)*_,e[5]=(1-(l+y))*_,e[6]=(m+v)*_,e[7]=0,e[8]=(p+g)*w,e[9]=(m-v)*w,e[10]=(1-(l+d))*w,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function L(e,t,n,r,i){var a=t[0],o=t[1],s=t[2],c=t[3],u=a+a,h=o+o,l=s+s,f=a*u,p=a*h,d=a*l,m=o*h,y=o*l,v=s*l,g=c*u,b=c*h,E=c*l,_=r[0],w=r[1],k=r[2],S=i[0],x=i[1],O=i[2],T=(1-(m+v))*_,A=(p+E)*_,M=(d-b)*_,P=(p-E)*w,C=(1-(f+v))*w,I=(y+g)*w,R=(d+b)*k,F=(y-g)*k,L=(1-(f+m))*k;return e[0]=T,e[1]=A,e[2]=M,e[3]=0,e[4]=P,e[5]=C,e[6]=I,e[7]=0,e[8]=R,e[9]=F,e[10]=L,e[11]=0,e[12]=n[0]+S-(T*S+P*x+R*O),e[13]=n[1]+x-(A*S+C*x+F*O),e[14]=n[2]+O-(M*S+I*x+L*O),e[15]=1,e}function D(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,c=i+i,u=n*o,h=r*o,l=r*s,f=i*o,p=i*s,d=i*c,m=a*o,y=a*s,v=a*c;return e[0]=1-l-d,e[1]=h+v,e[2]=f-y,e[3]=0,e[4]=h-v,e[5]=1-u-d,e[6]=p+m,e[7]=0,e[8]=f+y,e[9]=p-m,e[10]=1-u-l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function N(e,t,n,r,i,a,o){var s=1/(n-t),c=1/(i-r),u=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*c,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*c,e[10]=(o+a)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*u,e[15]=0,e}function K(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(r-i),e[10]=(i+r)*a,e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e}function j(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),c=2/(o+s),u=2/(i+a);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-((o-s)*c*.5),e[9]=(i-a)*u*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function B(e,t,n,r,i,a,o){var s=1/(t-n),c=1/(r-i),u=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*c,e[14]=(o+a)*u,e[15]=1,e}function q(e,t,n,r){var i,a,o,s,c,u,h,f,p,d,m=t[0],y=t[1],v=t[2],g=r[0],b=r[1],E=r[2],_=n[0],w=n[1],k=n[2];return Math.abs(m-_)<Q.EPSILON&&Math.abs(y-w)<Q.EPSILON&&Math.abs(v-k)<Q.EPSILON?l(e):(h=m-_,f=y-w,p=v-k,d=1/Math.hypot(h,f,p),h*=d,f*=d,p*=d,i=b*p-E*f,a=E*h-g*p,o=g*f-b*h,d=Math.hypot(i,a,o),d?(d=1/d,i*=d,a*=d,o*=d):(i=0,a=0,o=0),s=f*o-p*a,c=p*i-h*o,u=h*a-f*i,d=Math.hypot(s,c,u),d?(d=1/d,s*=d,c*=d,u*=d):(s=0,c=0,u=0),e[0]=i,e[1]=s,e[2]=h,e[3]=0,e[4]=a,e[5]=c,e[6]=f,e[7]=0,e[8]=o,e[9]=u,e[10]=p,e[11]=0,e[12]=-(i*m+a*y+o*v),e[13]=-(s*m+c*y+u*v),e[14]=-(h*m+f*y+p*v),e[15]=1,e)}function U(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=r[0],c=r[1],u=r[2],h=i-n[0],l=a-n[1],f=o-n[2],p=h*h+l*l+f*f;p>0&&(p=1/Math.sqrt(p),h*=p,l*=p,f*=p);var d=c*f-u*l,m=u*h-s*f,y=s*l-c*h;return p=d*d+m*m+y*y,p>0&&(p=1/Math.sqrt(p),d*=p,m*=p,y*=p),e[0]=d,e[1]=m,e[2]=y,e[3]=0,e[4]=l*y-f*m,e[5]=f*d-h*y,e[6]=h*m-l*d,e[7]=0,e[8]=h,e[9]=l,e[10]=f,e[11]=0,e[12]=i,e[13]=a,e[14]=o,e[15]=1,e}function V(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function z(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function G(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function H(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function W(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function Y(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function X(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Z(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],c=e[6],u=e[7],h=e[8],l=e[9],f=e[10],p=e[11],d=e[12],m=e[13],y=e[14],v=e[15],g=t[0],b=t[1],E=t[2],_=t[3],w=t[4],k=t[5],S=t[6],x=t[7],O=t[8],T=t[9],A=t[10],M=t[11],P=t[12],C=t[13],I=t[14],R=t[15];return Math.abs(n-g)<=Q.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-b)<=Q.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-E)<=Q.EPSILON*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(a-_)<=Q.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(o-w)<=Q.EPSILON*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(s-k)<=Q.EPSILON*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(c-S)<=Q.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(u-x)<=Q.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(h-O)<=Q.EPSILON*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(l-T)<=Q.EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(f-A)<=Q.EPSILON*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(p-M)<=Q.EPSILON*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(d-P)<=Q.EPSILON*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(m-C)<=Q.EPSILON*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(y-I)<=Q.EPSILON*Math.max(1,Math.abs(y),Math.abs(I))&&Math.abs(v-R)<=Q.EPSILON*Math.max(1,Math.abs(v),Math.abs(R))}Object.defineProperty(n,"__esModule",{value:!0}),n.create=o,n.clone=s,n.copy=c,n.fromValues=u,n.set=h,n.identity=l,n.transpose=f,n.invert=p,n.adjoint=d,n.determinant=m,n.multiply=y,n.translate=v,n.scale=g,n.rotate=b,n.rotateX=E,n.rotateY=_,n.rotateZ=w,n.fromTranslation=k,n.fromScaling=S,n.fromRotation=x,n.fromXRotation=O,n.fromYRotation=T,n.fromZRotation=A,n.fromRotationTranslation=M,n.fromQuat2=P,n.getTranslation=C,n.getScaling=I,n.getRotation=R,n.fromRotationTranslationScale=F,n.fromRotationTranslationScaleOrigin=L,n.fromQuat=D,n.frustum=N,n.perspective=K,n.perspectiveFromFieldOfView=j,n.ortho=B,n.lookAt=q,n.targetTo=U,n.str=V,n.frob=z,n.add=G,n.subtract=H,n.multiplyScalar=W,n.multiplyScalarAndAdd=Y,n.exactEquals=X,n.equals=Z,n.sub=n.mul=void 0;var Q=a(e(96)),J=y;n.mul=J;var $=H;n.sub=$},{96:96}],98:[function(e,t,n){function r(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}t.exports=r},{}],99:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],c=n[2];return e[0]=i*c-a*s,e[1]=a*o-r*c,e[2]=r*s-i*o,e}t.exports=r},{}],100:[function(e,t,n){function r(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}t.exports=r},{}],101:[function(e,t,n){function r(e,t,n){var r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r}t.exports=r},{}],102:[function(e,t,n){function r(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}t.exports=r},{}],103:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}t.exports=r},{}],104:[function(e,t,n){function r(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}t.exports=r},{}],105:[function(e,t,n){function r(e,t,n,r){var i=new Float32Array(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}t.exports=r},{}],106:[function(e,t,n){function r(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}t.exports=r},{}],107:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=e(5).EventEmitterMicro,p="function"==typeof HTMLImageElement.prototype.decode,d=function(e){function t(e){var n;i(this,t),n=s(this,u(t).call(this)),n.friendlyName="ImageSequencePlayer",n.desiredIndex=0,n.displayIndex=-1,n.numImages=e.numImages,n.numPadding=e.numPadding,n.images=new Array(n.numImages),n.retinaScale=1,n.canvas=null,n.ctx=null;var r="";return e.retina&&e.retina===e.viewport&&(r="_2x"),n.baseUrl="/105/media/us/ipad-pro/2020/7be9ce7b-fa4e-4f54-968b-4a7687066ed8/anim/depth-sensor/".concat(e.viewport).concat(r,"/").concat(e.viewport).concat(r),n.setup(),n}return h(t,e),o(t,[{key:"setup",value:function(){var e=this;this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d",{alpha:!0}),this.once(t.FIRST_IMAGE_LOADED,function(t){return e.setSize(t.naturalWidth,t.naturalHeight)})}},{key:"splitArray",value:function(e,t,n){var r=Math.floor(t.length/2),i=t[r],a=e[i];e[i]={value:a,bucket:n};var o=t.slice(0,r),s=t.slice(r+1);return o.length&&this.splitArray(e,o,n+1),s.length&&this.splitArray(e,s,n+1),e}},{key:"loadImages",value:function(){var e=this;if(!this.buckets){for(var t=[],n=0;n<this.numImages;n++)t.push(n);var r=this.splitArray(t,t,0);this.buckets=[],r.forEach(function(t){e.buckets[t.bucket]=e.buckets[t.bucket]||[],e.buckets[t.bucket].push(t.value)}),this.firstImageLoaded=!1,this.canPlayThrough=!1,this.loadImage(0),this.loadImage(this.numImages-1),this.loadbucket()}}},{key:"loadImage",value:function(e,n){var r=this;if(this.images[e])return void(n&&n());var i=new Image,a=function s(){n&&n(),i.removeEventListener("load",s),r.firstImageLoaded||(r.firstImageLoaded=!0,r.trigger(t.FIRST_IMAGE_LOADED,i)),r.images[e]=i},o=String(e).padStart(this.numPadding,"0");i.src="".concat(this.baseUrl,"_").concat(o,".jpg"),i.index=e,p?i.decode().then(a)["catch"](function(e){return console.error}):i.addEventListener("load",a)}},{key:"loadbucket",value:function(){var e=this;if(this.inLoadArea){var n=this.buckets.shift();if(!n)return this.canPlayThrough=!0,void this.trigger(t.LOADING_COMPLETE);var r=[];n.forEach(function(t){var n=new Promise(function(n,r){e.loadImage(t,n)});r.push(n)}),Promise.all(r).then(this.loadbucket.bind(this))}}},{key:"renderIndex",value:function(e){if(this.images[e])return void this.drawImage(e);for(var t=Number.MAX_SAFE_INTEGER,n=e;n>0;n--)if(this.images[n]){t=n;break}for(var r=Number.MAX_SAFE_INTEGER,i=e;i<this.images.length;i++)if(this.images[i]){r=i;break}this.images[t]&&Math.abs(e-t)<=Math.abs(e-r)?this.drawImage(t):this.images[r]&&this.drawImage(r)}},{key:"drawImage",value:function(e){this.displayIndex=e,this.ctx.drawImage(this.images[this.displayIndex],0,0)}},{key:"setSize",value:function(e,t){this.canvas.width=e*this.retinaScale,this.canvas.height=t*this.retinaScale}},{key:"percent",get:function(){return this.desiredIndex/this.images.length},set:function(e){this.desiredIndex=Math.round(e*this.images.length),this.renderIndex(this.desiredIndex)}}]),t}(f);d.FIRST_IMAGE_LOADED="FIRST_IMAGE_LOADED",d.LOADING_COMPLETE="LOADING_COMPLETE",d.CAN_PLAY_THROUGH="CAN_PLAY_THROUGH",t.exports=d},{5:5}],108:[function(e,t,n){"use strict";t.exports=function(e){return{X:"xlarge",L:"large",M:"medium",S:"small"}[e]}},{}],109:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=e(78),p=e(58),d=e(48),m=e(134),y=function(e){function t(e){var n;i(this,t),n=s(this,u(t).call(this,e));var r=getComputedStyle(document.documentElement);return n.breakpoints={L:parseInt(r.getPropertyValue("--viewport-medium"))+1,M:parseInt(r.getPropertyValue("--viewport-small"))+1},n._pageMetrics=e.pageMetrics,n.currentBreakpoint=e.pageMetrics.breakpoint,n.overflowContainer=n.el.querySelector(".sticky-overflow"),n.cursor=n.el.querySelector(".cursor"),n.dock=n.el.querySelector(".dock"),n.imageDock=n.el.querySelector(".image-dock-bg"),n.imageScreen=n.el.querySelector(".image-screen"),n.ipadosBg=n.el.querySelector(".image-bg"),n.ipadosBgBlur=n.el.querySelector(".image-bg-blur"),n.photosIcon=n.el.querySelector(".image-icon-photos"),n.calendarIcon=n.el.querySelector(".image-icon-calendar"),n.notesIcon=n.el.querySelector(".image-icon-notes"),n.svg=n.el.querySelector("svg"),n.path=n.el.querySelector("path"),n.startOffset=JSON.parse(n.cursor.getAttribute("data-start-offset")),n.endOffset=JSON.parse(n.cursor.getAttribute("data-end-offset")),n.headlineContainer=n.el.querySelector(".cursor-headline"),n.cursorCopyContainer=n.el.querySelector(".cursor-copy"),n.deviceContainer=n.el.querySelector(".device-container"),n.screenContainer=n.el.querySelector(".screen-container"),n.sectionElem=document.querySelector(".section-ipados"),n.previousSectionElem=document.querySelector(".section-magic-keyboard"),n.rightScreenVideo=n.el.querySelector(".inline-video-screen.right"),n.snipeAppears=n.el.querySelector(".snipes-ipados .image-snipe-appears"),n.snipeAdapts=n.el.querySelector(".snipes-ipados .image-snipe-adapts"),n.snipeEdits=n.el.querySelector(".snipes-ipados .image-snipe-edits"),n.imageHeightScale=77.3,n.imageWidthScale=81.4,n.translateXScale=.5/14.36,n.translateYScale=84.5/11.32,n.hardwareInitialScale="S"===n.currentBreakpoint?.4:.8,n.hardwareInitialY=(100-100*n.hardwareInitialScale)/2,n.baseExpression="a0t + 60vh",n.cursorWidth={L:13,M:10,S:8},n}return h(t,e),o(t,[{key:"createCopyKf",value:function(e){this.addKeyframe({el:this.cursor,group:this.group,start:"".concat(this.baseExpression),end:"".concat(this.baseExpression," + 40vh"),anchors:[this.sectionElem],x:[e[this.inlineEnd]+this.startOffset[this.currentBreakpoint].x,e[this.inlineEnd]+this.startOffset[this.currentBreakpoint].x],y:[e.bottom+this.startOffset[this.currentBreakpoint].y,e.bottom+this.startOffset[this.currentBreakpoint].y]}),this.addKeyframe({el:this.headlineContainer,group:this.group,start:"".concat(this.baseExpression," + 45vh"),anchors:[this.sectionElem],cssClass:"fade-out",toggle:!0}),this.addKeyframe({el:this.cursorCopyContainer,group:this.group,start:"".concat(this.baseExpression," + 180vh - 100h"),end:"".concat(this.baseExpression," + 180vh + 100h"),anchors:[this.sectionElem],y:["100h","-100h"]})}},{key:"createSVG",value:function(e,t){var n=e[this.inlineEnd]+this.startOffset[this.currentBreakpoint].x,r=e.bottom+this.startOffset[this.currentBreakpoint].y,i=t[this.inlineEnd]+this.endOffset.x,a=t.top+t.height/2+this.endOffset.y,o={L:{x:Math.min(100+this._pageMetrics.windowWidth-this.breakpoints.L,200)*this.direction,y:-70},M:{x:Math.min(100+this._pageMetrics.windowWidth-this.breakpoints.M,200)*this.direction,y:-70},S:{x:100*this.direction,y:-80}},s={L:{x:Math.min(250+this._pageMetrics.windowWidth-this.breakpoints.L,350)*this.direction,y:200},M:{x:Math.min(50+this._pageMetrics.windowWidth-this.breakpoints.M,150)*this.direction,y:100},S:{x:80*this.direction,y:50}};this.svg.setAttribute("viewBox","0 0 ".concat(this._pageMetrics.windowWidth," ").concat(this._pageMetrics.windowHeight)),this.path.setAttribute("d","M".concat(n+this.cursorWidth[this.currentBreakpoint]/2,",").concat(r+this.cursorWidth[this.currentBreakpoint]/2," C").concat(n+o[this.currentBreakpoint].x,",").concat(r+o[this.currentBreakpoint].y," ").concat(i+s[this.currentBreakpoint].x,",").concat(a+s[this.currentBreakpoint].y," ").concat(i,",").concat(a+10)),this.pathLength=this.path.getTotalLength()}},{key:"createScaling",value:function(){this.addKeyframe({el:this.deviceContainer,group:this.group,start:"".concat(this.baseExpression," + 150vh"),end:"".concat(this.baseExpression," + 180vh"),anchors:[this.sectionElem],scale:["max(100vh/".concat(this.imageHeightScale,"h, 100vw/").concat(this.imageWidthScale,"w)"),this.hardwareInitialScale],x:["".concat(this.translateXScale,"w*max(100vh/").concat(this.imageHeightScale,"h, 100vw/").concat(this.imageWidthScale,"w)"),0],y:["".concat(this.translateYScale,"h*max(100vh/").concat(this.imageHeightScale,"h, 100vw/").concat(this.imageWidthScale,"w) + ").concat(this.offsetY),"-".concat(this.hardwareInitialY,"h - ").concat(this.offsetYSmall," - 50")],easeFunction:"easeOutSin"}),this.addKeyframe({el:this.ipadosBgBlur,group:this.group,start:"".concat(this.baseExpression," + 140vh"),end:"".concat(this.baseExpression," + 160vh"),anchors:[this.sectionElem],opacity:[0,.99],easeFunction:"easeOutQuad"})}},{key:"createCursorAnimations",value:function(e,t,n){var r=this;this.addKeyframe({el:this.cursor,group:this.group,start:"a0t",end:"a0t + 1vh",anchors:[this.sectionElem],opacity:[0,1]}),this.addKeyframe({el:this.cursor,group:this.group,start:"".concat(this.baseExpression," + 39vh"),end:"".concat(this.baseExpression," + 40vh"),scale:[1,1],anchors:[this.sectionElem]}),this.addContinuousEvent({el:this.cursor,group:this.group,event:"animate-cursor",start:"".concat(this.baseExpression," + 40vh"),end:"".concat(this.baseExpression," + 100vh"),anchors:[this.sectionElem],progress:[0,1],opacity:[1,.4],pathLength:[0,this.pathLength],onDraw:function(e){var t=e.tweenProps.progress.current,n=r.path.getPointAtLength(e.tweenProps.pathLength.current);r.cursor.style.transform="translate(".concat(n.x-r.cursorWidth[r.currentBreakpoint]/2,"px, ").concat(n.y-r.cursorWidth[r.currentBreakpoint]/2,"px) scale(").concat(Math.min(1+t,1.5),")")}}),this.addKeyframe({el:this.cursor,group:this.group,start:"".concat(this.baseExpression," + 140vh"),cssClass:"hide",toggle:!0,anchors:[this.sectionElem]}),this.addContinuousEvent({el:this.cursor,group:this.group,event:"morph-cursor",start:"".concat(this.baseExpression," + 108vh"),end:"".concat(this.baseExpression," + 110vh"),anchors:[this.sectionElem],radius:[50,22],onDraw:function(e){r.cursor.style.borderRadius="".concat(Math.round(e.tweenProps.radius.current),"%")}}),this.addKeyframe({el:this.cursor,group:this.group,start:"".concat(this.baseExpression," + 100vh"),end:"".concat(this.baseExpression," + 140vh"),anchors:[this.sectionElem],cssClass:"shadow",toggle:!0});var i=this.path.getPointAtLength(this.pathLength);this.addKeyframe({el:this.cursor,group:this.group,start:"".concat(this.baseExpression," + 100vh"),end:"".concat(this.baseExpression," + 110vh"),x:[i.x-this.cursorWidth[this.currentBreakpoint]/2,e.left+e.width/2-this.cursorWidth[this.currentBreakpoint]/2],y:[i.y-this.cursorWidth[this.currentBreakpoint]/2,e.top+e.height/2-this.cursorWidth[this.currentBreakpoint]/2],anchors:[this.sectionElem]}),this.addKeyframe({el:this.cursor,group:this.group,start:"".concat(this.baseExpression," + 105vh"),end:"".concat(this.baseExpression," + 110vh"),scale:[1.5,"110a1w/w"],opacity:[.4,.2],anchors:[this.sectionElem,this.notesIcon]}),this.addKeyframe({el:this.cursor,group:this.group,start:"".concat(this.baseExpression," + 110vh"),end:"".concat(this.baseExpression," + 115vh"),x:[e.left+e.width/2-this.cursorWidth[this.currentBreakpoint]/2,e.left+e.width/2-this.cursorWidth[this.currentBreakpoint]/2-5*this.direction],anchors:[this.sectionElem]}),this.addKeyframe({el:this.cursor,group:this.group,start:"".concat(this.baseExpression," + 115vh"),end:"".concat(this.baseExpression," + 120vh"),x:[n.left+n.width/2-this.cursorWidth[this.currentBreakpoint]/2,n.left+n.width/2-this.cursorWidth[this.currentBreakpoint]/2],scale:["a1w/w","110a1w/w"],anchors:[this.sectionElem,this.photosIcon]}),this.addKeyframe({el:this.cursor,group:this.group,start:"".concat(this.baseExpression," + 120vh"),end:"".concat(this.baseExpression," + 125vh"),x:[n.left+n.width/2-this.cursorWidth[this.currentBreakpoint]/2,n.left+n.width/2-this.cursorWidth[this.currentBreakpoint]/2-5*this.direction],anchors:[this.sectionElem]}),this.addKeyframe({el:this.cursor,group:this.group,start:"".concat(this.baseExpression," + 125vh"),end:"".concat(this.baseExpression," + 130vh"),x:[t.left+t.width/2-this.cursorWidth[this.currentBreakpoint]/2,t.left+t.width/2-this.cursorWidth[this.currentBreakpoint]/2],scale:["a1w/w","110a1w/w"],anchors:[this.sectionElem,this.calendarIcon]}),this.addKeyframe({el:this.cursor,group:this.group,start:"".concat(this.baseExpression," + 135vh"),end:"".concat(this.baseExpression," + 140vh"),scale:["110a1w/w","a1w/w"],anchors:[this.sectionElem,this.calendarIcon]}),this.addDiscreteEvent({el:this.cursor,group:this.group,event:"switch-cursor-color",start:"".concat(this.baseExpression," + 135vh"),anchors:[this.sectionElem],onEvent:function(e){r.cursor.style.backgroundColor="#000000"},onEventReverse:function(e){r.cursor.style.backgroundColor="#ffffff"}})}},{key:"createDockAnimations",value:function(){this.addKeyframe({el:this.imageDock,group:this.group,start:"".concat(this.baseExpression," + 90vh"),end:"".concat(this.baseExpression," + 100vh"),anchors:[this.sectionElem],y:[130,0]}),this.addKeyframe({el:this.photosIcon,group:this.group,start:"".concat(this.baseExpression," + 90vh"),end:"".concat(this.baseExpression," + 100vh"),anchors:[this.sectionElem],y:[130,0]}),this.addKeyframe({el:this.calendarIcon,group:this.group,start:"".concat(this.baseExpression," + 90vh"),end:"".concat(this.baseExpression," + 100vh"),anchors:[this.sectionElem],y:[130,0]}),this.addKeyframe({el:this.notesIcon,group:this.group,start:"".concat(this.baseExpression," + 90vh"),end:"".concat(this.baseExpression," + 100vh"),anchors:[this.sectionElem],y:[130,0]}),this.addKeyframe({el:this.imageDock,group:this.group,start:"".concat(this.baseExpression," + 140vh"),end:"".concat(this.baseExpression," + 150vh"),anchors:[this.sectionElem],y:[0,130]}),this.addKeyframe({el:this.dock,group:this.group,start:"".concat(this.baseExpression," + 160vh"),anchors:[this.sectionElem],cssClass:"hide",toggle:!0}),this.addKeyframe({el:this.photosIcon,group:this.group,start:"".concat(this.baseExpression," + 140vh"),end:"".concat(this.baseExpression," + 150vh"),anchors:[this.sectionElem],y:[0,130]}),this.addKeyframe({el:this.notesIcon,group:this.group,start:"".concat(this.baseExpression," + 140vh"),end:"".concat(this.baseExpression," + 150vh"),anchors:[this.sectionElem],y:[0,130]})}},{key:"createIconAnimations",value:function(){this.addKeyframe({el:this.notesIcon,group:this.group,start:"".concat(this.baseExpression," + 100vh"),end:"".concat(this.baseExpression," + 110vh"),anchors:[this.sectionElem],scale:[1,1.1]}),this.addKeyframe({el:this.notesIcon,group:this.group,start:"".concat(this.baseExpression," + 110vh"),end:"".concat(this.baseExpression," + 115vh"),anchors:[this.sectionElem],x:[0,-5*this.direction]}),this.addKeyframe({el:this.notesIcon,group:this.group,start:"".concat(this.baseExpression," + 115vh"),end:"".concat(this.baseExpression," + 120vh"),anchors:[this.sectionElem],x:[-5*this.direction,0],scale:[1.1,1]}),this.addKeyframe({el:this.photosIcon,group:this.group,start:"".concat(this.baseExpression," + 115vh"),end:"".concat(this.baseExpression," + 120vh"),anchors:[this.sectionElem],scale:[1,1.1]}),this.addKeyframe({el:this.photosIcon,group:this.group,start:"".concat(this.baseExpression," + 120vh"),end:"".concat(this.baseExpression," + 125vh"),anchors:[this.sectionElem],x:[0,-5*this.direction]}),this.addKeyframe({el:this.photosIcon,group:this.group,start:"".concat(this.baseExpression," + 125vh"),end:"".concat(this.baseExpression," + 130vh"),anchors:[this.sectionElem],x:[-5*this.direction,0],scale:[1.1,1]}),this.addKeyframe({el:this.calendarIcon,group:this.group,start:"".concat(this.baseExpression," + 125vh"),end:"".concat(this.baseExpression," + 130vh"),anchors:[this.sectionElem],scale:[1,1.1]}),this.addKeyframe({el:this.calendarIcon,group:this.group,start:"".concat(this.baseExpression," + 135vh"),end:"".concat(this.baseExpression," + 140vh"),anchors:[this.sectionElem],scale:[1.1,1]})}},{key:"createScreenAnimations",value:function(e,t){var n=this;this.addKeyframe({el:this.screenContainer,group:this.group,start:"".concat(this.baseExpression," + 140vh"),end:"".concat(this.baseExpression," + 150vh"),anchors:[this.sectionElem],opacity:[0,1]});var r="S"===this.currentBreakpoint?3:7,i=e.x+e.width/2-t.x-t.width/2-this.translateXScale*this.deviceContainer.offsetWidth/100,a=e.y+e.height/2-t.y-t.height/2-this.translateYScale*this.deviceContainer.offsetHeight/100,o="max(100vh/".concat(this.imageHeightScale,"a1h, 100vw/").concat(this.imageWidthScale,"a1w)");this.addKeyframe({el:this.screenContainer,group:this.group,start:"".concat(this.baseExpression," + 140vh"),end:"".concat(this.baseExpression," + 150vh"),anchors:[this.sectionElem,this.deviceContainer],x:["".concat(i,"/").concat(o),"".concat(i,"/").concat(o)],y:["".concat(a-this.offsetY,"/").concat(o),"(".concat(a-this.offsetY," - ").concat(.4*r*e.height,")/").concat(o)],scaleX:["".concat(e.width/t.width,"/").concat(o),"".concat(r," * ").concat(e.width/t.width,"/").concat(o)],scaleY:["".concat(e.height/t.height,"/").concat(o),"".concat(r," * ").concat(e.height/t.height,"/").concat(o)]}),this.addKeyframe({
el:this.screenContainer,group:this.group,start:"".concat(this.baseExpression," + 150vh"),end:"".concat(this.baseExpression," + 180vh"),anchors:[this.sectionElem,this.deviceContainer],x:["".concat(i,"/").concat(o),0],y:["(".concat(a-this.offsetY," - ").concat(.4*r*e.height,"px)/").concat(o),0],scaleX:["".concat(r," * ").concat(e.width/t.width,"/").concat(o),1],scaleY:["".concat(r," * ").concat(e.height/t.height,"/").concat(o),1],easeFunction:"easeOutSin"}),this.addContinuousEvent({el:this.screenContainer,group:this.group,event:"screen-border-radius",start:"".concat(this.baseExpression," + 150vh"),end:"".concat(this.baseExpression," + 180vh"),anchors:[this.sectionElem],radiusX:["css(--ipados-border-radius-x)",10],radiusY:["css(--ipados-border-radius-y)",10],easeFunction:"easeOutQuad",onDraw:function(e){n.screenContainer.style.borderRadius="".concat(Math.round(e.tweenProps.radiusX.current),"px/").concat(Math.round(e.tweenProps.radiusY.current),"px")}}),this.addKeyframe({el:this.calendarIcon,group:this.group,start:"".concat(this.baseExpression," + 140vh"),end:"".concat(this.baseExpression," + 150vh"),anchors:[this.sectionElem],scale:[1,r],y:[0,"-".concat(40*r,"h")]}),this.addKeyframe({el:this.calendarIcon,group:this.group,start:"".concat(this.baseExpression," + 145vh"),end:"".concat(this.baseExpression," + 150vh"),anchors:[this.sectionElem],opacity:[1,0]}),this.addKeyframe({el:this.deviceContainer,group:this.group,start:"".concat(this.baseExpression," + 180vh + 50"),end:"".concat(this.baseExpression," + 180vh + 100a1h"),anchors:[this.sectionElem,this.cursorCopyContainer],scale:[this.hardwareInitialScale,1.1],x:[0,"https://www.apple.com.cn/v/ipad-pro/y/built/scripts/-34.5w"],y:[null,"css(--ipados-padding-top) - a1h + 5h"],easeFunction:"easeOutSin",breakpointMask:"XL"}),this.addKeyframe({el:this.deviceContainer,group:this.group,start:"".concat(this.baseExpression," + 180vh + 50"),end:"".concat(this.baseExpression," + 180vh + 100a1h"),anchors:[this.sectionElem,this.cursorCopyContainer],scale:[this.hardwareInitialScale,1.1],x:[0,"https://www.apple.com.cn/v/ipad-pro/y/built/scripts/-34.5w"],y:[null,"clamp(50vh - 50h, css(--ipados-padding-top), 50vh) - a1h + 5h"],easeFunction:"easeOutSin",breakpointMask:"M"}),this.addKeyframe({el:this.deviceContainer,group:this.group,start:"".concat(this.baseExpression," + 180vh + (100a1h - 100vh + 40h + 50)"),end:"".concat(this.baseExpression," + 180vh + 100a1h"),anchors:[this.sectionElem,this.cursorCopyContainer],scale:[this.hardwareInitialScale,1.1],x:[0,"https://www.apple.com.cn/v/ipad-pro/y/built/scripts/-34.5w"],y:[null,"css(--ipados-padding-top) - a1h + 5h"],easeFunction:"easeOutSin",breakpointMask:"S"}),this.addKeyframe({el:this.rightScreenVideo,group:this.group,start:"".concat(this.baseExpression," + 375vh"),anchors:[this.sectionElem],cssClass:"hide",toggle:!0}),this.addKeyframe({el:this.deviceContainer,group:this.group,start:"".concat(this.baseExpression," + 350vh"),end:"".concat(this.baseExpression," + 400vh"),anchors:[this.sectionElem],x:["https://www.apple.com.cn/v/ipad-pro/y/built/scripts/-34.5w","https://www.apple.com.cn/v/ipad-pro/y/built/scripts/34.5w"],easeFunction:"easeInOutSin"})}},{key:"createSnipeTriggerKeyframes",value:function(){this.addKeyframe({el:this.snipeAppears,group:this.group,start:"".concat(this.baseExpression," + 180vh + 100a1h"),end:"".concat(this.baseExpression," + 350vh"),anchors:[this.sectionElem,this.cursorCopyContainer],y:[50,-100],breakpointMask:"XL"}),this.addKeyframe({el:this.snipeAdapts,group:this.group,start:"".concat(this.baseExpression," + 400vh"),end:"".concat(this.baseExpression," + 510vh"),anchors:[this.sectionElem],y:[50,-50],breakpointMask:"XLM"}),this.addKeyframe({el:this.snipeEdits,group:this.group,start:"".concat(this.baseExpression," + 400vh"),end:"".concat(this.baseExpression," + 510vh"),anchors:[this.sectionElem],y:[50,-50],breakpointMask:"XLM"}),this.addKeyframe({el:this.snipeAppears,group:this.group,start:"".concat(this.baseExpression," + 180vh + 100a1h"),end:"".concat(this.baseExpression," + 350vh"),anchors:[this.sectionElem,this.cursorCopyContainer],y:[50,-50],breakpointMask:"M"}),this.addKeyframe({el:this.snipeAppears,group:this.group,start:"".concat(this.baseExpression," + 180vh + 100a1h"),end:"".concat(this.baseExpression," + 350vh"),anchors:[this.sectionElem,this.cursorCopyContainer],y:[20,-20],breakpointMask:"S"}),this.addKeyframe({el:this.snipeAdapts,group:this.group,start:"".concat(this.baseExpression," + 400vh"),end:"".concat(this.baseExpression," + 455vh"),anchors:[this.sectionElem],y:[20,-20],breakpointMask:"S"}),this.addKeyframe({el:this.snipeEdits,group:this.group,start:"".concat(this.baseExpression," + 455vh"),end:"".concat(this.baseExpression," + 510vh"),anchors:[this.sectionElem],y:[20,-20],breakpointMask:"S"}),this.addKeyframe({el:this.snipeAppears,group:this.group,start:"".concat(this.baseExpression," + 180vh + 100a1h"),end:"".concat(this.baseExpression," + 350vh"),anchors:[this.sectionElem,this.cursorCopyContainer],cssClass:"fade-in",toggle:!0}),this.addKeyframe({el:this.snipeAppears,group:this.group,start:"".concat(this.baseExpression," + 180vh + 100a1h"),end:"".concat(this.baseExpression," + 350vh"),anchors:[this.sectionElem,this.cursorCopyContainer],cssClass:"animation-trigger",toggle:!0}),this.addKeyframe({el:this.snipeAdapts,group:this.group,start:"".concat(this.baseExpression," + 455vh"),end:"".concat(this.baseExpression," + 510vh"),anchors:[this.sectionElem],cssClass:"fade-in",toggle:!0,breakpointMask:"XLM"}),this.addKeyframe({el:this.snipeEdits,group:this.group,start:"".concat(this.baseExpression," + 400vh"),end:"".concat(this.baseExpression," + 510vh"),anchors:[this.sectionElem],cssClass:"fade-in",toggle:!0,breakpointMask:"XLM"}),this.addKeyframe({el:this.snipeAdapts,group:this.group,start:"".concat(this.baseExpression," + 400vh"),end:"".concat(this.baseExpression," + 455vh"),anchors:[this.sectionElem],cssClass:"fade-in",toggle:!0,breakpointMask:"S"}),this.addKeyframe({el:this.snipeEdits,group:this.group,start:"".concat(this.baseExpression," + 455vh"),end:"".concat(this.baseExpression," + 510vh"),anchors:[this.sectionElem],cssClass:"fade-in",toggle:!0,breakpointMask:"S"})}},{key:"updateMargins",value:function(){var e=1.1*this.deviceContainer.offsetHeight,t=152,n=Math.max(e+t-this._pageMetrics.windowHeight,0);this.overflowContainer.style.paddingBottom="".concat(n,"px"),this.sectionElem.style.marginBottom="".concat(n,"px"),this.dock.style.bottom="".concat(n+15,"px"),this.anim.forceUpdate()}},{key:"clearMargins",value:function(){this.overflowContainer.style.paddingBottom=null,this.sectionElem.style.marginBottom=null,this.dock.style.bottom=null}},{key:"init",value:function(){this.group=p.createScrollGroup(this.el),this.group.name="Cursor",this.sectionRect=this.sectionElem.getBoundingClientRect(),this.sectionVH=this.sectionRect.height/this._pageMetrics.windowHeight,this.isRTL="rtl"===document.documentElement.getAttribute("dir"),this.inlineEnd=this.isRTL?"left":"right",this.inlineStart=this.isRTL?"right":"left",this.direction=this.isRTL?-1:1;var e=this.stickyBoundingBox(this.deviceContainer.getBoundingClientRect()),t=this.stickyBoundingBox(this.photosIcon.getBoundingClientRect()),n=this.stickyBoundingBox(this.imageScreen.getBoundingClientRect()),r=this.stickyBoundingBox(this.headlineContainer.getBoundingClientRect()),i=this.stickyBoundingBox(this.notesIcon.getBoundingClientRect()),a=this.stickyBoundingBox(this.calendarIcon.getBoundingClientRect());this.offsetY=this._pageMetrics.windowHeight/2-(e.y+.5*e.height),this.offsetYSmall="S"===this.currentBreakpoint?e.y-(this._pageMetrics.windowHeight-.4*e.height):0,this.updateMargins(),this.createCopyKf(r),this.createSVG(r,i),this.createScaling(),this.createCursorAnimations(i,a,t),this.createIconAnimations(),this.createDockAnimations(),this.createScreenAnimations(a,n),this.createSnipeTriggerKeyframes()}},{key:"calculateOffset",value:function(e){var t=0;return t=this.sectionRect.y<-this.sectionRect.height*(this.sectionVH-1)/this.sectionVH?e.y-this.sectionRect.y-this.sectionRect.height+this._pageMetrics.windowHeight:this.sectionRect.y<0?e.y:e.y-this.sectionRect.y}},{key:"stickyBoundingBox",value:function(e){var t=this.calculateOffset(e);return{x:e.x,y:t,top:t,bottom:e.height+t,left:e.left,right:e.right,width:e.width,height:e.height}}},{key:"mounted",value:function(){var e=this;d(function(){e.init()}),m.swap(this,{toDark:{start:"a0b",anchors:[this.previousSectionElem]},toLight:{start:"".concat(this.baseExpression," + 150vh"),anchors:[this.sectionElem]}}),this.anim.on("before-anim-remove",function(){d(function(){e.clearMargins()})})}},{key:"onResizeDebounced",value:function(e){var t=this;this.group.remove().then(function(){e.breakpoint===t.currentBreakpoint&&t.init()})["catch"](function(e){})}}],[{key:"IS_SUPPORTED",value:function(){return!document.documentElement.className.match(/(\sreduced-motion)|(\sie)|(\sno-overview-enhanced)/)}}]),t}(f);t.exports=y},{134:134,48:48,58:58,78:78}],110:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return s(e)||o(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=e(78),v=e(72),g=!1,b=function(e){function t(e){var n;return c(this,t),n=l(this,p(t).call(this,e)),n.options=e,n.numOfTransitions=0,n.mainTimeline={},n.scaleAppTimelines={},n.videoEl=n.el.querySelector("video"),n.endFrame=n.el.querySelector(".endframe"),n.deviceContainer=n.el.querySelector(".device-container"),n.contentTimeline=n.el.querySelector("https://www.apple.com.cn/v/ipad-pro/y/built/scripts/.content-timeline.ar"),g=n.options.pageMetrics.windowWidth<736,n}return d(t,e),h(t,[{key:"mounted",value:function(){this._initAppSwitcherTimeline(),this._initCopyOpacity(),this._initCopyParallax(),this._setFixedPadding(this.options.pageMetrics)}},{key:"_initAppSwitcherTimeline",value:function(){var e=this,t=this.anim.createTimeGroup();t.name="Camera - AppSwitcher";var n=this.el.querySelector(".apps"),r=i(n.querySelectorAll(".screen"));this.numOfTransitions=r.length-1,this.videoFrame=0;var a="",o="",s=.2;this.chapters=[];var c=new Promise(function(i){for(var c=function(c){var u=.5,h=.6*u,l=.2,f=.2*u,p=h-2*f;a="".concat(c,"*100w + ").concat(c,"*10px"),o="(".concat(c,"+1) * 100w + (").concat(c,"+1)*10px"),t.addKeyframe(n,{start:s,end:s+h,x:[a,o]}),t.addKeyframe(r[c],{start:s,end:s+f,scale:[null,1]}),t.addKeyframe(r[c],{start:s+f+p,end:s+f+p+f,scale:[null,1]}),t.addKeyframe(r[c+1],{start:s,end:s+f,scale:[null,1]}),t.addKeyframe(r[c+1],{start:s+f+p,end:s+f+p+f,scale:[null,1]});var d=e.anim.createTimeGroup();d.name="app - ".concat(c);var m=d.addKeyframe({},{start:0,end:.8,progress:[s,s+h+l],easeFunction:"cubic-bezier(.56,.18,.58,.99)"});m.controller.on("draw",function(n){t.progress(n.tweenProps.progress.current),c===e.numOfTransitions-1&&i()}),e.chapters.push(d),s=s+h+l},u=0;u<e.numOfTransitions;u++)c(u)});c.then(function(){t.progress(0)})}},{key:"_initCopyOpacity",value:function(){var e=this;this.copyBlocks=i(this.el.querySelectorAll(".section-content .content-timeline .copy-wrap .feature-copyblock"));var t;this.copyBlocks.forEach(function(n,r){0!=r&&(e.addKeyframe({el:n.parentElement,start:"t - css(--content-timeline-height) - css(--localnav-height)",end:"t - css(--localnav-height) + 50h",cssClass:"fade-in",toggle:!0,anchors:[n]}),e.addDiscreteEvent({el:n.parentElement,start:"t - css(--content-timeline-height) - css(--localnav-height)",event:"play:".concat(r),onEvent:function(){t&&t.pause(),t=e.chapters[r-1],t.play(0)},onEventReverse:function(){t&&t.pause(),t=e.chapters[r-1],t.reverse(t.duration)},anchors:[n]}))})}},{key:"_initCopyParallax",value:function(){var e=this.el.querySelector(".shoot .feature-copyblock-subhead"),t=this.el.querySelector(".shoot .feature-copyblock-copy"),n=this.el.querySelector(".shoot .snipes"),r=[e,t,n];this._translateInCopy(r),this.anim.addKeyframe(this.el.querySelector(".cameras-snipe.image-overview-camera-cameras-snipe-take"),{start:"a0t - 37vh",end:"a0t - 12vh",y:["20px",0],breakpointMask:"S",anchors:[r[0]]});var i=this.el.querySelector(".depth .feature-copyblock-subhead"),a=this.el.querySelector(".depth .feature-copyblock-copy"),o=[i,a];this._translateInCopy(o)}},{key:"_translateInCopy",value:function(e){var t=this;e.forEach(function(n,r){t.anim.addKeyframe(n,{start:"a0t - 37vh",end:"a0t - 12vh",y:["20px + ".concat(r,"*20px"),0],breakpointMask:"MS",anchors:[e[0]]})})}},{key:"_setFixedPadding",value:function(e){var t=v.parse("h",{target:this.deviceContainer}),n=v.parse("h",{target:this.contentTimeline}),r=e.windowHeight,i=t+n;if(r<i){var a=(r-i)*-1;this.el.style.setProperty("--dynamic-offset","".concat(a,"px"))}else this.el.style.setProperty("--dynamic-offset","0px")}},{key:"onResizeDebounced",value:function(e){this._setFixedPadding(e)}}],[{key:"IS_SUPPORTED",value:function(){var e=document.documentElement.className.match(/(\sreduced-motion)|(\sie)|(\sno-overview-enhanced)/);return!e||g}}]),t}(y);t.exports=b},{72:72,78:78}],111:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=e(78),p=e(58),d=(e(48),function(e){function t(e){var n;return i(this,t),n=s(this,u(t).call(this,e)),n.snipeTransform=n.el.hasAttribute("data-snipe-transform"),n.snipeIn=JSON.parse(n.el.dataset.snipeIn),n.snipeOut=JSON.parse(n.el.dataset.snipeOut),n.anchor=n.el.dataset.anchor,n.triggerClassName="animation-trigger",n.snipeHasSprite=n.el.querySelector(".image-sprite"),n.anchor=document.querySelector(n.anchor),n.currentOpacity=0,n.keyFrameInit=!1,n}return h(t,e),o(t,[{key:"mounted",value:function(){this.triggerSpriteAnimation()}},{key:"_snipeKeyframe",value:function(e){var t=e==this.snipeIn?[0,1]:[1,0],n={el:this.el,opacity:t,anchors:[this.anchor]};for(var r in e)n[r]=e[r];return n}},{key:"triggerSpriteAnimation",value:function(){var e=this,t=p.addKeyframe(this.el,this._snipeKeyframe(this.snipeIn)),n=p.addKeyframe(this.el,this._snipeKeyframe(this.snipeOut));this.snipeTransform&&p.addKeyframe(this.el,{el:this.el,anchors:[this.anchor],start:this.snipeIn.start,end:this.snipeOut.end,y:[30,-30]}),this.snipeHasSprite&&[t,n].forEach(function(t){t.controller.on("draw",function(t){e.currentOpacity=t.tweenProps.opacity.current,!e.keyFrameInit&&e.currentOpacity>.5&&(e.keyFrameInit=!0,e.el.classList.add(e.triggerClassName)),0===e.currentOpacity&&(e.keyFrameInit=!1,e.el.classList.remove(e.triggerClassName))})})}}],[{key:"IS_SUPPORTED",value:function(){return!document.documentElement.className.match(/(\sreduced-motion)|(\sie)|(\sno-overview-enhanced)/)}}]),t}(f));t.exports=d},{48:48,58:58,78:78}],112:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return s(e)||o(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=e(78),v=e(48),g=e(83),b=e(134),E=function(e){function t(e){var n;return c(this,t),n=l(this,p(t).call(this,e)),n.options=e,n.section=document.querySelector(".section-cameras"),n.cameraContainer=n.el.querySelector(".camera-container"),n.camera=n.el.querySelector(".camera"),n.cameraSystemHeadline=document.querySelector(".camera-system-headline"),n.cameraSensorHeadline=document.querySelector(".camera-sensor-headline"),n.cameraRareHeadline=document.querySelector(".camera-rare-headline"),n.cameraRotationTrigger=document.querySelector(".hardware-rotation-trigger"),n.cameraGutTrigger=document.querySelector(".camera-gut-trigger"),n.cameraZoomTrigger=document.querySelector(".camera-zoom-trigger"),n.lidarAnimationTrigger=document.querySelector(".lidar-animation-trigger"),n.videoWidth=parseInt(getComputedStyle(n.section).getPropertyValue("--video-width")),n.videoHeight=parseInt(getComputedStyle(n.section).getPropertyValue("--video-height")),n.videoGutWidth=parseInt(getComputedStyle(n.section).getPropertyValue("--video-gut-width")),n.videoRatio=n.videoWidth/n.videoHeight,n.setRatio(e.pageMetrics),n}return d(t,e),h(t,[{key:"mounted",value:function(){var e=this;this.HardwareRotation=this.gum.getComponentOfType("HardwareRotation");var t=this.anim.createTimeGroup();t.name="Camera Zoom",this.headlineFadeIn(),this.addContinuousEvent({start:"a0t + 50vh",end:"a0b",progress:[0,1],anchors:[this.cameraZoomTrigger],onDraw:function(e){t.progress(e.tweenProps.progress.current)}}),this.addKeyframe({start:"a0t",end:"a1b",cssClass:"show",toggle:!0,anchors:[this.cameraRotationTrigger,this.cameraZoomTrigger]}),[document.querySelector(".section-cameras .sticky-wrapper"),this.el.querySelector(".image-overview-camera-cameras-lidar")].forEach(function(t){e.anim.addKeyframe(t,{start:"a0b",cssClass:"fade-in",toggle:!0,anchors:[e.cameraSystemHeadline]})});var n=1;t.addKeyframe({},{start:0,end:1,length:[0,1]});var r="css(--base) * css(--ratio)/css(--gut-width)";this.HardwareRotation.once("updated:cssvar",function(){v(function(){e.scaleKeyframe=t.addKeyframe(e.camera,{start:0,end:1*n,y:[0,"-css(--ipad-right-end-y) + css(--center-lense-y)"],x:[0,"-css(--ipad-right-x) + css(--ipad-right-x) - css(--ipad-right-end-x)  + css(--center-lense-x)"],scale:[1,r],anchors:[e.cameraContainer]})})}),t.addKeyframe(this.el.querySelector(".camera-lense-gut"),{start:.3*n,end:.5*n,opacity:[0,1]}),b.swap(this,{toDark:{start:"a0b",anchors:[this.cameraSystemHeadline]},toLight:{start:"a0b",anchors:[this.lidarAnimationTrigger]}})}},{key:"headlineFadeIn",value:function(){var e=[this.cameraGutTrigger.querySelector(".feature-copyblock-subhead"),this.cameraGutTrigger.querySelector(".feature-copyblock-copy")].concat(i(this.cameraGutTrigger.querySelectorAll("li"))),t=[this.cameraSensorHeadline.querySelector(".feature-copyblock-subhead")].concat(i(this.cameraSensorHeadline.querySelectorAll(".feature-copyblock-copy")));this.copyElementFadeIn(e),this.copyElementFadeIn(t),this.copyElementFadeIn([this.cameraRareHeadline])}},{key:"copyElementFadeIn",value:function(e){var t=this;e.forEach(function(n,r){t.anim.addKeyframe(n,{start:"a0t - 55vh",end:"a0t - 30vh",y:["20px + ".concat(r,"*20px"),0],anchors:[e[0]],breakpointMask:"ML"})}),this.anim.addKeyframe(g(e[0],"[data-anim-fade-in]"),{start:"a0t - 50vh",cssClass:"fade-in",toggle:!0,anchors:[e[0]]})}},{key:"setRatio",value:function(e){e.windowHeight*this.videoRatio<e.windowWidth?(this.section.style.setProperty("--base","100vw"),this.section.style.setProperty("--ratio",this.videoGutWidth/this.videoWidth)):(this.section.style.setProperty("--base","100vh"),this.section.style.setProperty("--ratio",this.videoGutWidth/this.videoHeight))}}],[{key:"IS_SUPPORTED",value:function(){return!document.documentElement.className.match(/(\sreduced-motion)|(\sie)|(\sno-overview-enhanced)/)}}]),t}(y);t.exports=E},{134:134,48:48,78:78,83:83}],113:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=e(78),p=function(e){function t(e){var n;return i(this,t),n=s(this,u(t).call(this,e)),n.ipad13=n.el.querySelector(".display-ipad-13-small"),n.introHeadline=n.el.querySelector(".subsection-display-intro-small [data-anim-fade-out]"),n}return h(t,e),o(t,[{key:"mounted",value:function(){var e=".sticky-wrapper-hero-small";this.anim.addKeyframe(this.ipad13,{start:"a0t - 50vh",end:"a0b",cssClass:"will-change",breakpointMask:"S",anchors:[e]}),this.anim.addKeyframe(this.ipad13,{start:"a0t + 100vh - css(--lovalnav-height)",end:"a0t + 150vh",scale:["max(100vw/90w, 100vh/60h)",1],y:["-20h - 50vh",0],breakpointMask:"S",anchors:[e]}),this.anim.addKeyframe(this.introHeadline,{start:"a0t + 120vh",cssClass:"fade-out",toggle:!0,breakpointMask:"S",anchors:[e]})}}],[{key:"IS_SUPPORTED",value:function(){var e=window.matchMedia("(max-width: 734px)").matches||window.matchMedia("(max-height: 710px)").matches;return!!e&&!document.documentElement.className.match(/(\sno-overview-enhanced)/)}}]),t}(f);t.exports=p},{78:78}],114:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=e(78),p=function(e){function t(e){var n;return i(this,t),n=s(this,u(t).call(this,e)),n.ipad11=n.el.querySelector(".display-sizes-ipad-11-small"),n.ipad13=n.el.querySelector(".display-sizes-ipad-13-small"),n.sizesAnchorElSelector=n.el,n.sizesSnipeLabels=n.el.querySelector(".display-size-labels-small"),n}return h(t,e),o(t,[{key:"mounted",value:function(){this.anim.addKeyframe(this.ipad13,{start:"a0t - 5vh",end:"a0t + 20vh",x:[0,"50w - 10px"],easeFunction:"easeInOutSin",breakpointMask:"S",anchors:[this.sizesAnchorElSelector]}),this.anim.addKeyframe(this.ipad11,{start:"a0t - 5vh",end:"a0t + 20vh",x:[0,"-50a1w"],easeFunction:"easeInOutSin",breakpointMask:"S",anchors:[this.sizesAnchorElSelector,this.ipad13]}),this.anim.addKeyframe(this.sizesSnipeLabels,{start:"a0t + 5vh",end:"a0t + 20vh",cssClass:"fade-in",toggle:!0,breakpointMask:"S",anchors:[this.sizesAnchorElSelector]})}}],[{key:"IS_SUPPORTED",value:function(){var e=window.matchMedia("(max-width: 734px)").matches||window.matchMedia("(max-height: 710px)").matches;return!!e&&!document.documentElement.className.match(/(\sno-overview-enhanced)/)}}]),t}(f);t.exports=p},{78:78}],115:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=e(78),p=function(e){function t(e){return i(this,t),s(this,u(t).call(this,e))}return h(t,e),o(t,[{key:"mounted",value:function(){var e=this,t=".timeline-display-retina";this.addDiscreteEvent({start:"a0t - 35vh",event:"unlock-play",breakpointMask:"ML",anchors:[t],onEvent:function(){e.el.classList.add("unlock-play")}}),this.addDiscreteEvent({start:"a0t - 100vh",event:"unlock-reset",breakpointMask:"ML",anchors:[t],onEvent:function(){e.el.classList.remove("unlock-reset")},onEventReverse:function(){e.el.classList.add("unlock-reset"),e.el.classList.remove("unlock-play")}})}}],[{key:"IS_SUPPORTED",value:function(){var e=window.matchMedia("(max-width: 734px)").matches;return!e&&!document.documentElement.className.match(/(\sno-overview-enhanced)/)}}]),t}(f);t.exports=p},{78:78}],116:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=e(78),p=function(e){function t(e){var n;return i(this,t),n=s(this,u(t).call(this,e)),n.introHeadline=n.el.querySelector(".subsection-display-intro [data-anim-fade-out]"),n.ipad11=n.el.querySelector(".sticky-wrapper-display .display-ipad-11"),n.ipad13=n.el.querySelector(".sticky-wrapper-display .display-ipad-13"),n.videoStartframeContainer=n.el.querySelector(".display-screen-startframes"),n.displayScreen=n.el.querySelector(".display-screen"),n.videoStartframeBlurred=n.el.querySelector(".display-video-startframe-blurred"),n.swipeBarUi=n.el.querySelector(".display-screen-unlocked .display-screen-bar"),n.retinaCopy=n.el.querySelector(".subsection-display-retina .feature-copyblock"),n.retinaCopy.setAttribute("data-anim-fade-in",""),n.snipesContainer=n.el.querySelector(".subsection-display-snipes"),n.sizesSnipeLabels=n.el.querySelector(".display-size-labels"),n.sizesAnchorElSelector=n.el.querySelector(".timeline-display-sizes"),n}return h(t,e),o(t,[{key:"mounted",value:function(){this.setupWillChangeKeyframes(),this.setupIntroKeyframes(),this.setupRetinaKeyframes(),this.setupSnipesKeyframes(),this.setupSizesKeyframes()}},{key:"setupWillChangeKeyframes",value:function(){var e=".timeline-display-intro";this.anim.addKeyframe(this.el,{start:"a0t - 100vh",end:"a0b + 150vh",cssClass:"will-change-hero",toggle:!0,breakpointMask:"ML",anchors:[e]})}},{key:"setupIntroKeyframes",value:function(){var e=".timeline-display-intro";this.anim.addKeyframe(this.ipad13,{start:"a0t - 10vh",end:"a0b",scale:["max(100vw/90w, 100vh/70h)","css(--intro-end-scale)"],y:["-50vh - 200px","50h - 50vh + 40vh"],easeFunction:"easeInOutQuad",breakpointMask:"L",anchors:[e]}),this.anim.addKeyframe(this.ipad13,{start:"a0t - 10vh",end:"a0b",scale:["max(100vw/90w, 100vh/66h)","css(--intro-end-scale)"],y:["-50vh - 220px","min(50h - 50vh + 40vh, 50h - 50vh + 400px)"],easeFunction:"easeInOutQuad",breakpointMask:"M",anchors:[e]
}),this.anim.addKeyframe(this.introHeadline,{start:"a0t + 30vh",cssClass:"fade-out",toggle:!0,breakpointMask:"ML",anchors:[e]})}},{key:"setupRetinaKeyframes",value:function(){var e=".timeline-display-retina";this.anim.addKeyframe(this.ipad13,{start:"a0t",end:"a0b",scale:["css(--intro-end-scale)",1],y:[null,0],easeFunction:"easeInOutQuad",breakpointMask:"ML",anchors:[e]}),this.anim.addKeyframe(this.displayScreen,{start:"a0b - 25vh",end:"a0b + 10vh",y:[0,"-101h"],easeFunction:"linear",breakpointMask:"ML",anchors:[e]}),this.anim.addKeyframe(this.videoStartframeContainer,{start:"a0b - 25vh",end:"a0b + 10vh",y:[0,"30h"],breakpointMask:"ML",anchors:[e]}),this.anim.addKeyframe(this.videoStartframeBlurred,{start:"a0b - 25vh",end:"a0b - 5vh",opacity:[0,1],easeFunction:"cubic-bezier(0.075, 0.82, 0.165, 1)",breakpointMask:"ML",anchors:[e]}),this.anim.addKeyframe(this.swipeBarUi,{start:"a0b + 8vh",end:"a0b + 12vh",opacity:[0,1],breakpointMask:"ML",anchors:[e]}),this.anim.addKeyframe(this.retinaCopy,{start:"a0t - 40vh",end:"a0t + 40vh",cssClass:"fade-in",toggle:!0,breakpointMask:"ML",anchors:[e]})}},{key:"setupSnipesKeyframes",value:function(){var e=".timeline-display-snipes";this.anim.addKeyframe(this.snipesContainer,{start:"a0t - 20vh",cssClass:"fade-in",toggle:!0,breakpointMask:"ML",anchors:[e]}),this.anim.addKeyframe(this.snipesContainer,{start:"a0t + 50vh",cssClass:"fade-out",toggle:!0,breakpointMask:"L",anchors:[e]}),this.anim.addKeyframe(this.snipesContainer,{start:"a0t + 40vh",cssClass:"fade-out",toggle:!0,breakpointMask:"M",anchors:[e]})}},{key:"setupSizesKeyframes",value:function(){this.anim.addKeyframe(this.el,{start:"a0t - 75vh",anchors:[this.sizesAnchorElSelector],cssClass:"transform-origin-bottom",toggle:!0,breakpointMask:"ML"}),this.anim.addKeyframe(this.ipad13,{start:"a0t - 70vh",end:"a0t",x:[0,"css(--sizes-center-offset) - 50w"],breakpointMask:"ML",anchors:[this.sizesAnchorElSelector]}),this.anim.addKeyframe(this.ipad11,{start:"a0t - 70vh",end:"a0t",x:[0,"(css(--sizes-center-offset) * -1) + 50w"],breakpointMask:"ML",anchors:[this.sizesAnchorElSelector]}),this.anim.addKeyframe(this.sizesSnipeLabels,{start:"a0t - 30vh",end:"a0t",cssClass:"fade-in",toggle:!0,breakpointMask:"ML",anchors:[this.sizesAnchorElSelector]})}}],[{key:"IS_SUPPORTED",value:function(){var e=window.matchMedia("(max-width: 734px)").matches;return!e&&!document.documentElement.className.match(/(\sno-overview-enhanced)/)}}]),t}(f);t.exports=p},{78:78}],117:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return{X:"xlarge",L:"large",M:"medium",S:"small"}[e]}var p=e(78),d=e(7),m=e(8),y=e(133),v={flow:"https://www.apple.com.cn/flow/flow_manifest.json",mask:"https://www.apple.com.cn/mask/mask_manifest.json"},g=function(e){function t(e){var n;i(this,t),n=s(this,u(t).call(this,e)),n.baseURL=n.el.dataset.baseUrl,n.anchor=n.el.dataset.anchor||n.el,n.alpha=n.el.dataset.alpha,n.duration=n.el.dataset.duration||1,n.retinaViewport=n.el.dataset.retina,n.canvas=n.el.querySelector("canvas"),n.startEnd=n.el.dataset.animStartend?JSON.parse(n.el.dataset.animStartend):{start:"a0t",end:"a0b - 100vh"};var r=Object.assign({progress:[0,n.duration],anchors:[n.anchor]},n.startEnd);return n.animOptions=Object.assign(r,n.el.dataset.anim),n.currentViewport=f(e.pageMetrics.breakpoint),n.inLoadArea=!1,n.poolSize,n}return h(t,e),o(t,[{key:"mounted",value:function(){var e=this;this.addDiscreteEvent({start:"t - 300vh",end:"b + 300vh",event:"load:flow",onEnter:function(){e.inLoadArea=!0,e.initFlow()},onExit:function(){e.inLoadArea=!1,e.poolSize=e.flow.glCanvas.texturePool.size,e.flow.glCanvas.texturePool._objects=[],e.flow.glCanvas.texturePool._all=[],e.flow.glCanvas.texturePool.size=0}})}},{key:"initFlow",value:function(){if(this.flow)return void this.flow.glCanvas.modifyPoolSize(this.poolSize);var e=this.retinaViewport===this.currentViewport?this.currentViewport+"_2x":this.currentViewport,t="".concat(this.baseURL,"/").concat(e);this.alpha?this.createAlphaFlow(t):this.createFlow(t)}},{key:"createFlow",value:function(e){var t=this;this.flow=new m("".concat(e).concat(v.flow),this.canvas),this.flow.startLoading(),this.flow.once(m.Events.ChapterFramesLoaded,function(){t.animKeyFrame=t.addKeyframe(Object.assign({group:t.anim.getGroupForTarget(t.el),el:t.flow},t.animOptions)),t.resize(),t.canvas.classList.add("visible"),t.trigger("canplay",t.el)}),this.flow.once(m.Events.ManifestReady,function(e){t.frameCount=e})}},{key:"createAlphaFlow",value:function(e){var t=this,n={url:"".concat(e).concat(v.flow),fps:30,extension:"jpg"},r={url:"".concat(e).concat(v.mask),fps:30,extension:"jpg"};this.flow=new d(n,r,this.canvas),this.flow.startLoading().then(function(){t.resize(),t.canvas.classList.add("visible"),t.animKeyFrame=t.anim.addKeyframe(t.flow,t.animOptions),t.trigger("canplay")}),this.flow.once(m.Events.ManifestReady,function(e){t.frameCount=e})}},{key:"resize",value:function(){this.retinaViewport===this.currentViewport&&(this.canvas.style.width="".concat(this.canvas.width/2,"px"),this.canvas.style.height="".concat(this.canvas.height/2,"px"))}},{key:"onBreakpointChange",value:function(e){this.canvas.classList.remove("visible")}},{key:"onResizeDebounced",value:function(){this.gum.keyframeGroupsActive||(document.documentElement.classList.remove("allow-hero"),this.canvas.classList.remove("visible"))}}],[{key:"IS_SUPPORTED",value:function(){return document.documentElement.classList.contains("allow-hero")?!!y()||(document.documentElement.classList.remove("allow-hero"),!1):!document.documentElement.className.match(/(\sreduced-motion)|(\sie)|(\sno-overview-enhanced)/)}}]),t}(p);t.exports=g},{133:133,7:7,78:78,8:8}],118:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=e(78),p=e(72),d=e(48),m=function(e){function t(e){var n;return i(this,t),n=s(this,u(t).call(this,e)),n.ipad11=n.el.querySelector(".display-ipad-11"),n.ipad13=n.el.querySelector(".display-ipad-13"),n.cameraSection=document.querySelector(".section-cameras"),n.cameraSystemHeadline=document.querySelector(".camera-system-headline"),n.rationTrigger=document.querySelector(".hardware-rotation-trigger"),n.cameraZoomTrigger=document.querySelector(".camera-zoom-trigger"),n.currentBreakpoint=e.pageMetrics.breakpoint,n.cameraEnd={M:{x:"css(--ipad-right-x) + 50px",y:"max(0, (50vh-350))"},S:{x:"50w - 87.5vw/2 + 8px",y:"20vh + 20px"}},n}return h(t,e),o(t,[{key:"mounted",value:function(){var e=this;"S"===this.currentBreakpoint?this.DisplayZoom=this.gum.getComponentOfType("DisplaySizesSplitSmall"):this.DisplayZoom=this.gum.getComponentOfType("DisplayZoomSplit"),this.anim.addKeyframe(this.rationTrigger,{start:"t - 100vh + 40h",cssClass:"move-back",toggle:!0}),this.once("updated:cssvar",function(){e.anim.addKeyframe(e.ipad11,{start:"a0t - max(100vh, css(--max-height-large))",end:"a0t",x:["css(--ipad-left-x)","css(--ipad-left-x) - 100px"],y:[0,"-50vh -150h"],scale:[1,1.5],easeFunction:"cubic-bezier(0,.15,1,.59)",anchors:[e.rationTrigger]}),e.anim.addKeyframe(e.ipad13,{start:"a0t - 100vh",end:"a0t - 80vh",x:["css(--ipad-right-x)",e.cameraEnd.M.x],y:[0,e.cameraEnd.M.y],anchors:[e.rationTrigger],breakpointMask:"M"}),e.anim.addKeyframe(e.ipad13,{start:"a0t - 100vh",end:"a0t",y:[0,e.cameraEnd.S.y],anchors:[e.rationTrigger],breakpointMask:"S"}),e.anim.addKeyframe(e.ipad13,{start:"a0t - 40vh",end:"a0t",x:["css(--ipad-right-x)",e.cameraEnd.S.x],anchors:[e.rationTrigger],breakpointMask:"S"})});var t={start:"a0t - max(100vh, css(--max-height-large))",toggle:!0,anchors:[this.rationTrigger]};this.addDiscreteEvent(Object.assign({el:this.ipad11,cssClass:"show"},t)),this.addKeyframe({el:this.ipad13,start:"a0t - max(100vh, css(--max-height-large))",end:"a1b",cssClass:"show",toggle:!0,anchors:[this.rationTrigger,this.cameraSystemHeadline]}),this.addKeyframe({el:this.ipad13,start:"a0b - 10vh",cssClass:"transition",toggle:!0,anchors:[this.cameraSystemHeadline]}),this.addDiscreteEvent(Object.assign({el:this.DisplayZoom.ipad11,style:{on:{opacity:0}}},t)),this.addDiscreteEvent(Object.assign({el:this.DisplayZoom.ipad13,style:{on:{opacity:0}}},t)),d(function(){e.updateDevicesPosition()})}},{key:"updateDevicesPosition",value:function(){var e=this;this.ipad11.x=p.parse(this.DisplayZoom.ipad11._animInfo.controller.keyframes.x[0].jsonProps.x[1],{target:this.DisplayZoom.ipad11,anchors:[this.DisplayZoom.sizesAnchorElSelector,this.DisplayZoom.ipad13]}),this.ipad13.x=p.parse(this.DisplayZoom.ipad13._animInfo.controller.keyframes.x[0].jsonProps.x[1],{target:this.DisplayZoom.ipad13,anchors:[this.DisplayZoom.sizesAnchorElSelector]});var t={ipad11:"ipad-left",ipad13:"ipad-right"};if(["ipad11","ipad13"].forEach(function(n){e.cameraSection.style.setProperty("--".concat(t[n],"-x"),e[n].x+"px")}),"L"!==this.currentBreakpoint){var n=p.parse(this.cameraEnd[this.currentBreakpoint].y,{target:this.ipad13});this.cameraSection.style.setProperty("--ipad-right-end-y",n+"px");var r=p.parse(this.cameraEnd[this.currentBreakpoint].x,{target:this.ipad13});this.cameraSection.style.setProperty("--ipad-right-end-x",r+"px")}else this.cameraSection.style.setProperty("--ipad-right-end-y","0px"),this.cameraSection.style.setProperty("--ipad-right-end-x",this.ipad13.x+"px");this.trigger("updated:cssvar")}},{key:"onResizeDebounced",value:function(e){this.currentBreakpoint===e.breakpoint&&this.updateDevicesPosition()}}],[{key:"IS_SUPPORTED",value:function(){return!document.documentElement.className.match(/(\sno-overview-enhanced)/)}}]),t}(f);t.exports=m},{48:48,72:72,78:78}],119:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=e(78),p=e(48),d=function(e){function t(e){var n;return i(this,t),n=s(this,c(t).call(this,e)),n.videoEl=n.el.querySelector("video")||n.el,n.pauseRelativeTo=n.el.dataset.pauseRelativeTo||n.el,n.replay=n.el.dataset.replay,n.autoReplay=n.el.hasAttribute("data-auto-replay"https://www.apple.com.cn/v/ipad-pro/y/built/scripts/),n.customExpressions=n.el.dataset.anim?JSON.parse(n.el.dataset.anim):{},n.animOptions=Object.assign({start:"a0t - 50vh",end:"a0b + 100vh",anchors:[n.pauseRelativeTo]},n.customExpressions),n.replay&&(n.replayButton=document.querySelector('[data-replay-for="'.concat(n.videoEl.id,'"]')),n.replayButton.addEventListener("click",n._rePlay.bind(u(n)))),n}return h(t,e),o(t,[{key:"mounted",value:function(){var e=this;this.endFrame=this.el.querySelector("[data-video-endframe]"),this.videoComponent=this.gum.getComponentOfType("VideoViewportSource",this.videoEl),this.videoComponent.video.addEventListener("ended",this._onMediaEnded.bind(this)),this.videoComponent.video.addEventListener("play",this._onPlay.bind(this)),this.autoReplay?this.addDiscreteEvent(Object.assign({event:"Video: Play - Auto Replay",onEnter:function(){return e.videoComponent.queueVideoPlayback()},onExit:function(){return e._reset()}},this.animOptions)):this.addDiscreteEvent(Object.assign({event:"Video: Play",onEnterOnce:function(){return e.videoComponent.queueVideoPlayback()},onExit:function(){return e._reset()}},this.animOptions))}},{key:"_reset",value:function(){var e=this;p(function(){e.videoComponent.pauseVideoPlayback(),e.videoComponent.video.currentTime=0}),this._onMediaEnded()}},{key:"_onMediaEnded",value:function(){this.replayButton&&(this.replayButton.disabled=!1),this.endFrame&&(this.endFrame.classList.remove("hide"),this.videoComponent.video.classList.add("hide"))}},{key:"_onPlay",value:function(){this.videoComponent.video.classList.remove("hide")}},{key:"_rePlay",value:function(){this.replayButton&&(this.replayButton.disabled=!0),this.endFrame&&this.endFrame.classList.add("hide"),this.videoComponent.video.play()}}],[{key:"IS_SUPPORTED",value:function(){return!document.documentElement.className.match(/(\sno-inline-video)|(\sreduced-motion)|(\sie)|(\sno-overview-enhanced)/)}}]),t}(f);t.exports=d},{48:48,78:78}],120:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=e(78),p=e(108),d=e(107),m=function(e){function t(e){var n;return i(this,t),n=s(this,u(t).call(this,e)),n.allowVideoScrub=document.documentElement.classList.contains("video-scrub"),n.media=n.el.querySelector("video"),n.isRetina=window.devicePixelRatio>1&&n.media.dataset.enableRetina,n.allowVideoScrub||(n.imageSequence=new d({numImages:parseInt(n.el.dataset.sequence),numPadding:4,viewport:p(e.pageMetrics.breakpoint),retina:n.isRetina}),n.media=n.imageSequence.canvas),n.animationTrigger=document.querySelector(".lidar-animation-trigger"),n.section=document.querySelector(".section-cameras"),n.videoWidth=parseInt(getComputedStyle(n.section).getPropertyValue("--video-width")),n.videoHeight=parseInt(getComputedStyle(n.section).getPropertyValue("--video-height")),n.videoRatio=n.videoWidth/n.videoHeight,n.updateVideoScale(e.pageMetrics),n}return h(t,e),o(t,[{key:"mounted",value:function(){this.allowVideoScrub?this.setUpVideoScrub():this.setUpSequence()}},{key:"setUpVideoScrub",value:function(){var e=this;this.addKeyframe({el:this.media,start:"a0t",cssClass:"show",toggle:!0,anchors:[this.animationTrigger]}),this.addContinuousEvent({el:this.media,start:"a0t",end:"a0b - 100vh",event:"play-particle-video",progress:[0,1],anchors:[this.animationTrigger],onDraw:function(t){void 0!==e.media.currentTime&&e.media.duration&&(e.media.currentTime=t.tweenProps.progress.current*e.media.duration)}})}},{key:"setUpSequence",value:function(){var e=this;this.imageSequence.once(d.FIRST_IMAGE_LOADED,function(t){e.el.querySelector(".video-particles").appendChild(e.imageSequence.canvas),e.prepareAnimation()}),this.imageSequence.once(d.LOADING_COMPLETE,function(){return console.log("loading complete")}),this.imageSequence.loadImages()}},{key:"prepareAnimation",value:function(){var e=this;this.addKeyframe({el:this.media,start:"a0t",cssClass:"show",toggle:!0,anchors:[this.animationTrigger]}),this.anim.addKeyframe(this.imageSequence,{percent:[0,1],start:"a0t",end:"a0b - 100vh",event:"update:sequence",anchors:[this.animationTrigger]}),this.addDiscreteEvent({el:this.el,start:"a0t - 200vh",end:"a0b",event:"load:sequence",anchors:[this.animationTrigger],onEnter:function(){e.imageSequence.inLoadArea=!0,e.imageSequence.loadbucket()},onExit:function(){e.imageSequence.inLoadArea=!1}})}},{key:"updateVideoScale",value:function(e){e.windowHeight*this.videoRatio<e.windowWidth?this.media.classList.remove("video-cover"):this.media.classList.add("video-cover")}},{key:"onResizeDebounced",value:function(e){this.updateVideoScale(e)}},{key:"onBreakpointChange",value:function(e){}}],[{key:"IS_SUPPORTED",value:function(){return!document.documentElement.className.match(/(\sreduced-motion)|(\sie)|(\sno-overview-enhanced)/)}}]),t}(f);t.exports=m},{107:107,108:108,78:78}],121:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return s(e)||o(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=e(78),v=(e(48),e(83)),g=e(134),b=function(e){function t(e){var n;return c(this,t),n=l(this,p(t).call(this,e)),n.angleCanvas=n.el.querySelector(".magickeyboard-angle canvas"),n.keyboardCanvas=n.el.querySelector(".magickeyboard-keyboard canvas"),n.standTrigger=document.querySelector("#section-magic-keyboard .stand-trigger"),n.angleTrigger=document.querySelector("#section-magic-keyboard .angle-trigger"),n.keyboardTrigger=document.querySelector("#section-magic-keyboard .keyboard-trigger"),n.snipeDesign=n.el.querySelector(".image-overview-keyboard-keyboard-snipe-design"),n.snipeMagnet=n.el.querySelector(".image-overview-keyboard-keyboard-snipe-magnet"),n.snipeAngle=n.el.querySelector(".image-overview-keyboard-keyboard-snipe-angle"),n.bg=n.el.querySelector("https://www.apple.com.cn/v/ipad-pro/y/built/scripts/.section-magic-keyboard .bg"),n.magicTyping=n.el.querySelector(".magic-typing [data-anim-fade-in]"),n.angleKeyline=n.el.querySelector(".magickeyboard-angle .keyline"),n.endFrame=n.el.querySelector(".endframe"),n.keyboardBacklitAnchor=n.el.querySelector(".keyboard-backlit-trigger"),n.keyboardBackLitCopyblock=n.el.querySelector(".backlit-copyblock"),n.keyboardTrackpadAnchor=n.el.querySelector(".keyboard-trackpad-trigger"),n.keyboardTrackpadCopyblock=n.el.querySelector(".trackpad-copyblock"),n.keyboardTrackpadImage=n.el.querySelector(".keyboard-trackpad .image-overview-keyboard-keyboard-trackpad"),n}return d(t,e),h(t,[{key:"mounted",value:function(){this.setupStandKeyframes(),this.setupAngleKeyframes(),this.setupKeyboardKeyframes(),this.setupBackLitKeyframes(),this.setupTrackpadKeyframes(),g.swap(this,{toDark:{start:"a0t - 60vh",anchors:[this.keyboardTrigger]},toLight:{start:"a0t - 100vh",anchors:[this.keyboardTrackpadAnchor]}})}},{key:"setupStandKeyframes",value:function(){var e=this,t=i(document.querySelector(".stand-trigger .column").children);t.forEach(function(n,r){e.addKeyframe({el:n,start:"a0t - css(--localnav-height) - 55vh",end:"a0t - css(--localnav-height) - 35vh",y:["20px + ".concat(r,"* 20px"),0],anchors:[t[0]],breakpointMask:"ML"})}),this.addKeyframe({el:v(t[0],"[data-anim-fade-in]"),start:"t - css(--localnav-height)- 55vh",cssClass:"fade-in",toggle:!0,breakpointMask:"ML"}),this.standOnSmall(),this.addKeyframe({start:"a0t - 100vh",cssClass:"show",toggle:!0,anchors:[this.standTrigger]}),this.addKeyframe({el:this.magicTyping,start:"t + 50h - 50vh",cssClass:"fade-in",toggle:!0,breakpointMask:"ML"}),[this.snipeDesign,this.snipeMagnet].forEach(function(t){e.addKeyframe({el:t,start:"a0t + 50a0h - 50vh",end:"a0t",cssClass:"fade-in",toggle:!0,anchors:[e.magicTyping],breakpointMask:"ML"})}),this.addKeyframe({el:this.snipeAngle,start:"a0t",end:"a0t + 20a0h",cssClass:"fade-in",toggle:!0,anchors:[this.angleTrigger]})}},{key:"standOnSmall",value:function(){var e=this,t=this.el.querySelector(".keyboard-headline [data-anim-fade-in]");this.addKeyframe({el:t,start:"t - 50vh",end:"a0b - 80vh",cssClass:"fade-in",toggle:!0,anchors:[this.magicTyping],breakpointMask:"S"}),this.addKeyframe({el:this.magicTyping,start:"a0t",cssClass:"fade-in",toggle:!0,anchors:[t],breakpointMask:"S"}),[this.snipeDesign,this.snipeMagnet].forEach(function(n){e.addKeyframe({el:n,start:"a0t",cssClass:"fade-in",toggle:!0,anchors:[t],breakpointMask:"S"})})}},{key:"setupAngleKeyframes",value:function(){this.addKeyframe({el:this.endFrame,start:"a0t",cssClass:"hide",toggle:!0,anchors:[this.angleTrigger]}),this.addKeyframe({el:this.snipeAngle,start:"a0t",end:"a0t + 20a0h",cssClass:"fade-in",toggle:!0,anchors:[this.angleTrigger]}),this.addKeyframe({el:this.angleCanvas,start:"a0t",end:"a0b -100vh",cssClass:"show",toggle:!0,anchors:[this.angleTrigger],breakpointMask:"ML"}),this.addKeyframe({el:this.angleCanvas,start:"a0t - 100vh",end:"a0b -100vh",cssClass:"show",toggle:!0,anchors:[this.angleTrigger],breakpointMask:"S"}),this.addKeyframe({el:this.angleKeyline,start:"a0t",end:"a0b - 100vh",cssClass:"fade-in",toggle:!0,anchors:[this.angleTrigger]}),this.addKeyframe({el:this.angleCanvas.parentElement,start:"a0b - 130vh",end:"a0b - 110vh",y:[0,"css(margin-top, a1)/2"],anchors:[this.angleTrigger,this.keyboardCanvas.parentElement],breakpointMask:"ML"})}},{key:"setupKeyboardKeyframes",value:function(){this.addKeyframe({el:this.keyboardCanvas,start:"a0t - 100vh",cssClass:"show",toggle:!0,anchors:[this.keyboardTrigger]}),this.addKeyframe({el:this.bg,start:"a0t - 60vh",end:"a1t - 100vh",cssClass:"fade-in",toggle:!0,anchors:[this.keyboardTrigger,this.keyboardTrackpadAnchor]}),this.addKeyframe({el:this.keyboardCanvas.parentElement,start:"a0t - 90vh",end:"a0b - 150vh",x:[0,"css(--left-alignment)"],y:[0," -(100h - (100vh - css(--localnav-height)))/2 - css(--bottom-padding) + css(--bottom-alignment)"],anchors:[this.keyboardTrigger],breakpointMask:"ML"}),this.addKeyframe({el:this.keyboardCanvas.parentElement,start:"a0t - 100vh",end:"a0b - 150vh",x:[0,"css(--left-alignment)"],y:[0,"(100a1h - 100h) - css(--bottom-padding) + css(--bottom-alignment)"],anchors:[this.keyboardTrigger,this.el.querySelector(".sticky-wrapper-keyboard .sticky")],breakpointMask:"S"})}},{key:"setupBackLitKeyframes",value:function(){this.addKeyframe({el:this.keyboardBackLitCopyblock,start:"a0t - 100vh",end:"a1t - 100vh",cssClass:"fade-in",toggle:!0,anchors:[this.keyboardBacklitAnchor,this.keyboardTrackpadAnchor]})}},{key:"setupTrackpadKeyframes",value:function(){this.addKeyframe({el:this.keyboardTrackpadImage,start:"a0t - 100vh",cssClass:"fade-in",toggle:!0,anchors:[this.keyboardTrackpadAnchor]}),this.addKeyframe({el:this.keyboardTrackpadCopyblock,start:"a0t - 100vh",cssClass:"fade-in",toggle:!0,anchors:[this.keyboardTrackpadAnchor]})}}],[{key:"IS_SUPPORTED",value:function(){return!document.documentElement.className.match(/(\sreduced-motion)|(\sie)|(\sno-overview-enhanced)/)}}]),t}(y);t.exports=b},{134:134,48:48,78:78,83:83}],122:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=e(78),p=e(48),d=function(e){function t(e){var n;return i(this,t),n=s(this,c(t).call(this,e)),n._pageMetrics=e.pageMetrics,n.currentBreakpoint=e.pageMetrics.breakpoint,n.overflowContainer=n.el.querySelector(".sticky-overflow"),n.copyContainer=n.el.querySelector(".intro-copyblock"),n.introEyebrowContainer=n.el.querySelector(".pencil-intro-eyebrow"),n.introHeadlineContainer=n.el.querySelector(".pencil-intro-headline"),n.createCopy=n.el.querySelector(".create-copy"),n.deviceContainer=n.el.querySelector(".device-container"),n.screenContainer=n.el.querySelector(".screen-container"),n.heightContainer=n.el.querySelector(".height-container"),n.pencilContent=document.querySelector(".pencil-content"),n.pencil=n.el.querySelector(".pencil-holder"),n.pencilVideoContainer=n.el.querySelector(".pencil-video-container"),n.pencilImage=n.el.querySelector(".image-pencil"),n.svg=n.el.querySelector("svg"),n.linePath=n.el.querySelector("path"),n.lineImage=n.el.querySelector("#line-image"),n.linePattern=n.el.querySelector("#line-pattern"),n.gondola=n.el.querySelector(".gondola"),n.gondolaImage=n.el.querySelector(".image-artwork-gondola"),n.mainBG=n.el.querySelector(".image-artwork-bg"),n.mountainFront=n.el.querySelector(".image-artwork-mountain-front"),n.mountainBack=n.el.querySelector(".image-artwork-mountain-back"),n.treeFront=n.el.querySelector(".image-artwork-tree-front"),n.treeBack=n.el.querySelector(".image-artwork-tree-back"),n.cloudsFront=n.el.querySelector(".image-artwork-clouds-front"),n.cloudsMid=n.el.querySelector(".image-artwork-clouds-mid"),n.cloudsBack=n.el.querySelector(".image-artwork-clouds-back"),n.birds=n.el.querySelector(".image-artwork-birds"),n.appLabel=n.el.querySelector("[data-anim-fade-in].app-label"),n.overlay=n.el.querySelector(".gradient-overlay"),n.pencilPill=n.el.querySelector(".image-pencil-pill"),n.artworkUI=n.el.querySelector(".image-artwork-ui"),n.clearMargins=n.clearMargins.bind(u(n)),n.baseExpression="a0t + 90vh",n}return h(t,e),o(t,[{key:"createCopyKeyframes",value:function(){this.addKeyframe({el:this.copyContainer,group:this.group,start:"a0t - 100vh",end:"a0t",anchors:[this.el],y:["-50vh + 100h",0]}),this.addKeyframe({el:this.copyContainer,group:this.group,start:"a0t",end:"a0t + 80vh",anchors:[this.el],y:[0,-80]}),this.addKeyframe({el:this.copyContainer,group:this.group,start:"a0t + 70vh",anchors:[this.el],cssClass:"fade-out",toggle:!0}),this.addKeyframe({el:this.createCopy,group:this.group,start:"".concat(this.baseExpression," + 70vh - 100h"),anchors:[this.el],cssClass:"fade-in",toggle:!0}),this.addKeyframe({el:this.createCopy,group:this.group,start:"".concat(this.baseExpression," + 70vh - 100h"),end:"".concat(this.baseExpression," + 70vh"),anchors:[this.el],y:["100h",0]}),this.addKeyframe({el:this.appLabel,group:this.group,start:"a0t + 150vh",anchors:[this.el],cssClass:"fade-in",toggle:!0}),this.addKeyframe({el:this.overlay,group:this.group,start:"a0t + 100vh",anchors:[this.el],cssClass:"fade-in",toggle:!0}),this.addKeyframe({el:this.deviceContainer,group:this.group,start:"a0t - 100vh",end:"a0t + 250vh",anchors:[this.el],cssClass:"will-change",toggle:!0})}},{key:"createPencilGondolaKeyframes",value:function(){var e=this,t=-120,n=12;this.animatePencilKf=this.addContinuousEvent({el:this.pencil,group:this.group,start:"a0t + 20vh",end:"a0t + 50vh",anchors:[this.el],event:"animate-pencil",progress:[0,1],pathLength:[this.pathLength,0],rot:[t,30],breakpointMask:"XLM",onDraw:function(t){e.linePath.style.strokeDashoffset=t.tweenProps.pathLength.current;var r=e.linePath.getPointAtLength(e.pathLength-t.tweenProps.pathLength.current);e.pencil.style.transform="translate(".concat(r.x,"px, ").concat(r.y+n,"px) rotate(").concat(t.tweenProps.rot.current,"deg)")}}),this.animatePencilKf=this.addContinuousEvent({el:this.pencil,group:this.group,start:"a0t + 20vh",end:"a0t + 50vh",anchors:[this.el],event:"animate-pencil-small",progress:[0,1],pathLength:[this.pathLength,0],rot:[t,30],breakpointMask:"S",onDraw:function(t){e.linePath.style.strokeDashoffset=t.tweenProps.pathLength.current;var r=e.linePath.getPointAtLength(e.pathLength-t.tweenProps.pathLength.current);e.pencil.style.transform="translate(".concat(r.x+4,"px, ").concat(r.y+n,"px) rotate(").concat(t.tweenProps.rot.current,"deg)");
}}),this.pencilInKf=this.addContinuousEvent({el:this.pencil,group:this.group,start:"a0t",end:"a0t + 20vh",event:"pencil-in",anchors:[this.el],pathLen:[this.pathLength,0],onDraw:function(r){var i=e.linePath.getPointAtLength(r.tweenProps.pathLen.current);e.pencil.style.transform="translate(".concat(e.initialPoint.x-i.x,"px, ").concat(2*e.initialPoint.y-i.y+n,"px) rotate(").concat(t,"deg)")}}),this.gondolaInKf=this.addContinuousEvent({el:this.gondola,group:this.group,start:"a0t + 50vh",end:"a0t + 80vh",event:"gondola-in",anchors:[this.el],pathLen:[this.pathLength,0],onDraw:function(t){var n=e.linePath.getPointAtLength(t.tweenProps.pathLen.current);e.gondola.style.transform="translate(".concat(2*e.initialPoint.x-n.x,"px, ").concat(-n.y,"px)")}}),this.gondolaKf=this.addContinuousEvent({el:this.gondola,group:this.group,start:"a0t + 80vh",end:"a0t + 100vh",anchors:[this.el],event:"animate-gondola",progress:[0,1],pathLength:[this.pathLength,.625*this.pathLength],easeFunction:"easeOutSin",breakpointMask:"XLM",onDraw:function(t){var n=e.linePath.getPointAtLength(e.pathLength-t.tweenProps.pathLength.current);e.gondola.style.transform="translate(".concat(n.x,"px, ").concat(n.y,"px)")}}),this.gondolaKf=this.addContinuousEvent({el:this.gondola,group:this.group,start:"a0t + 80vh",end:"a0t + 100vh",anchors:[this.el],event:"animate-gondola",progress:[0,1],pathLength:[this.pathLength,.6*this.pathLength],easeFunction:"easeOutSin",breakpointMask:"S",onDraw:function(t){var n=e.linePath.getPointAtLength(e.pathLength-t.tweenProps.pathLength.current);e.gondola.style.transform="translate(".concat(n.x,"px, ").concat(n.y,"px)")}}),this.addContinuousEvent({el:this.gondolaImage,group:this.group,start:"a0t + 50vh",end:"a0t + 100vh",anchors:[this.el],event:"wiggle-gondola",progress:[0,1],rot:[0,4],onDraw:function(t){var n=3*Math.sin(Math.PI*t.tweenProps.rot.current);e.gondolaImage.style.transform="rotate(".concat(n,"deg)")}})}},{key:"createArtworkKeyframes",value:function(){this.addKeyframe({el:this.pencilImage,group:this.group,start:"a0t",end:"a0t + 100vh",anchors:[this.el,this.deviceContainer],scale:["1/max(100vh/90a1h, 100vw/90a1w)","1/max(100vh/90a1h, 100vw/90a1w)"]}),this.addKeyframe({el:this.mainBG,group:this.group,start:"a0t + 80vh",end:"a0t + 90vh",anchors:[this.el],opacity:[0,1]}),this.addKeyframe({el:this.gondola,group:this.group,start:"a0t + 50vh",end:"a0t + 51vh",anchors:[this.el],opacity:[0,1]}),this.addKeyframe({el:this.mountainFront,group:this.group,start:"a0t + 80vh",end:"a0t + 90vh",anchors:[this.el],opacity:[0,1]}),this.addKeyframe({el:this.mountainBack,group:this.group,start:"a0t + 80vh",end:"a0t + 90vh",anchors:[this.el],opacity:[0,1]}),this.addKeyframe({el:this.treeFront,group:this.group,start:"a0t + 80vh",end:"a0t + 90vh",anchors:[this.el],opacity:[0,1]}),this.addKeyframe({el:this.treeBack,group:this.group,start:"a0t + 80vh",end:"a0t + 90vh",anchors:[this.el],opacity:[0,1]}),this.addKeyframe({el:this.mountainFront,group:this.group,start:this.baseExpression,end:"".concat(this.baseExpression," + 20vh"),anchors:[this.el],easeFunction:"easeOutSin",y:[60,0]}),this.addKeyframe({el:this.mountainBack,group:this.group,start:this.baseExpression,end:"".concat(this.baseExpression," + 20vh"),anchors:[this.el],easeFunction:"easeOutSin",y:[20,0]}),this.addKeyframe({el:this.treeFront,group:this.group,start:this.baseExpression,end:"".concat(this.baseExpression," + 30vh"),anchors:[this.el],easeFunction:"easeOutSin",y:[40,0]}),this.addKeyframe({el:this.treeBack,group:this.group,start:this.baseExpression,end:"".concat(this.baseExpression," + 30vh"),anchors:[this.el],easeFunction:"easeOutSin",y:[20,0]}),this.addKeyframe({el:this.cloudsFront,group:this.group,start:"".concat(this.baseExpression," + 10vh"),end:"".concat(this.baseExpression," + 30vh"),anchors:[this.el],easeFunction:"easeOutSin",opacity:[0,1],y:[40,0]}),this.addKeyframe({el:this.cloudsMid,group:this.group,start:"".concat(this.baseExpression," + 10vh"),end:"".concat(this.baseExpression," + 30vh"),anchors:[this.el],easeFunction:"easeOutSin",opacity:[0,1],y:[40,0]}),this.addKeyframe({el:this.cloudsBack,group:this.group,start:"".concat(this.baseExpression," + 20vh"),end:"".concat(this.baseExpression," + 30vh"),anchors:[this.el],easeFunction:"easeOutSin",opacity:[0,1],y:[10,0]}),this.addKeyframe({el:this.birds,group:this.group,start:"".concat(this.baseExpression," + 5vh"),end:"".concat(this.baseExpression," + 30vh"),anchors:[this.el],easeFunction:"easeOutSin",opacity:[0,1],x:[50,0],y:[30,0]})}},{key:"updateSVG",value:function(){this.svg.setAttribute("viewBox","0 0 ".concat(this.screenContainer.offsetWidth," ").concat(this.screenContainer.offsetHeight)),this.linePath.setAttribute("d","M ".concat(.17*this.screenContainer.offsetWidth,",0\n      L ").concat(this.screenContainer.offsetWidth,",").concat(.42*this.screenContainer.offsetHeight)),this.lineImage.setAttribute("width",.83*this.screenContainer.offsetWidth),this.lineImage.setAttribute("height",.42*this.screenContainer.offsetHeight+6),this.pathLength=this.linePath.getTotalLength(),this.linePath.style.strokeDasharray=this.pathLength,this.initialPoint=this.linePath.getPointAtLength(0)}},{key:"updateSectionRects",value:function(){this.sectionRect=this.el.getBoundingClientRect(),this.sectionVH=this.sectionRect.height/this._pageMetrics.windowHeight;var e=this.stickyBoundingBox(this.screenContainer.getBoundingClientRect());this.offsetY=this._pageMetrics.windowHeight/2-(e.y+.5*e.height),this.addKeyframe({el:this.deviceContainer,group:this.group,start:"a0t + 100vh",end:"a0t + 150vh",scale:["max(100vh/90h, 100vw/90w)",1],y:[this.offsetY,0],anchors:[this.el],breakpointMask:"XLM"}),this.addKeyframe({el:this.deviceContainer,group:this.group,start:"a0t + 100vh",end:"a0t + 150vh",scale:["max(100vh/90h, 100vw/90w)",1],x:[null,"50w - 50a1w + 6.25a1w"],y:[this.offsetY,0],anchors:[this.el,this.heightContainer],breakpointMask:"S"})}},{key:"createUIKeyframes",value:function(){this.addKeyframe({el:this.pencilPill,group:this.group,start:"a0t + 150vh",anchors:[this.el],cssClass:"show",toggle:!0}),this.addKeyframe({el:this.artworkUI,group:this.group,start:"a0t + 150vh",anchors:[this.el],cssClass:"fade-in",toggle:!0})}},{key:"updateMargins",value:function(){var e=this.heightContainer.offsetHeight,t="S"===this.currentBreakpoint?95:146;this.overflowContainer.style.paddingBottom="".concat(2*(e-this._pageMetrics.windowHeight)+t,"px"),this.pencilContent.style.marginTop="".concat(e+t-this._pageMetrics.windowHeight,"px")}},{key:"calculateOffset",value:function(e){var t;return t=this.sectionRect.y<-this.sectionRect.height*(this.sectionVH-1)/this.sectionVH?e.y-this.sectionRect.y-this.sectionRect.height+this._pageMetrics.windowHeight:this.sectionRect.y<0?e.y:e.y-this.sectionRect.y}},{key:"stickyBoundingBox",value:function(e){var t=this.calculateOffset(e);return{x:e.x,y:t,top:t,bottom:e.height+t,left:e.left,right:e.right,width:e.width,height:e.height}}},{key:"clearMargins",value:function(){this.overflowContainer.style.paddingBottom=null,this.pencilContent.style.marginTop=null}},{key:"init",value:function(){this.group=this.anim.createScrollGroup(this.el),this.group.name="Pencil Animation",this.clearMargins(),this.updateMargins(),this.updateSectionRects(),this.updateSVG(),this.createCopyKeyframes(),this.createPencilGondolaKeyframes(),this.createArtworkKeyframes(),this.createUIKeyframes(),this.shaderComponent.createShaderKeyframes()}},{key:"mounted",value:function(){var e=this;this.shaderComponent=this.gum.getComponentOfType("ShaderPlayer",this.el),p(function(){e.init()}),this.anim.on("before-anim-remove",function(){p(function(){e.clearMargins()})})}},{key:"onResizeDebounced",value:function(e){var t=this;this.currentBreakpoint===e.breakpoint&&this.group.remove().then(function(){t.init()})["catch"](function(e){})}}],[{key:"IS_SUPPORTED",value:function(){return!document.documentElement.className.match(/(\sreduced-motion)|(\sie)|(\sno-overview-enhanced)/)}}]),t}(f);t.exports=d},{48:48,78:78}],123:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=e(78),p=function(e){function t(e){return i(this,t),s(this,u(t).call(this,e))}return h(t,e),o(t,[{key:"mounted",value:function(){this.setupNotesKeyframes(),this.setupMarkupKeyframes()}},{key:"setupNotesKeyframes",value:function(){var e=".row-take-notes .feature-copyblock",t=document.querySelector(".row-take-notes .feature-copyblock-subhead"),n=document.querySelector(".row-take-notes .feature-copyblock-copy"),r=document.querySelector(".row-take-notes .feature-copyblock-cta");this.anim.addKeyframe(t,{start:"a0t - 80vh",end:"a0t - 50vh",y:["20px",0],anchors:[e]}),this.anim.addKeyframe(n,{start:"a0t - 80vh",end:"a0t - 50vh",y:["40px",0],anchors:[e]}),r&&this.anim.addKeyframe(r,{start:"a0t - 80vh",end:"a0t - 50vh",y:["60px",0],anchors:[e]});var i=".row-take-notes",a=document.querySelector(".image-applepencil-notes");this.anim.addKeyframe(a,{start:"a0t - 100vh",end:"a0t - 10vh",x:["-62px",0],y:["300px",0],scale:[1.25,1],easeFunction:"easeOutSin",anchors:[i]})}},{key:"setupMarkupKeyframes",value:function(){var e=".row-mark-up .feature-copyblock",t=document.querySelector(".row-mark-up .feature-copyblock-subhead"),n=document.querySelector(".row-mark-up .feature-copyblock-copy"),r=document.querySelector(".image-snipe-tap");this.anim.addKeyframe(t,{start:"a0t - 80vh",end:"a0t - 60vh",y:["20px",0],anchors:[e]}),this.anim.addKeyframe(n,{start:"a0t - 80vh",end:"a0t - 60vh",y:["40px",0],anchors:[e]}),this.anim.addKeyframe(r,{start:"a0t - 70vh",end:"a0t - 50vh",opacity:[0,1],anchors:[e]});var i=".row-mark-up",a=document.querySelector(".image-applepencil-markup");this.anim.addKeyframe(a,{start:"a0t - 100vh",end:"a0t - 30vh",x:["86px",0],y:["300px",0],scale:[1.25,1],easeFunction:"easeOutSin",anchors:[i]})}}],[{key:"IS_SUPPORTED",value:function(){return!document.documentElement.className.match(/(\sreduced-motion)|(\sie)|(\sno-overview-enhanced)/)}}]),t}(f);t.exports=p},{78:78}],124:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=e(78),p=function(e){function t(e){return i(this,t),s(this,u(t).call(this,e))}return h(t,e),o(t,[{key:"mounted",value:function(){this.setupWillChangeKeyframes(),this.setupAppKeyframes(),this.setupCopyKeyframes()}},{key:"setupWillChangeKeyframes",value:function(){var e=this,t=this.el.querySelectorAll(".performance-content .hardware");t.forEach(function(t){e.anim.addKeyframe(t,{start:"t - 150vh",end:"t",cssClass:"will-change"})})}},{key:"setupAppKeyframes",value:function(){var e=this.el.querySelector(".performance-hardware-proapp-skychildren");this.anim.addKeyframe(e,{start:"t - 120vh",end:"t - 50vh",y:["300px",0],scale:[1.25,1],breakpointMask:"ML",easeFunction:"easeOutSin"}),this.anim.addKeyframe(e,{start:"t - 110vh",end:"t - 50vh",y:["80px",0],scale:[1.2,1],breakpointMask:"S",easeFunction:"easeOutSin"});var t=this.el.querySelector(".performance-hardware-proapp-morpholio"),n=this.el.querySelector(".performance-hardware-proapp-morpholio-small"),r=this.el.querySelector(".image-performance-pencil");this.el.querySelector(".image-performance-pencil-small");this.anim.addKeyframe(t,{start:"t - 110vh",end:"t - 40vh",y:["200px",0],scale:[1.2,1],breakpointMask:"ML",easeFunction:"easeOutSin"}),this.anim.addKeyframe(r,{start:"a0t - 110vh",end:"a0t - 40vh",y:["100px",0],easeFunction:"easeOutSin",breakpointMask:"ML",anchors:[".performance-hardware-proapp-morpholio"]}),this.anim.addKeyframe(n,{start:"t - 110vh",end:"t - 50vh",y:["80px",0],scale:[1.2,1],breakpointMask:"S",easeFunction:"easeOutSin"});var i=this.el.querySelector(".performance-hardware-proapp-word");this.anim.addKeyframe(i,{start:"t - 120vh",end:"t - 30vh",y:["200px",0],scale:[1.25,1],breakpointMask:"ML",easeFunction:"easeOutSin"}),this.anim.addKeyframe(i,{start:"t - 110vh",end:"t - 50vh",y:["80px",0],scale:[1.2,1],breakpointMask:"S",easeFunction:"easeOutSin"});var a=this.el.querySelector(".performance-hardware-proapp-adobe"),o=this.el.querySelector(".performance-hardware-proapp-adobe-small");this.anim.addKeyframe(a,{start:"t - 120vh",end:"t - 50vh",y:["300px",0],scale:[1.25,1],breakpointMask:"ML",easeFunction:"easeOutSin"}),this.anim.addKeyframe(o,{start:"t - 120vh",end:"t - 50vh",y:["80px",0],scale:[1.2,1],breakpointMask:"S",easeFunction:"easeOutSin"});var s=this.el.querySelector(".performance-hardware-multitasking");this.anim.addKeyframe(s,{start:"t - 110vh",end:"t - 40vh",y:["200px",0],scale:[1.25,1],breakpointMask:"ML",easeFunction:"easeOutSin"}),this.anim.addKeyframe(s,{start:"t - 110vh",end:"t - 40vh",y:["80px",0],scale:[1.2,1],breakpointMask:"S",easeFunction:"easeOutSin"})}},{key:"setupCopyKeyframes",value:function(){var e=".column-content-bionic .feature-copyblock",t=(this.el.querySelector(".column-content-bionic .feature-copyblock-subhead"),this.el.querySelector(".column-content-bionic .feature-copyblock-copy")),n=this.el.querySelector(".performance-snipe-graphics"),r=this.el.querySelector(".performance-snipe-pc");this.anim.addKeyframe(t,{start:"a0t - 100vh",end:"a0t - 65vh",y:["20px",0],breakpointMask:"ML",anchors:[e]}),this.anim.addKeyframe(n,{start:"a0t - 100vh",end:"a0t - 65vh",y:["40px",0],breakpointMask:"ML",anchors:[e]}),this.anim.addKeyframe(r,{start:"a0t - 100vh",end:"a0t - 65vh",y:["75px",0],breakpointMask:"ML",anchors:[e]});var i=".column-content-pro-apps .feature-copyblock",a=this.el.querySelector(".column-content-pro-apps .feature-copyblock-subhead"),o=this.el.querySelector(".column-content-pro-apps .feature-copyblock-copy");this.anim.addKeyframe(a,{start:"a0t - 100vh",end:"a0t - 40vh",y:["30px",0],breakpointMask:"ML",anchors:[i]}),this.anim.addKeyframe(o,{start:"a0t - 100vh",end:"a0t - 40vh",y:["60px",0],breakpointMask:"ML",anchors:[i]});var s=".column-content-multitasking-copy .feature-copyblock",c=this.el.querySelector(".column-content-multitasking-copy .feature-copyblock-subhead"),u=this.el.querySelector(".column-content-multitasking-copy .feature-copyblock-copy");this.anim.addKeyframe(c,{start:"a0t - 100vh",end:"a0t - 40vh",y:["30px",0],breakpointMask:"ML",anchors:[s]}),this.anim.addKeyframe(u,{start:"a0t - 100vh",end:"a0t - 40vh",y:["60px",0],breakpointMask:"ML",anchors:[s]})}}],[{key:"IS_SUPPORTED",value:function(){return!document.documentElement.className.match(/(\sno-overview-enhanced)/)}}]),t}(f);t.exports=p},{78:78}],125:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=e(78),p=function(e){function t(e){var n;return i(this,t),n=s(this,u(t).call(this,e)),n.heroAnchorSelector=".timeline-performance-hero",n.introHeadline=n.el.querySelector(".subsection-performance-intro [data-anim-fade-out]"),n.heroHardware=n.el.querySelector(".performance-hero"),n.heroHardwareCaption=n.el.querySelector(".subsection-performance-hero .hardware-app-label"),n}return h(t,e),o(t,[{key:"mounted",value:function(){this.setupIntroKeyframes(),this.setupZoomKeyframes()}},{key:"setupIntroKeyframes",value:function(){this.anim.addKeyframe(this.introHeadline,{start:"a0t + 50vh",cssClass:"fade-out",toggle:!0,anchors:[this.heroAnchorSelector]})}},{key:"setupZoomKeyframes",value:function(){this.anim.addKeyframe(this.heroHardware,{start:"a0t",end:"a0t + 100vh",scale:["max(100vw/87w, 100vh/82h)",1],y:["-5h",0],x:["-55w + css(--hero-x-offset)",0],easeFunction:"easeInOutSin",anchors:[this.heroAnchorSelector]}),this.anim.addKeyframe(this.heroHardwareCaption,{start:"a0t + 95vh",cssClass:"fade-in",toggle:!0,anchors:[this.heroAnchorSelector]})}}],[{key:"IS_SUPPORTED",value:function(){return!document.documentElement.className.match(/(\sno-overview-enhanced)/)}}]),t}(f);t.exports=p},{78:78}],126:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=e(78),p=function(e){function t(e){var n;return i(this,t),n=s(this,u(t).call(this,e)),n.hero=n.el.querySelector(".portability-hero"),n.introCopyblock=n.el.querySelector(".intro-copyblock"),n.portabilityCopyblock=n.el.querySelector(".portability-copyblock"),n.portabilitySnipes=n.el.querySelectorAll(".portability-snipes .portability-snipe"),n.connectivityHardware=n.el.querySelector(".connectivity-hardware"),n.connectivityCopyblock=n.el.querySelector(".connectivity-copyblock"),n.connectivityHeadline=n.el.querySelector(".connectivity-copyblock .feature-copyblock-subhead"),n.connectivityCopy=n.el.querySelector(".connectivity-copyblock .feature-copyblock-copy"),n.connectivitySnipes=n.el.querySelectorAll(".connectivity-snipes .portability-snipe"),n.timelinePortability=".timeline-portability",n.timelineConnectivity=".timeline-connectivity",n}return h(t,e),o(t,[{key:"mounted",value:function(){this.createPortablityIntroKeyframes(),this.createPortablityTrigger(),this.createConnectivityTrigger(),this.createWillChangeKeyframe()}},{key:"createPortablityIntroKeyframes",value:function(){this.anim.addKeyframe(this.hero,{start:"a0t - 160vh",end:"a0t - 70vh",y:["100px","0px"],easeFunction:"easeOutQuad",anchors:[this.timelinePortability]}),this.anim.addKeyframe(this.introCopyblock,{start:"a0t - 70vh",cssClass:"fade-out",toggle:!0,anchors:[this.timelinePortability]}),this.anim.addKeyframe(this.introCopyblock,{start:"a0t - 160vh",end:"a0t - 60vh",y:["css(--intro-y-start)","css(--intro-y-end)"],anchors:[this.timelinePortability]})}},{key:"createPortablityTrigger",value:function(){var e=this;this.anim.addKeyframe(this.hero,{start:"a0t - 70vh",end:"a0t - 20vh",scale:[1,1.2],x:["css(--hero-x-start)","css(--hero-x-end)"],y:["0px","-60px"],easeFunction:"easeOutQuad",anchors:[this.timelinePortability]}),this.anim.addKeyframe(this.portabilityCopyblock,{start:"a0t - 50vh",cssClass:"fade-in",toggle:!0,anchors:[this.timelinePortability]}),this.anim.addKeyframe(this.portabilityCopyblock,{start:"a0t - 50vh",end:"a0t - 20vh",y:["30px","0"],anchors:[this.timelinePortability]}),this.portabilitySnipes.forEach(function(t){e.anim.addKeyframe(t,{start:"a0t - 40vh",cssClass:"fade-in",toggle:!0,anchors:[e.timelinePortability]})})}},{key:"createConnectivityTrigger",value:function(){var e=this;this.anim.addKeyframe(this.connectivityHardware,{start:"a0t - 180vh",end:"a0t - 140vh",y:["200px","0"],anchors:[this.timelineConnectivity]}),this.anim.addKeyframe(this.connectivityHardware,{start:"a0t - 180vh",end:"a0t - 140vh",scale:[1.5,1],anchors:[this.timelineConnectivity]}),this.anim.addKeyframe(this.connectivityCopyblock,{start:"a0t - 160vh",cssClass:"fade-in",toggle:!0,breakpointMask:"L",anchors:[this.timelineConnectivity]}),this.anim.addKeyframe(this.connectivityCopyblock,{start:"a0t - 160vh",end:"a0t - 140vh",y:["60px","0"],breakpointMask:"L",anchors:[this.timelineConnectivity]}),this.anim.addKeyframe(this.connectivityHeadline,{start:"a0t - 180vh",end:"a0t - 160vh",y:["20px",0],breakpointMask:"M",anchors:[this.timelineConnectivity]}),this.anim.addKeyframe(this.connectivityCopy,{start:"a0t - 180vh",end:"a0t - 160vh",y:["40px",0],breakpointMask:"M",anchors:[this.timelineConnectivity]}),this.connectivitySnipes.forEach(function(t){e.anim.addKeyframe(t,{start:"a0t - 150vh",cssClass:"fade-in",toggle:!0,anchors:[e.timelineConnectivity]})})}},{key:"createWillChangeKeyframe",value:function(){this.addKeyframe({start:"t - 100vh",end:"b + 100vh",cssClass:"will-change",toggle:!0})}}],[{key:"IS_SUPPORTED",value:function(){return!document.documentElement.className.match(/(\sreduced-motion)|(\sie)|(\sno-overview-enhanced)/)}}]),t}(f);t.exports=p},{78:78}],127:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}var p=e(78),d=e(130),m=e(10),y=function(e){function t(e){var n;return i(this,t),n=s(this,c(t).call(this,e)),n.container=n.el.querySelector(".screen-container"),n.canvasContainer=n.el.querySelector(".canvas-container"),n.shaderColor="#F5F5F7",n.borderColor="#444444",n.shaderUniforms={progress:.5,borderThickness:.03,borderSmoothness:1,borderOpacity:.1,scale:2.4,smoothness:1e-4,noiseSeed:75,centerX:.5,centerY:.5},n.draw=n.draw.bind(u(n)),n.createCanvas(),n.setSize(e.pageMetrics),n.initShaderPlayer(),n.createShaderKeyframes(),n.draw(0),n}return h(t,e),o(t,[{key:"createCanvas",value:function(){this.canvas&&this.canvasContainer.removeChild(this.canvas),this.canvas=document.createElement("canvas"),this.canvas.id="artwork-canvas",this.canvasContainer.appendChild(this.canvas)}},{key:"createShaderKeyframes",value:function(){var e=this;this.addKeyframe({el:this.canvas,group:this.anim.getGroupForTarget(this.el),start:"a0t + 40vh",anchors:[this.el],cssClass:"show",toggle:!0}),this.addContinuousEvent({group:this.anim.getGroupForTarget(this.el),start:"a0t + 80vh",end:"a0t + 120vh",event:"reveal",progress:[0,1],anchors:[this.el],onDraw:function(t){e.draw(t.tweenProps.progress.current)}}),this.addKeyframe({el:this.shaderUniforms,group:this.anim.getGroupForTarget(this.el),start:"a0t + 88vh",end:"a0t + 90vh",borderThickness:[0,.03],anchors:[this.el]})}},{key:"initShaderPlayer",value:function(){this.igloo=new m(this.canvas),this.quad=this.igloo.array(m.QUAD2),this.program=this.igloo.program(d["https://www.apple.com.cn/v/ipad-pro/y/built/scripts/quad.vert"],d["https://www.apple.com.cn/v/ipad-pro/y/built/scripts/reveal.frag"])}},{key:"draw",value:function(e){this.program.use().uniform("resolution",[this.width,this.height]).uniform("progress",e).uniform("scale",this.shaderUniforms.scale).uniform("smoothness",this.shaderUniforms.smoothness).uniform("borderThickness",this.shaderUniforms.borderThickness).uniform("borderSmoothness",this.shaderUniforms.borderSmoothness).uniform("borderOpacity",this.shaderUniforms.borderOpacity).uniform("color",this.normalRGB(this.shaderColor)).uniform("borderColor",this.normalRGB(this.borderColor)).uniform("seed",this.shaderUniforms.noiseSeed).uniform("center",[this.shaderUniforms.centerX,this.shaderUniforms.centerY]).attrib("quad",this.quad,2).draw(this.igloo.gl.TRIANGLE_STRIP,m.QUAD2.length/2)}},{key:"setSize",value:function(e){var t=Math.max(e.windowHeight,e.windowWidth),n=this.container.offsetWidth;this.width=this.height=t,this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.width="".concat(n,"px"),this.canvas.style.height="".concat(n,"px")}},{key:"normalRGB",value:function(e){var t=f(e);return t=t.map(function(e){return e/255}),t.push(1),t}},{key:"onResizeDebounced",value:function(e){this.igloo=this.program=this.width=this.height=null,this.createCanvas(),this.setSize(e),this.initShaderPlayer()}}],[{key:"IS_SUPPORTED",value:function(){return!0}}]),t}(p);t.exports=y},{10:10,130:130,78:78}],128:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=e(78),p=e(58),d=(e(64),function(e){function t(e){var n;return i(this,t),n=s(this,c(t).call(this,e)),n.isTiedToScroll=n.el.classList.contains("tied-to-scroll"),n.animationRunning=!1,n.animationEnded=!1,n.timeline={start:"t - 100vh + h",end:"t"},n.snipeEnter=n.snipeEnter.bind(u(n)),n.snipeExit=n.snipeExit.bind(u(n)),n}return h(t,e),o(t,[{key:"mounted",value:function(){this.isTiedToScroll?this.setAnimationTiedToScroll():this.setAnimationNotTiedToScroll()}},{key:"setAnimationTiedToScroll",value:function(){var e=this,t=window.getComputedStyle(this.el,null).getPropertyValue("animation-duration"),n=parseInt(t),r=0;this.el.style.animationDelay="0s";var i=p.addKeyframe(this.el,{start:this.timeline.start,end:this.timeline.end,progress:[0,100]});i.controller.on("draw",function(t){var i=t.tweenProps.progress.current,a=100/n,o=Math.round(i/a);r!=o&&(e.el.style.animationDelay="-".concat(o,"s")),r=o})}},{key:"setAnimationNotTiedToScroll",value:function(){this.el.style.animation="none",this.addDiscreteEvent({event:"snipe-animation",start:this.timeline.start,end:this.timeline.end,onEnter:this.snipeEnter,onExit:this.snipeExit})}},{key:"setAnimPlayState",value:function(e){this.animationEnded||(this.animationRunning=!0,this.el.style.animationPlayState=e)}},{key:"snipeEnter",value:function(){var e=this;this.animationRunning||(this.el.style.removeProperty("animation"),this.el.addEventListener("animationend",function(){e.setAnimPlayState("paused"),e.animationEnded=!0})),this.setAnimPlayState("running")}},{key:"snipeExit",value:function(){this.setAnimPlayState("paused")}}],[{key:"IS_SUPPORTED",value:function(){return!document.documentElement.className.match(/(\sreduced-motion)|(\sie)|(\sno-overview-enhanced)|(\ssnipe-animations-supported)/)}}]),t}(f));t.exports=d},{58:58,64:64,78:78}],129:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return s(e)||o(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){i=!0,a=c}finally{try{r||null==s["return"]||s["return"]()}finally{if(i)throw a}}return n}}function s(e){if(Array.isArray(e))return e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");
}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=d(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=m(e),null!==e););return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=e(78),b=e(108),E=3,_=function(e){function t(e){var n;if(c(this,t),n=l(this,m(t).call(this,e)),n.video=n.el,n.options=e.data||{},n.isRetina=window.devicePixelRatio>1&&n.video.dataset.enableRetina,n.allowScrub=n.video.hasAttribute("data-scrub"),n.sources={},n.allowScrub&&document.documentElement.classList.contains("no-video-scrub"))return l(n);Object.entries(n.video.dataset).filter(function(e){var t=i(e,1),n=t[0];return 0===n.indexOf("src")}).forEach(function(e){var t=i(e,2),r=t[0],a=t[1],o=r.replace(/^src/,"").toLowerCase();a=n.isRetina?a.replace("".concat(n.isRetina,".mp4"),"".concat(n.isRetina,"https://www.apple.com.cn/v/ipad-pro/y/built/scripts/_2x.mp4")):a,n.sources[o]=a});var r;return Object.defineProperty(f(n),"currentViewport",{set:function(e){r=b(e),n.load(r)},get:function(){return r}}),n.currentViewport=e.pageMetrics.breakpoint,n.previousSource=null,n.inLoadArea=!1,n}return y(t,e),h(t,[{key:"mounted",value:function(){var e=this;p(m(t.prototype),"mounted",this).call(this),this.addDiscreteEvent({event:"Video: Load",start:"t - 200vh",end:"b + 100vh",onEnter:function(){e.inLoadArea=!0,e.load()},onExit:function(){e.inLoadArea=!1}})}},{key:"onBreakpointChange",value:function(e){this.currentViewport=e.breakpoint}},{key:"load",value:function(e){if(this.inLoadArea){e=e||this.currentViewport;var t=this.sources[e];t&&t!==this.previousSource&&(this.video.autoplay=this.video.readyState>=E&&!this.video.paused,this.video.src=this.previousSource=t,this.video.load())}}},{key:"queueVideoPlayback",value:function(){var e=this;"function"==typeof this._onCanPlay&&this.video.removeEventListener("canplay",this._onCanPlay),this.video.readyState<E?(this._onCanPlay=function(){e.video.play(),e.video.removeEventListener("canplay",e._onCanPlay)},this.video.addEventListener("canplay",this._onCanPlay)):this.video.play()}},{key:"pauseVideoPlayback",value:function(){this.video.paused||this.video.pause()}}],[{key:"IS_SUPPORTED",value:function(){return!document.documentElement.className.match(/(\sno-inline-video)|(\sreduced-motion)|(\sie)|(\sno-overview-enhanced)/)}}]),t}(g);t.exports=_},{108:108,78:78}],130:[function(e,t,n){"use strict";t.exports={"https://www.apple.com.cn/v/ipad-pro/y/built/scripts/reveal.frag":"precision highp float;\n\nuniform vec2 resolution;\nuniform float progress;//0:1:0.47\nuniform vec4 color;\nuniform vec4 borderColor;\nuniform float scale;//0:100:2.38\nuniform float smoothness;//0:1:0.001\nuniform float borderSmoothness;\nuniform float borderThickness;\nuniform float borderOpacity;\nuniform float seed;//0:100:74.57\nuniform vec2 center;\n\nvec4 getBorderColor(){\n\treturn vec4(borderColor.rgb, borderOpacity);\n}\n\n// http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nfloat random(vec2 co)\n{\n    highp float a = seed;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt= dot(co.xy ,vec2(a,b));\n    highp float sn= mod(dt,3.14);\n    return fract(sin(sn) * c);\n}\n\n// 2D Noise based on Morgan McGuire @morgan3d\n// https://www.shadertoy.com/view/4dS3Wd\nfloat noise (in vec2 st) {\n    vec2 i = floor(st);\n    vec2 f = fract(st);\n\n    // Four corners in 2D of a tile\n    float a = random(i);\n    float b = random(i + vec2(1.0, 0.0));\n    float c = random(i + vec2(0.0, 1.0));\n    float d = random(i + vec2(1.0, 1.0));\n\n    // Smooth Interpolation\n\n    // Cubic Hermine Curve.  Same as SmoothStep()\n    // vec2 u = f*f*(3.0-2.0*f);\n    vec2 u = smoothstep(0.,1.,f);\n\n    // Mix 4 corner percentages\n    return mix(a, b, u.x) +\n            (c - a)* u.y * (1.0 - u.x) +\n            (d - b) * u.x * u.y;\n}\n\nvec4 transition (vec2 uv) {\n  // Reveal to alpha\n  vec4 from = vec4(0., 0., 0., 0.);\n  vec4 to = color;\n  vec4 borderColor = getBorderColor();\n  float toPoint = (distance(uv, center)/ (1.0001 - (1. - progress)));\n  // 4 octaves of noise - https://www.shadertoy.com/view/lsf3WH\n  uv *= 8.0;\n  mat2 m = mat2( 1.6,  1.2, -1.2,  1.6 );\n  float n  = 0.5000*noise( uv * scale ); uv = m*uv;\n  n += 0.2500*noise( uv * scale ); uv = m*uv;\n  // n += 0.1250*noise( uv * scale ); uv = m*uv;\n  // n += 0.0625*noise( uv * scale ); uv = m*uv;\n\n  float d = ((2.0 * (1. - progress) + n) * toPoint * n);\n  float overOne = clamp(d, 0.0, 1.0);\n  float p = mix(-smoothness, 1.0 + smoothness, overOne);\n\n  float lower = p - smoothness;\n  float higher = p + smoothness;\n\n  float q = smoothstep(lower, higher, n);\n\n  // border\n  float d2 = (((2.0 + borderThickness) * (1. - progress) + n) * toPoint * n);\n  float overOne2 = clamp(0., 1., d2);\n  float p2 = mix(-smoothness, 1.0 + smoothness, overOne2);\n\n  float lower2 = p2 - smoothness*borderSmoothness;\n  float higher2 = p2 + smoothness*borderSmoothness;\n\n  float q2 = smoothstep(lower2, higher2, n);\n  to -= borderColor;\n  return mix(from, to, 1.0 - q) + mix(from, borderColor, 1.0 - q2);\n}\n\nvoid main() {\n  vec2 vUV = gl_FragCoord.xy/resolution.xy;\n  // gl_FragColor = color1 * noise(vUV);\n  gl_FragColor = transition(vUV);\n}","https://www.apple.com.cn/v/ipad-pro/y/built/scripts/quad.vert":"attribute vec2 quad;\nvarying vec2 index;\n\nvoid main() {\n    index = (quad + 1.0) / 2.0;\n    gl_Position = vec4(quad, 0, 1);\n}\n"}},{}],131:[function(e,t,n){"use strict";t.exports={SnipeAnimation:e(128),FlowComponent:e(117),InlineVideo:e(119),DisplayUnlockSprite:e(115),DisplayZoomSplit:e(116),DisplayHeroZoomSmall:e(113),DisplaySizesSplitSmall:e(114),VideoViewportSource:e(129),AdaptiveCursor:e(109),PencilAnimation:e(122),PencilContent:e(123),ShaderPlayer:e(127),HardwareRotation:e(118),CameraZoom:e(112),LidarAnimation:e(120),AppSwitcher:e(110),PerformanceZoom:e(125),PerformanceContent:e(124),Portability:e(126),MagicKeyboard:e(121),ArrowAnimation:e(111)}},{109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:126,127:127,128:128,129:129}],132:[function(e,t,n){"use strict";var r=e(79),i=e(80),a=e(56),o=e(131),s=e(64),c=e(133),u=e(1),h=e(134),l={initialize:function(){Object.assign(i,o);var e=document.documentElement,t=getComputedStyle(e),n=320,l={},f={};l.small=parseInt(t.getPropertyValue("--viewport-vertical-small")),l.medium=parseInt(t.getPropertyValue("--viewport-vertical-medium")),f.small=parseInt(t.getPropertyValue("--viewport-small").replace("px","")),f.medium=parseInt(t.getPropertyValue("--viewport-medium").replace("px","")),s.BREAKPOINTS=[{name:"S",mediaQuery:"only screen\n\t\t\t\t\tand (min-width: ".concat(n,"px)\n\t\t\t\t\tand (max-height: ").concat(l.small,"px)")},{name:"S",mediaQuery:"only screen\n\t\t\t\t\tand (max-width: ".concat(f.small,"px)")},{name:"M",mediaQuery:"only screen\n\t\t\t\t\tand (min-width: ".concat(f.small+1,"px)\n\t\t\t\t\tand (max-height: ").concat(l.medium,"px)")},{name:"M",mediaQuery:"only screen\n\t\t\t\t\tand (max-width: ".concat(f.medium,"px)")},{name:"L",mediaQuery:"only screen\n\t\t\t\t\tand (min-width: ".concat(f.medium+1,"px)\n\t\t\t\t\tand (min-height: ").concat(l.medium+1,"px)")}];var p=document.querySelector("body"),d=new r(p);d.keyframeGroupsActive=!0;var m=function(){d.keyframeGroupsActive&&(d.anim.trigger("before-anim-remove"),d.anim.remove().then(function(){var t=e.querySelectorAll("[data-anim-lazy-image]");t.forEach(function(e){e.removeAttribute("data-anim-lazy-image")}),e.classList.add("no-overview-enhanced"),e.classList.remove("overview-enhanced"),h.switchToLightTheme()})["catch"](function(e){}),d.keyframeGroupsActive=!1)};d.anim.on(s.EVENTS.ON_DOM_GROUPS_CREATED,function(){new a}),d.anim.on(s.PageEvents.ON_BREAKPOINT_CHANGE,function(e){m(),p.classList.remove("ac-theme-dark")}),d.anim.on(s.PageEvents.ON_RESIZE_DEBOUNCED,function(e){c(e)||m()}),u.detect()}};l.initialize()},{1:1,131:131,133:133,134:134,56:56,64:64,79:79,80:80}],133:[function(e,t,n){"use strict";var r=.45,i=function(e){var t=!0,n=e?e.windowWidth:window.innerWidth,i=e?e.windowHeight:window.innerHeight,a=["(max-width: 320px)","(max-width: 734px) and (max-height: 414px)","(max-width: 734px) and (min-height: 840px)","(min-width: 735px) and (max-height: 710px)"];return n/i<r&&(t=!1),a.forEach(function(e){window.matchMedia(e).matches&&(t=!1)}),t};t.exports=i},{}],134:[function(e,t,n){"use strict";var r=document.querySelector("body"),i="ac-theme-dark",a=function(){r.classList.add(i)},o=function(){r.classList.remove(i)},s=function(e,t){e.addDiscreteEvent({event:"localNavSwapDark-".concat(e.componentName),start:t.toDark.start,onEvent:function(){return a()},onEventReverse:function(){return o()},anchors:t.toDark.anchors}),e.addDiscreteEvent({event:"localNavSwapLight-".concat(e.componentName),start:t.toLight.start,onEvent:function(){return o()},onEventReverse:function(){return a()},anchors:t.toLight.anchors})};t.exports={swap:s,switchToLight:o,switchToDark:a}},{}]},{},[132]);